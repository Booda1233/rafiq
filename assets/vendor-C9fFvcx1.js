import{g as ss,h as ql}from"./react-DBkrbndE.js";var ni={exports:{}},ii={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vr;function Gl(){return vr||(vr=1,function(e){function t(H,K){var X=H.length;H.push(K);e:for(;0<X;){var ue=X-1>>>1,_=H[ue];if(0<r(_,K))H[ue]=K,H[X]=_,X=ue;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var K=H[0],X=H.pop();if(X!==K){H[0]=X;e:for(var ue=0,_=H.length,_e=_>>>1;ue<_e;){var Ne=2*(ue+1)-1,S=H[Ne],Te=Ne+1,we=H[Te];if(0>r(S,X))Te<_&&0>r(we,S)?(H[ue]=we,H[Te]=X,ue=Te):(H[ue]=S,H[Ne]=X,ue=Ne);else if(Te<_&&0>r(we,X))H[ue]=we,H[Te]=X,ue=Te;else break e}}return K}function r(H,K){var X=H.sortIndex-K.sortIndex;return X!==0?X:H.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var f=[],c=[],h=1,p=null,m=3,g=!1,E=!1,A=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function O(H){for(var K=n(c);K!==null;){if(K.callback===null)i(c);else if(K.startTime<=H)i(c),K.sortIndex=K.expirationTime,t(f,K);else break;K=n(c)}}function w(H){if(A=!1,O(H),!E)if(n(f)!==null)E=!0,N||(N=!0,Y());else{var K=n(c);K!==null&&W(w,K.startTime-H)}}var N=!1,q=-1,Z=5,G=-1;function x(){return R?!0:!(e.unstable_now()-G<Z)}function F(){if(R=!1,N){var H=e.unstable_now();G=H;var K=!0;try{e:{E=!1,A&&(A=!1,M(q),q=-1),g=!0;var X=m;try{t:{for(O(H),p=n(f);p!==null&&!(p.expirationTime>H&&x());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,m=p.priorityLevel;var _=ue(p.expirationTime<=H);if(H=e.unstable_now(),typeof _=="function"){p.callback=_,O(H),K=!0;break t}p===n(f)&&i(f),O(H)}else i(f);p=n(f)}if(p!==null)K=!0;else{var _e=n(c);_e!==null&&W(w,_e.startTime-H),K=!1}}break e}finally{p=null,m=X,g=!1}K=void 0}}finally{K?Y():N=!1}}}var Y;if(typeof k=="function")Y=function(){k(F)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,z=$.port2;$.port1.onmessage=F,Y=function(){z.postMessage(null)}}else Y=function(){I(F,0)};function W(H,K){q=I(function(){H(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var X=m;m=K;try{return H()}finally{m=X}},e.unstable_requestPaint=function(){R=!0},e.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=m;m=H;try{return K()}finally{m=X}},e.unstable_scheduleCallback=function(H,K,X){var ue=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,H){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=X+_,H={id:h++,callback:K,priorityLevel:H,startTime:X,expirationTime:_,sortIndex:-1},X>ue?(H.sortIndex=X,t(c,H),n(f)===null&&H===n(c)&&(A?(M(q),q=-1):A=!0,W(w,X-ue))):(H.sortIndex=_,t(f,H),E||g||(E=!0,N||(N=!0,Y()))),H},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(H){var K=m;return function(){var X=m;m=K;try{return H.apply(this,arguments)}finally{m=X}}}}(ii)),ii}var Lr;function x2(){return Lr||(Lr=1,ni.exports=Gl()),ni.exports}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yl,zl;function $l(){return{geminiUrl:Yl,vertexUrl:zl}}function Wl(e,t,n){var i,r,u;if(!(!((i=e.httpOptions)===null||i===void 0)&&i.baseUrl)){const a=$l();return e.vertexai?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(u=a.geminiUrl)!==null&&u!==void 0?u:n}return e.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dt{}function J(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(e,t,n){for(let u=0;u<t.length-1;u++){const a=t[u];if(a.endsWith("[]")){const l=a.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(e[l])){const f=e[l];if(Array.isArray(n))for(let c=0;c<f.length;c++){const h=f[c];s(h,t.slice(u+1),n[c])}else for(const c of f)s(c,t.slice(u+1),n)}return}else if(a.endsWith("[0]")){const l=a.slice(0,-3);l in e||(e[l]=[{}]);const f=e[l];s(f[0],t.slice(u+1),n);return}(!e[a]||typeof e[a]!="object")&&(e[a]={}),e=e[a]}const i=t[t.length-1],r=e[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else e[i]=n}function o(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const i=t[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in e){const u=e[r];return Array.isArray(u)?u.map(a=>o(a,t.slice(n+1))):void 0}else return}else e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wr;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wr||(wr={}));var Or;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Or||(Or={}));var it;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(it||(it={}));var Fr;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Fr||(Fr={}));var Ur;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Ur||(Ur={}));var Br;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Br||(Br={}));var Hr;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Hr||(Hr={}));var Vr;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Vr||(Vr={}));var qr;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qr||(qr={}));var Gr;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Gr||(Gr={}));var Yr;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Yr||(Yr={}));var zr;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(zr||(zr={}));var $r;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})($r||($r={}));var Wr;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wr||(Wr={}));var Jr;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(Jr||(Jr={}));var Kr;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kr||(Kr={}));var Ln;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Ln||(Ln={}));var Qr;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qr||(Qr={}));var Ii;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ii||(Ii={}));var Xr;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xr||(Xr={}));var Zr;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Zr||(Zr={}));var jr;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(jr||(jr={}));var eo;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(eo||(eo={}));var to;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(to||(to={}));var no;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(no||(no={}));var io;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(io||(io={}));var ro;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(ro||(ro={}));var oo;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(oo||(oo={}));var uo;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uo||(uo={}));var so;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(so||(so={}));var ao;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ao||(ao={}));var lo;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(lo||(lo={}));var co;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(co||(co={}));var fo;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(fo||(fo={}));var ho;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ho||(ho={}));var po;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(po||(po={}));var mo;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(mo||(mo={}));var go;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(go||(go={}));var To;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(To||(To={}));var Eo;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Eo||(Eo={}));var Co;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Co||(Co={}));var At;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(At||(At={}));class bi{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class zt{get text(){var t,n,i,r,u,a,l,f;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const p=[];for(const m of(f=(l=(a=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&f!==void 0?f:[]){for(const[g,E]of Object.entries(m))g!=="text"&&g!=="thought"&&(E!==null||E!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var t,n,i,r,u,a,l,f;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const p of(f=(l=(a=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&f!==void 0?f:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,i,r,u,a,l,f;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(l=(a=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||f===void 0?void 0:f.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,i,r,u,a,l,f,c;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(f=(l=(a=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,i,r,u,a,l,f,c;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(f=(l=(a=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class yo{}class _o{}class Jl{}class Kl{}class Ao{}class So{}class Io{}class Ql{}class bo{}class xo{}class No{}class Xl{}class Zl{}class jl{}class Ro{}class ec{get text(){var t,n,i;let r="",u=!1;const a=[];for(const l of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(l))f!=="text"&&f!=="thought"&&c!==null&&a.push(f);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;u=!0,r+=l.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,n,i;let r="";const u=[];for(const a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,f]of Object.entries(a))l!=="inlineData"&&f!==null&&u.push(l);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class tc{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function se(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function as(e,t){const n=se(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function ls(e){return Array.isArray(e)?e.map(t=>wn(t)):[wn(e)]}function wn(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function cs(e){const t=wn(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function fs(e){const t=wn(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ko(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function ds(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>ko(t)):[ko(e)]}function xi(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Mo(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Do(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Ae(e){if(e==null)throw new Error("ContentUnion is required");return xi(e)?e:{role:"user",parts:ds(e)}}function hs(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Ae(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Ae(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Ae(n)):[Ae(t)]}function Ue(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Mo(e)||Do(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ae(e)]}const t=[],n=[],i=xi(e[0]);for(const r of e){const u=xi(r);if(u!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(r);else{if(Mo(r)||Do(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||t.push({role:"user",parts:ds(n)}),t}function nc(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(it).includes(n[0].toUpperCase())?n[0].toUpperCase():it.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(it).includes(i.toUpperCase())?i.toUpperCase():it.TYPE_UNSPECIFIED})}}function It(e){const t={},n=["items"],i=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=e.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,e=u[1]):u[1].type==="null"&&(t.nullable=!0,e=u[0])),e.type instanceof Array&&nc(e.type,t);for(const[a,l]of Object.entries(e))if(l!=null)if(a=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;t.type=Object.values(it).includes(l.toUpperCase())?l.toUpperCase():it.TYPE_UNSPECIFIED}else if(n.includes(a))t[a]=It(l);else if(i.includes(a)){const f=[];for(const c of l){if(c.type=="null"){t.nullable=!0;continue}f.push(It(c))}t[a]=f}else if(r.includes(a)){const f={};for(const[c,h]of Object.entries(l))f[c]=It(h);t[a]=f}else{if(a==="additionalProperties")continue;t[a]=l}return t}function Zi(e){return It(e)}function ji(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function er(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Dt(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=It(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=It(t.response));return e}function Pt(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ic(e,t,n,i=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Qe(e,t){if(typeof t!="string")throw new Error("name must be a string");return ic(e,t,"cachedContents")}function ps(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Xe(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function rc(e){return e!=null&&typeof e=="object"&&"name"in e}function oc(e){return e!=null&&typeof e=="object"&&"video"in e}function uc(e){return e!=null&&typeof e=="object"&&"uri"in e}function ms(e){var t;let n;if(rc(e)&&(n=e.name),!(uc(e)&&(n=e.uri,n===void 0))&&!(oc(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function gs(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Ts(e){for(const t of["models","tunedModels","publisherModels"])if(sc(e,t))return e[t];return[]}function sc(e,t){return e!==null&&typeof e=="object"&&t in e}function ac(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function lc(e,t={}){const n=[],i=new Set;for(const r of e){const u=r.name;if(i.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);i.add(u);const a=ac(r,t);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Es(e,t){if(typeof t!="string"&&!Array.isArray(t)){if(e&&e.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!t.gcsUri&&!t.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(t.inlinedRequests&&t.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!t.inlinedRequests&&!t.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return t}else{if(Array.isArray(t))return{inlinedRequests:t};if(typeof t=="string"){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};if(t.startsWith("files/"))return{fileName:t}}}throw new Error(`Unsupported source: ${t}`)}function cc(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function vt(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Cs(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fc(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function dc(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function hc(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function pc(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],fc(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],dc(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],hc(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function ys(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>pc(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function mc(e){const t={},n=o(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const i=o(e,["default"]);i!=null&&s(t,["default"],i);const r=o(e,["description"]);r!=null&&s(t,["description"],r);const u=o(e,["enum"]);u!=null&&s(t,["enum"],u);const a=o(e,["example"]);a!=null&&s(t,["example"],a);const l=o(e,["format"]);l!=null&&s(t,["format"],l);const f=o(e,["items"]);f!=null&&s(t,["items"],f);const c=o(e,["maxItems"]);c!=null&&s(t,["maxItems"],c);const h=o(e,["maxLength"]);h!=null&&s(t,["maxLength"],h);const p=o(e,["maxProperties"]);p!=null&&s(t,["maxProperties"],p);const m=o(e,["maximum"]);m!=null&&s(t,["maximum"],m);const g=o(e,["minItems"]);g!=null&&s(t,["minItems"],g);const E=o(e,["minLength"]);E!=null&&s(t,["minLength"],E);const A=o(e,["minProperties"]);A!=null&&s(t,["minProperties"],A);const R=o(e,["minimum"]);R!=null&&s(t,["minimum"],R);const I=o(e,["nullable"]);I!=null&&s(t,["nullable"],I);const M=o(e,["pattern"]);M!=null&&s(t,["pattern"],M);const k=o(e,["properties"]);k!=null&&s(t,["properties"],k);const O=o(e,["propertyOrdering"]);O!=null&&s(t,["propertyOrdering"],O);const w=o(e,["required"]);w!=null&&s(t,["required"],w);const N=o(e,["title"]);N!=null&&s(t,["title"],N);const q=o(e,["type"]);return q!=null&&s(t,["type"],q),t}function gc(e){const t={};if(o(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=o(e,["category"]);n!=null&&s(t,["category"],n);const i=o(e,["threshold"]);return i!=null&&s(t,["threshold"],i),t}function Tc(e){const t={},n=o(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=o(e,["description"]);i!=null&&s(t,["description"],i);const r=o(e,["name"]);r!=null&&s(t,["name"],r);const u=o(e,["parameters"]);u!=null&&s(t,["parameters"],u);const a=o(e,["parametersJsonSchema"]);a!=null&&s(t,["parametersJsonSchema"],a);const l=o(e,["response"]);l!=null&&s(t,["response"],l);const f=o(e,["responseJsonSchema"]);return f!=null&&s(t,["responseJsonSchema"],f),t}function Ec(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Cc(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Ec(n)),t}function yc(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function _c(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],yc(n)),t}function Ac(){return{}}function Sc(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Tc(c))),s(t,["functionDeclarations"],f)}if(o(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],Cc(i));const r=o(e,["googleSearchRetrieval"]);if(r!=null&&s(t,["googleSearchRetrieval"],_c(r)),o(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(e,["urlContext"])!=null&&s(t,["urlContext"],Ac());const a=o(e,["codeExecution"]);a!=null&&s(t,["codeExecution"],a);const l=o(e,["computerUse"]);return l!=null&&s(t,["computerUse"],l),t}function Ic(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function bc(e){const t={},n=o(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=o(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function xc(e){const t={},n=o(e,["latLng"]);n!=null&&s(t,["latLng"],bc(n));const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function Nc(e){const t={},n=o(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],Ic(n));const i=o(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],xc(i)),t}function Rc(e){const t={},n=o(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function _s(e){const t={},n=o(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Rc(n)),t}function kc(e){const t={},n=o(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=o(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],_s(i)),t}function Mc(e){const t={},n=o(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>kc(r))),s(t,["speakerVoiceConfigs"],i)}return t}function Dc(e){const t={},n=o(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],_s(n));const i=o(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],Mc(i));const r=o(e,["languageCode"]);return r!=null&&s(t,["languageCode"],r),t}function Pc(e){const t={},n=o(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const i=o(e,["thinkingBudget"]);return i!=null&&s(t,["thinkingBudget"],i),t}function vc(e,t,n){const i={},r=o(t,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],ys(Ae(r)));const u=o(t,["temperature"]);u!=null&&s(i,["temperature"],u);const a=o(t,["topP"]);a!=null&&s(i,["topP"],a);const l=o(t,["topK"]);l!=null&&s(i,["topK"],l);const f=o(t,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);const c=o(t,["maxOutputTokens"]);c!=null&&s(i,["maxOutputTokens"],c);const h=o(t,["stopSequences"]);h!=null&&s(i,["stopSequences"],h);const p=o(t,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(t,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(t,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const E=o(t,["frequencyPenalty"]);E!=null&&s(i,["frequencyPenalty"],E);const A=o(t,["seed"]);A!=null&&s(i,["seed"],A);const R=o(t,["responseMimeType"]);R!=null&&s(i,["responseMimeType"],R);const I=o(t,["responseSchema"]);I!=null&&s(i,["responseSchema"],mc(Zi(I)));const M=o(t,["responseJsonSchema"]);if(M!=null&&s(i,["responseJsonSchema"],M),o(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=o(t,["safetySettings"]);if(n!==void 0&&k!=null){let F=k;Array.isArray(F)&&(F=F.map(Y=>gc(Y))),s(n,["safetySettings"],F)}const O=o(t,["tools"]);if(n!==void 0&&O!=null){let F=Pt(O);Array.isArray(F)&&(F=F.map(Y=>Sc(Dt(Y)))),s(n,["tools"],F)}const w=o(t,["toolConfig"]);if(n!==void 0&&w!=null&&s(n,["toolConfig"],Nc(w)),o(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=o(t,["cachedContent"]);n!==void 0&&N!=null&&s(n,["cachedContent"],Qe(e,N));const q=o(t,["responseModalities"]);q!=null&&s(i,["responseModalities"],q);const Z=o(t,["mediaResolution"]);Z!=null&&s(i,["mediaResolution"],Z);const G=o(t,["speechConfig"]);if(G!=null&&s(i,["speechConfig"],Dc(ji(G))),o(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=o(t,["thinkingConfig"]);return x!=null&&s(i,["thinkingConfig"],Pc(x)),i}function Lc(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["request","model"],se(e,i));const r=o(t,["contents"]);if(r!=null){let a=Ue(r);Array.isArray(a)&&(a=a.map(l=>ys(l))),s(n,["request","contents"],a)}const u=o(t,["config"]);return u!=null&&s(n,["request","generationConfig"],vc(e,u,n)),n}function wc(e,t){const n={};if(o(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(o(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=o(t,["fileName"]);i!=null&&s(n,["fileName"],i);const r=o(t,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(a=>Lc(e,a))),s(n,["requests","requests"],u)}return n}function Oc(e,t){const n={},i=o(e,["displayName"]);if(t!==void 0&&i!=null&&s(t,["batch","displayName"],i),o(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Fc(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["src"]);r!=null&&s(n,["batch","inputConfig"],wc(e,Es(e,r)));const u=o(t,["config"]);return u!=null&&s(n,["config"],Oc(u,n)),n}function Uc(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],vt(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Bc(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],vt(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Hc(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);if(t!==void 0&&r!=null&&s(t,["_query","pageToken"],r),o(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Vc(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],Hc(n,t)),t}function qc(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],vt(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Gc(e){const t={},n=o(e,["format"]);n!=null&&s(t,["instancesFormat"],n);const i=o(e,["gcsUri"]);i!=null&&s(t,["gcsSource","uris"],i);const r=o(e,["bigqueryUri"]);if(r!=null&&s(t,["bigquerySource","inputUri"],r),o(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Yc(e){const t={},n=o(e,["format"]);n!=null&&s(t,["predictionsFormat"],n);const i=o(e,["gcsUri"]);i!=null&&s(t,["gcsDestination","outputUriPrefix"],i);const r=o(e,["bigqueryUri"]);if(r!=null&&s(t,["bigqueryDestination","outputUri"],r),o(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return t}function zc(e,t){const n={},i=o(e,["displayName"]);t!==void 0&&i!=null&&s(t,["displayName"],i);const r=o(e,["dest"]);return t!==void 0&&r!=null&&s(t,["outputConfig"],Yc(cc(r))),n}function $c(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["model"],se(e,i));const r=o(t,["src"]);r!=null&&s(n,["inputConfig"],Gc(Es(e,r)));const u=o(t,["config"]);return u!=null&&s(n,["config"],zc(u,n)),n}function Wc(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],vt(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Jc(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],vt(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Kc(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);t!==void 0&&r!=null&&s(t,["_query","pageToken"],r);const u=o(e,["filter"]);return t!==void 0&&u!=null&&s(t,["_query","filter"],u),n}function Qc(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],Kc(n,t)),t}function Xc(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],vt(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Zc(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function jc(e){const t={},n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function ef(e){const t={},n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function tf(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Zc(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],jc(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],ef(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function nf(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>tf(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function rf(e){const t={},n=o(e,["citationSources"]);return n!=null&&s(t,["citations"],n),t}function of(e){const t={},n=o(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const i=o(e,["urlRetrievalStatus"]);return i!=null&&s(t,["urlRetrievalStatus"],i),t}function uf(e){const t={},n=o(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>of(r))),s(t,["urlMetadata"],i)}return t}function sf(e){const t={},n=o(e,["content"]);n!=null&&s(t,["content"],nf(n));const i=o(e,["citationMetadata"]);i!=null&&s(t,["citationMetadata"],rf(i));const r=o(e,["tokenCount"]);r!=null&&s(t,["tokenCount"],r);const u=o(e,["finishReason"]);u!=null&&s(t,["finishReason"],u);const a=o(e,["urlContextMetadata"]);a!=null&&s(t,["urlContextMetadata"],uf(a));const l=o(e,["avgLogprobs"]);l!=null&&s(t,["avgLogprobs"],l);const f=o(e,["groundingMetadata"]);f!=null&&s(t,["groundingMetadata"],f);const c=o(e,["index"]);c!=null&&s(t,["index"],c);const h=o(e,["logprobsResult"]);h!=null&&s(t,["logprobsResult"],h);const p=o(e,["safetyRatings"]);return p!=null&&s(t,["safetyRatings"],p),t}function af(e){const t={},n=o(e,["sdkHttpResponse"]);n!=null&&s(t,["sdkHttpResponse"],n);const i=o(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>sf(f))),s(t,["candidates"],l)}const r=o(e,["modelVersion"]);r!=null&&s(t,["modelVersion"],r);const u=o(e,["promptFeedback"]);u!=null&&s(t,["promptFeedback"],u);const a=o(e,["usageMetadata"]);return a!=null&&s(t,["usageMetadata"],a),t}function As(e){const t={},n=o(e,["details"]);n!=null&&s(t,["details"],n);const i=o(e,["code"]);i!=null&&s(t,["code"],i);const r=o(e,["message"]);return r!=null&&s(t,["message"],r),t}function lf(e){const t={},n=o(e,["response"]);n!=null&&s(t,["response"],af(n));const i=o(e,["error"]);return i!=null&&s(t,["error"],As(i)),t}function cf(e){const t={},n=o(e,["responsesFile"]);n!=null&&s(t,["fileName"],n);const i=o(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>lf(u))),s(t,["inlinedResponses"],r)}return t}function Ni(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["metadata","displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["metadata","state"]);r!=null&&s(t,["state"],Cs(r));const u=o(e,["metadata","createTime"]);u!=null&&s(t,["createTime"],u);const a=o(e,["metadata","endTime"]);a!=null&&s(t,["endTime"],a);const l=o(e,["metadata","updateTime"]);l!=null&&s(t,["updateTime"],l);const f=o(e,["metadata","model"]);f!=null&&s(t,["model"],f);const c=o(e,["metadata","output"]);return c!=null&&s(t,["dest"],cf(c)),t}function ff(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Ni(u))),s(t,["batchJobs"],r)}return t}function df(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["done"]);i!=null&&s(t,["done"],i);const r=o(e,["error"]);return r!=null&&s(t,["error"],As(r)),t}function Ss(e){const t={},n=o(e,["details"]);n!=null&&s(t,["details"],n);const i=o(e,["code"]);i!=null&&s(t,["code"],i);const r=o(e,["message"]);return r!=null&&s(t,["message"],r),t}function hf(e){const t={},n=o(e,["instancesFormat"]);n!=null&&s(t,["format"],n);const i=o(e,["gcsSource","uris"]);i!=null&&s(t,["gcsUri"],i);const r=o(e,["bigquerySource","inputUri"]);return r!=null&&s(t,["bigqueryUri"],r),t}function pf(e){const t={},n=o(e,["predictionsFormat"]);n!=null&&s(t,["format"],n);const i=o(e,["gcsDestination","outputUriPrefix"]);i!=null&&s(t,["gcsUri"],i);const r=o(e,["bigqueryDestination","outputUri"]);return r!=null&&s(t,["bigqueryUri"],r),t}function Ri(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["state"]);r!=null&&s(t,["state"],Cs(r));const u=o(e,["error"]);u!=null&&s(t,["error"],Ss(u));const a=o(e,["createTime"]);a!=null&&s(t,["createTime"],a);const l=o(e,["startTime"]);l!=null&&s(t,["startTime"],l);const f=o(e,["endTime"]);f!=null&&s(t,["endTime"],f);const c=o(e,["updateTime"]);c!=null&&s(t,["updateTime"],c);const h=o(e,["model"]);h!=null&&s(t,["model"],h);const p=o(e,["inputConfig"]);p!=null&&s(t,["src"],hf(p));const m=o(e,["outputConfig"]);return m!=null&&s(t,["dest"],pf(m)),t}function mf(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Ri(u))),s(t,["batchJobs"],r)}return t}function gf(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["done"]);i!=null&&s(t,["done"],i);const r=o(e,["error"]);return r!=null&&s(t,["error"],Ss(r)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ct;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ct||(ct={}));class hn{constructor(t,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,r)}init(t,n,i){var r,u;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};i?typeof i=="object"?a=Object.assign({},i):a=i:a={config:{}},a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(u=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf extends dt{constructor(t){super(),this.apiClient=t,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new hn(ct.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=$c(this.apiClient,t);return l=J("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>Ri(h))}else{const c=Fc(this.apiClient,t);return l=J("{model}:batchGenerateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Ni(h))}}async get(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Wc(this.apiClient,t);return l=J("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>Ri(h))}else{const c=Uc(this.apiClient,t);return l=J("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Ni(h))}}async cancel(t){var n,i,r,u;let a="",l={};if(this.apiClient.isVertexAI()){const f=Jc(this.apiClient,t);a=J("batchPredictionJobs/{name}:cancel",f._url),l=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=Bc(this.apiClient,t);a=J("batches/{name}:cancel",f._url),l=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Qc(t);return l=J("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=mf(h),m=new Ro;return Object.assign(m,p),m})}else{const c=Vc(t);return l=J("batches",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=ff(h),m=new Ro;return Object.assign(m,p),m})}}async delete(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Xc(this.apiClient,t);return l=J("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>gf(h))}else{const c=qc(this.apiClient,t);return l=J("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>df(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ef(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function Cf(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function yf(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function _f(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Ef(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],Cf(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],yf(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function Po(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>_f(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function Af(e){const t={},n=o(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=o(e,["description"]);i!=null&&s(t,["description"],i);const r=o(e,["name"]);r!=null&&s(t,["name"],r);const u=o(e,["parameters"]);u!=null&&s(t,["parameters"],u);const a=o(e,["parametersJsonSchema"]);a!=null&&s(t,["parametersJsonSchema"],a);const l=o(e,["response"]);l!=null&&s(t,["response"],l);const f=o(e,["responseJsonSchema"]);return f!=null&&s(t,["responseJsonSchema"],f),t}function Sf(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function If(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Sf(n)),t}function bf(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function xf(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],bf(n)),t}function Nf(){return{}}function Rf(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Af(c))),s(t,["functionDeclarations"],f)}if(o(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],If(i));const r=o(e,["googleSearchRetrieval"]);if(r!=null&&s(t,["googleSearchRetrieval"],xf(r)),o(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(e,["urlContext"])!=null&&s(t,["urlContext"],Nf());const a=o(e,["codeExecution"]);a!=null&&s(t,["codeExecution"],a);const l=o(e,["computerUse"]);return l!=null&&s(t,["computerUse"],l),t}function kf(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function Mf(e){const t={},n=o(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=o(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function Df(e){const t={},n=o(e,["latLng"]);n!=null&&s(t,["latLng"],Mf(n));const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function Pf(e){const t={},n=o(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],kf(n));const i=o(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],Df(i)),t}function vf(e,t){const n={},i=o(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const r=o(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const u=o(e,["displayName"]);t!==void 0&&u!=null&&s(t,["displayName"],u);const a=o(e,["contents"]);if(t!==void 0&&a!=null){let h=Ue(a);Array.isArray(h)&&(h=h.map(p=>Po(p))),s(t,["contents"],h)}const l=o(e,["systemInstruction"]);t!==void 0&&l!=null&&s(t,["systemInstruction"],Po(Ae(l)));const f=o(e,["tools"]);if(t!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>Rf(p))),s(t,["tools"],h)}const c=o(e,["toolConfig"]);if(t!==void 0&&c!=null&&s(t,["toolConfig"],Pf(c)),o(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Lf(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["model"],as(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],vf(r,n)),n}function wf(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],Qe(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Of(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],Qe(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Ff(e,t){const n={},i=o(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const r=o(e,["expireTime"]);return t!==void 0&&r!=null&&s(t,["expireTime"],r),n}function Uf(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],Qe(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],Ff(r,n)),n}function Bf(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);return t!==void 0&&r!=null&&s(t,["_query","pageToken"],r),n}function Hf(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],Bf(n,t)),t}function Vf(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function qf(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["data"]);i!=null&&s(t,["data"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function Gf(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function Yf(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Vf(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],qf(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],Gf(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function vo(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>Yf(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function zf(e){const t={};if(o(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=o(e,["description"]);n!=null&&s(t,["description"],n);const i=o(e,["name"]);i!=null&&s(t,["name"],i);const r=o(e,["parameters"]);r!=null&&s(t,["parameters"],r);const u=o(e,["parametersJsonSchema"]);u!=null&&s(t,["parametersJsonSchema"],u);const a=o(e,["response"]);a!=null&&s(t,["response"],a);const l=o(e,["responseJsonSchema"]);return l!=null&&s(t,["responseJsonSchema"],l),t}function $f(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Wf(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],$f(n)),t}function Jf(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Kf(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Jf(n)),t}function Qf(){return{}}function Xf(e){const t={},n=o(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function Zf(e){const t={},n=o(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Xf(n));const i=o(e,["authType"]);i!=null&&s(t,["authType"],i);const r=o(e,["googleServiceAccountConfig"]);r!=null&&s(t,["googleServiceAccountConfig"],r);const u=o(e,["httpBasicAuthConfig"]);u!=null&&s(t,["httpBasicAuthConfig"],u);const a=o(e,["oauthConfig"]);a!=null&&s(t,["oauthConfig"],a);const l=o(e,["oidcConfig"]);return l!=null&&s(t,["oidcConfig"],l),t}function jf(e){const t={},n=o(e,["authConfig"]);return n!=null&&s(t,["authConfig"],Zf(n)),t}function ed(){return{}}function td(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>zf(m))),s(t,["functionDeclarations"],p)}const i=o(e,["retrieval"]);i!=null&&s(t,["retrieval"],i);const r=o(e,["googleSearch"]);r!=null&&s(t,["googleSearch"],Wf(r));const u=o(e,["googleSearchRetrieval"]);u!=null&&s(t,["googleSearchRetrieval"],Kf(u)),o(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],Qf());const l=o(e,["googleMaps"]);l!=null&&s(t,["googleMaps"],jf(l)),o(e,["urlContext"])!=null&&s(t,["urlContext"],ed());const c=o(e,["codeExecution"]);c!=null&&s(t,["codeExecution"],c);const h=o(e,["computerUse"]);return h!=null&&s(t,["computerUse"],h),t}function nd(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function id(e){const t={},n=o(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=o(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function rd(e){const t={},n=o(e,["latLng"]);n!=null&&s(t,["latLng"],id(n));const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function od(e){const t={},n=o(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],nd(n));const i=o(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],rd(i)),t}function ud(e,t){const n={},i=o(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const r=o(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const u=o(e,["displayName"]);t!==void 0&&u!=null&&s(t,["displayName"],u);const a=o(e,["contents"]);if(t!==void 0&&a!=null){let p=Ue(a);Array.isArray(p)&&(p=p.map(m=>vo(m))),s(t,["contents"],p)}const l=o(e,["systemInstruction"]);t!==void 0&&l!=null&&s(t,["systemInstruction"],vo(Ae(l)));const f=o(e,["tools"]);if(t!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>td(m))),s(t,["tools"],p)}const c=o(e,["toolConfig"]);t!==void 0&&c!=null&&s(t,["toolConfig"],od(c));const h=o(e,["kmsKeyName"]);return t!==void 0&&h!=null&&s(t,["encryption_spec","kmsKeyName"],h),n}function sd(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["model"],as(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],ud(r,n)),n}function ad(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],Qe(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function ld(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],Qe(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function cd(e,t){const n={},i=o(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const r=o(e,["expireTime"]);return t!==void 0&&r!=null&&s(t,["expireTime"],r),n}function fd(e,t){const n={},i=o(t,["name"]);i!=null&&s(n,["_url","name"],Qe(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],cd(r,n)),n}function dd(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);return t!==void 0&&r!=null&&s(t,["_query","pageToken"],r),n}function hd(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],dd(n,t)),t}function Rn(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["model"]);r!=null&&s(t,["model"],r);const u=o(e,["createTime"]);u!=null&&s(t,["createTime"],u);const a=o(e,["updateTime"]);a!=null&&s(t,["updateTime"],a);const l=o(e,["expireTime"]);l!=null&&s(t,["expireTime"],l);const f=o(e,["usageMetadata"]);return f!=null&&s(t,["usageMetadata"],f),t}function pd(){return{}}function md(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Rn(u))),s(t,["cachedContents"],r)}return t}function kn(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["model"]);r!=null&&s(t,["model"],r);const u=o(e,["createTime"]);u!=null&&s(t,["createTime"],u);const a=o(e,["updateTime"]);a!=null&&s(t,["updateTime"],a);const l=o(e,["expireTime"]);l!=null&&s(t,["expireTime"],l);const f=o(e,["usageMetadata"]);return f!=null&&s(t,["usageMetadata"],f),t}function gd(){return{}}function Td(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>kn(u))),s(t,["cachedContents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ed extends dt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new hn(ct.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=sd(this.apiClient,t);return l=J("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>kn(h))}else{const c=Lf(this.apiClient,t);return l=J("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Rn(h))}}async get(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=ad(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>kn(h))}else{const c=wf(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Rn(h))}}async delete(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=ld(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(()=>{const h=gd(),p=new xo;return Object.assign(p,h),p})}else{const c=Of(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(()=>{const h=pd(),p=new xo;return Object.assign(p,h),p})}}async update(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=fd(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>kn(h))}else{const c=Uf(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Rn(h))}}async listInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=hd(t);return l=J("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=Td(h),m=new No;return Object.assign(m,p),m})}else{const c=Hf(t);return l=J("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=md(h),m=new No;return Object.assign(m,p),m})}}}function Lo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(e){return this instanceof de?(this.v=e,this):new de(e)}function bt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(E){return Promise.resolve(E).then(g,p)}}function l(g,E){i[g]&&(r[g]=function(A){return new Promise(function(R,I){u.push([g,A,R,I])>1||f(g,A)})},E&&(r[g]=E(r[g])))}function f(g,E){try{c(i[g](E))}catch(A){m(u[0][3],A)}}function c(g){g.value instanceof de?Promise.resolve(g.value.v).then(h,p):m(u[0][2],g)}function h(g){f("next",g)}function p(g){f("throw",g)}function m(g,E){g(E),u.shift(),u.length&&f(u[0][0],u[0][1])}}function jt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Lo=="function"?Lo(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(u){n[u]=e[u]&&function(a){return new Promise(function(l,f){a=e[u](a),r(l,f,a.done,a.value)})}}function r(u,a,l,f){Promise.resolve(f).then(function(c){u({value:c,done:l})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cd(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Is(n)}function Is(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function yd(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function wo(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const r=[];let u=!0;for(;i<n&&e[i].role==="model";)r.push(e[i]),u&&!Is(e[i])&&(u=!1),i++;u?t.push(...r):t.pop()}return t}class _d{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Ad(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Ad{constructor(t,n,i,r={},u=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),yd(u)}async sendMessage(t){var n;await this.sendPromise;const i=Ae(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var u,a,l;const f=await r,c=(a=(u=f.candidates)===null||u===void 0?void 0:u[0])===null||a===void 0?void 0:a.content,h=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(l=h.slice(p))!==null&&l!==void 0?l:[]);const g=c?[c]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const i=Ae(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,i)}getHistory(t=!1){const n=t?wo(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,r;return bt(this,arguments,function*(){var a,l,f,c;const h=[];try{for(var p=!0,m=jt(t),g;g=yield de(m.next()),a=g.done,!a;p=!0){c=g.value,p=!1;const E=c;if(Cd(E)){const A=(r=(i=E.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;A!==void 0&&h.push(A)}yield yield de(E)}}catch(E){l={error:E}}finally{try{!p&&!a&&(f=m.return)&&(yield de(f.call(m)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(t,n,i){let r=[];n.length>0&&n.every(u=>u.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...wo(i)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qn extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,qn.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sd(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);return t!==void 0&&r!=null&&s(t,["_query","pageToken"],r),n}function Id(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],Sd(n,t)),t}function bd(e){const t={},n=o(e,["details"]);n!=null&&s(t,["details"],n);const i=o(e,["message"]);i!=null&&s(t,["message"],i);const r=o(e,["code"]);return r!=null&&s(t,["code"],r),t}function xd(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["mimeType"]);r!=null&&s(t,["mimeType"],r);const u=o(e,["sizeBytes"]);u!=null&&s(t,["sizeBytes"],u);const a=o(e,["createTime"]);a!=null&&s(t,["createTime"],a);const l=o(e,["expirationTime"]);l!=null&&s(t,["expirationTime"],l);const f=o(e,["updateTime"]);f!=null&&s(t,["updateTime"],f);const c=o(e,["sha256Hash"]);c!=null&&s(t,["sha256Hash"],c);const h=o(e,["uri"]);h!=null&&s(t,["uri"],h);const p=o(e,["downloadUri"]);p!=null&&s(t,["downloadUri"],p);const m=o(e,["state"]);m!=null&&s(t,["state"],m);const g=o(e,["source"]);g!=null&&s(t,["source"],g);const E=o(e,["videoMetadata"]);E!=null&&s(t,["videoMetadata"],E);const A=o(e,["error"]);return A!=null&&s(t,["error"],bd(A)),t}function Nd(e){const t={},n=o(e,["file"]);n!=null&&s(t,["file"],xd(n));const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function Rd(e){const t={},n=o(e,["name"]);n!=null&&s(t,["_url","file"],ms(n));const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function kd(e){const t={},n=o(e,["name"]);n!=null&&s(t,["_url","file"],ms(n));const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function Md(e){const t={},n=o(e,["details"]);n!=null&&s(t,["details"],n);const i=o(e,["message"]);i!=null&&s(t,["message"],i);const r=o(e,["code"]);return r!=null&&s(t,["code"],r),t}function ki(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["mimeType"]);r!=null&&s(t,["mimeType"],r);const u=o(e,["sizeBytes"]);u!=null&&s(t,["sizeBytes"],u);const a=o(e,["createTime"]);a!=null&&s(t,["createTime"],a);const l=o(e,["expirationTime"]);l!=null&&s(t,["expirationTime"],l);const f=o(e,["updateTime"]);f!=null&&s(t,["updateTime"],f);const c=o(e,["sha256Hash"]);c!=null&&s(t,["sha256Hash"],c);const h=o(e,["uri"]);h!=null&&s(t,["uri"],h);const p=o(e,["downloadUri"]);p!=null&&s(t,["downloadUri"],p);const m=o(e,["state"]);m!=null&&s(t,["state"],m);const g=o(e,["source"]);g!=null&&s(t,["source"],g);const E=o(e,["videoMetadata"]);E!=null&&s(t,["videoMetadata"],E);const A=o(e,["error"]);return A!=null&&s(t,["error"],Md(A)),t}function Dd(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>ki(u))),s(t,["files"],r)}return t}function Pd(e){const t={},n=o(e,["sdkHttpResponse"]);return n!=null&&s(t,["sdkHttpResponse"],n),t}function vd(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ld extends dt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new hn(ct.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>ki(n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Id(t);return u=J("files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const c=Dd(f),h=new Xl;return Object.assign(h,c),h})}}async createInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Nd(t);return u=J("upload/v1beta/files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const c=Pd(f),h=new Zl;return Object.assign(h,c),h})}}async get(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Rd(t);return u=J("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>ki(f))}}async delete(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kd(t);return u=J("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(()=>{const f=vd(),c=new jl;return Object.assign(c,f),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wd(e){const t={},n=o(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function bs(e){const t={},n=o(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],wd(n)),t}function Od(e){const t={},n=o(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=o(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],bs(i)),t}function Fd(e){const t={},n=o(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Od(r))),s(t,["speakerVoiceConfigs"],i)}return t}function Ud(e){const t={},n=o(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],bs(n));const i=o(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],Fd(i));const r=o(e,["languageCode"]);return r!=null&&s(t,["languageCode"],r),t}function Bd(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function Hd(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Vd(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function qd(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Bd(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],Hd(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],Vd(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function Gd(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>qd(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function Yd(e){const t={},n=o(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=o(e,["description"]);i!=null&&s(t,["description"],i);const r=o(e,["name"]);r!=null&&s(t,["name"],r);const u=o(e,["parameters"]);u!=null&&s(t,["parameters"],u);const a=o(e,["parametersJsonSchema"]);a!=null&&s(t,["parametersJsonSchema"],a);const l=o(e,["response"]);l!=null&&s(t,["response"],l);const f=o(e,["responseJsonSchema"]);return f!=null&&s(t,["responseJsonSchema"],f),t}function zd(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function $d(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],zd(n)),t}function Wd(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Jd(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Wd(n)),t}function Kd(){return{}}function Qd(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Yd(c))),s(t,["functionDeclarations"],f)}if(o(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],$d(i));const r=o(e,["googleSearchRetrieval"]);if(r!=null&&s(t,["googleSearchRetrieval"],Jd(r)),o(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(e,["urlContext"])!=null&&s(t,["urlContext"],Kd());const a=o(e,["codeExecution"]);a!=null&&s(t,["codeExecution"],a);const l=o(e,["computerUse"]);return l!=null&&s(t,["computerUse"],l),t}function Xd(e){const t={},n=o(e,["handle"]);if(n!=null&&s(t,["handle"],n),o(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Oo(){return{}}function Zd(e){const t={},n=o(e,["disabled"]);n!=null&&s(t,["disabled"],n);const i=o(e,["startOfSpeechSensitivity"]);i!=null&&s(t,["startOfSpeechSensitivity"],i);const r=o(e,["endOfSpeechSensitivity"]);r!=null&&s(t,["endOfSpeechSensitivity"],r);const u=o(e,["prefixPaddingMs"]);u!=null&&s(t,["prefixPaddingMs"],u);const a=o(e,["silenceDurationMs"]);return a!=null&&s(t,["silenceDurationMs"],a),t}function jd(e){const t={},n=o(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],Zd(n));const i=o(e,["activityHandling"]);i!=null&&s(t,["activityHandling"],i);const r=o(e,["turnCoverage"]);return r!=null&&s(t,["turnCoverage"],r),t}function eh(e){const t={},n=o(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function th(e){const t={},n=o(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const i=o(e,["slidingWindow"]);return i!=null&&s(t,["slidingWindow"],eh(i)),t}function nh(e){const t={},n=o(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function ih(e,t){const n={},i=o(e,["generationConfig"]);t!==void 0&&i!=null&&s(t,["setup","generationConfig"],i);const r=o(e,["responseModalities"]);t!==void 0&&r!=null&&s(t,["setup","generationConfig","responseModalities"],r);const u=o(e,["temperature"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","temperature"],u);const a=o(e,["topP"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","topP"],a);const l=o(e,["topK"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","topK"],l);const f=o(e,["maxOutputTokens"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","maxOutputTokens"],f);const c=o(e,["mediaResolution"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","mediaResolution"],c);const h=o(e,["seed"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","seed"],h);const p=o(e,["speechConfig"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","speechConfig"],Ud(er(p)));const m=o(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],Gd(Ae(g)));const E=o(e,["tools"]);if(t!==void 0&&E!=null){let w=Pt(E);Array.isArray(w)&&(w=w.map(N=>Qd(Dt(N)))),s(t,["setup","tools"],w)}const A=o(e,["sessionResumption"]);t!==void 0&&A!=null&&s(t,["setup","sessionResumption"],Xd(A));const R=o(e,["inputAudioTranscription"]);t!==void 0&&R!=null&&s(t,["setup","inputAudioTranscription"],Oo());const I=o(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&s(t,["setup","outputAudioTranscription"],Oo());const M=o(e,["realtimeInputConfig"]);t!==void 0&&M!=null&&s(t,["setup","realtimeInputConfig"],jd(M));const k=o(e,["contextWindowCompression"]);t!==void 0&&k!=null&&s(t,["setup","contextWindowCompression"],th(k));const O=o(e,["proactivity"]);return t!==void 0&&O!=null&&s(t,["setup","proactivity"],nh(O)),n}function rh(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["setup","model"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],ih(r,n)),n}function oh(){return{}}function uh(){return{}}function sh(e){const t={},n=o(e,["media"]);n!=null&&s(t,["mediaChunks"],ls(n));const i=o(e,["audio"]);i!=null&&s(t,["audio"],fs(i));const r=o(e,["audioStreamEnd"]);r!=null&&s(t,["audioStreamEnd"],r);const u=o(e,["video"]);u!=null&&s(t,["video"],cs(u));const a=o(e,["text"]);return a!=null&&s(t,["text"],a),o(e,["activityStart"])!=null&&s(t,["activityStart"],oh()),o(e,["activityEnd"])!=null&&s(t,["activityEnd"],uh()),t}function xs(e){const t={},n=o(e,["text"]);n!=null&&s(t,["text"],n);const i=o(e,["weight"]);return i!=null&&s(t,["weight"],i),t}function ah(e){const t={},n=o(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>xs(r))),s(t,["weightedPrompts"],i)}return t}function Ns(e){const t={},n=o(e,["temperature"]);n!=null&&s(t,["temperature"],n);const i=o(e,["topK"]);i!=null&&s(t,["topK"],i);const r=o(e,["seed"]);r!=null&&s(t,["seed"],r);const u=o(e,["guidance"]);u!=null&&s(t,["guidance"],u);const a=o(e,["bpm"]);a!=null&&s(t,["bpm"],a);const l=o(e,["density"]);l!=null&&s(t,["density"],l);const f=o(e,["brightness"]);f!=null&&s(t,["brightness"],f);const c=o(e,["scale"]);c!=null&&s(t,["scale"],c);const h=o(e,["muteBass"]);h!=null&&s(t,["muteBass"],h);const p=o(e,["muteDrums"]);p!=null&&s(t,["muteDrums"],p);const m=o(e,["onlyBassAndDrums"]);return m!=null&&s(t,["onlyBassAndDrums"],m),t}function lh(e){const t={},n=o(e,["musicGenerationConfig"]);return n!=null&&s(t,["musicGenerationConfig"],Ns(n)),t}function Rs(e){const t={},n=o(e,["model"]);return n!=null&&s(t,["model"],n),t}function ks(e){const t={},n=o(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>xs(r))),s(t,["weightedPrompts"],i)}return t}function Mi(e){const t={},n=o(e,["setup"]);n!=null&&s(t,["setup"],Rs(n));const i=o(e,["clientContent"]);i!=null&&s(t,["clientContent"],ks(i));const r=o(e,["musicGenerationConfig"]);r!=null&&s(t,["musicGenerationConfig"],Ns(r));const u=o(e,["playbackControl"]);return u!=null&&s(t,["playbackControl"],u),t}function ch(e){const t={},n=o(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function fh(e){const t={},n=o(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],ch(n)),t}function dh(e){const t={},n=o(e,["voiceConfig"]);if(n!=null&&s(t,["voiceConfig"],fh(n)),o(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function hh(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function ph(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["data"]);i!=null&&s(t,["data"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function mh(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function gh(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],hh(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],ph(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],mh(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function Th(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>gh(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function Eh(e){const t={};if(o(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=o(e,["description"]);n!=null&&s(t,["description"],n);const i=o(e,["name"]);i!=null&&s(t,["name"],i);const r=o(e,["parameters"]);r!=null&&s(t,["parameters"],r);const u=o(e,["parametersJsonSchema"]);u!=null&&s(t,["parametersJsonSchema"],u);const a=o(e,["response"]);a!=null&&s(t,["response"],a);const l=o(e,["responseJsonSchema"]);return l!=null&&s(t,["responseJsonSchema"],l),t}function Ch(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function yh(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Ch(n)),t}function _h(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Ah(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],_h(n)),t}function Sh(){return{}}function Ih(e){const t={},n=o(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function bh(e){const t={},n=o(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Ih(n));const i=o(e,["authType"]);i!=null&&s(t,["authType"],i);const r=o(e,["googleServiceAccountConfig"]);r!=null&&s(t,["googleServiceAccountConfig"],r);const u=o(e,["httpBasicAuthConfig"]);u!=null&&s(t,["httpBasicAuthConfig"],u);const a=o(e,["oauthConfig"]);a!=null&&s(t,["oauthConfig"],a);const l=o(e,["oidcConfig"]);return l!=null&&s(t,["oidcConfig"],l),t}function xh(e){const t={},n=o(e,["authConfig"]);return n!=null&&s(t,["authConfig"],bh(n)),t}function Nh(){return{}}function Rh(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Eh(m))),s(t,["functionDeclarations"],p)}const i=o(e,["retrieval"]);i!=null&&s(t,["retrieval"],i);const r=o(e,["googleSearch"]);r!=null&&s(t,["googleSearch"],yh(r));const u=o(e,["googleSearchRetrieval"]);u!=null&&s(t,["googleSearchRetrieval"],Ah(u)),o(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],Sh());const l=o(e,["googleMaps"]);l!=null&&s(t,["googleMaps"],xh(l)),o(e,["urlContext"])!=null&&s(t,["urlContext"],Nh());const c=o(e,["codeExecution"]);c!=null&&s(t,["codeExecution"],c);const h=o(e,["computerUse"]);return h!=null&&s(t,["computerUse"],h),t}function kh(e){const t={},n=o(e,["handle"]);n!=null&&s(t,["handle"],n);const i=o(e,["transparent"]);return i!=null&&s(t,["transparent"],i),t}function Fo(){return{}}function Mh(e){const t={},n=o(e,["disabled"]);n!=null&&s(t,["disabled"],n);const i=o(e,["startOfSpeechSensitivity"]);i!=null&&s(t,["startOfSpeechSensitivity"],i);const r=o(e,["endOfSpeechSensitivity"]);r!=null&&s(t,["endOfSpeechSensitivity"],r);const u=o(e,["prefixPaddingMs"]);u!=null&&s(t,["prefixPaddingMs"],u);const a=o(e,["silenceDurationMs"]);return a!=null&&s(t,["silenceDurationMs"],a),t}function Dh(e){const t={},n=o(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],Mh(n));const i=o(e,["activityHandling"]);i!=null&&s(t,["activityHandling"],i);const r=o(e,["turnCoverage"]);return r!=null&&s(t,["turnCoverage"],r),t}function Ph(e){const t={},n=o(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function vh(e){const t={},n=o(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const i=o(e,["slidingWindow"]);return i!=null&&s(t,["slidingWindow"],Ph(i)),t}function Lh(e){const t={},n=o(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function wh(e,t){const n={},i=o(e,["generationConfig"]);t!==void 0&&i!=null&&s(t,["setup","generationConfig"],i);const r=o(e,["responseModalities"]);t!==void 0&&r!=null&&s(t,["setup","generationConfig","responseModalities"],r);const u=o(e,["temperature"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","temperature"],u);const a=o(e,["topP"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","topP"],a);const l=o(e,["topK"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","topK"],l);const f=o(e,["maxOutputTokens"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","maxOutputTokens"],f);const c=o(e,["mediaResolution"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","mediaResolution"],c);const h=o(e,["seed"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","seed"],h);const p=o(e,["speechConfig"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","speechConfig"],dh(er(p)));const m=o(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],Th(Ae(g)));const E=o(e,["tools"]);if(t!==void 0&&E!=null){let w=Pt(E);Array.isArray(w)&&(w=w.map(N=>Rh(Dt(N)))),s(t,["setup","tools"],w)}const A=o(e,["sessionResumption"]);t!==void 0&&A!=null&&s(t,["setup","sessionResumption"],kh(A));const R=o(e,["inputAudioTranscription"]);t!==void 0&&R!=null&&s(t,["setup","inputAudioTranscription"],Fo());const I=o(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&s(t,["setup","outputAudioTranscription"],Fo());const M=o(e,["realtimeInputConfig"]);t!==void 0&&M!=null&&s(t,["setup","realtimeInputConfig"],Dh(M));const k=o(e,["contextWindowCompression"]);t!==void 0&&k!=null&&s(t,["setup","contextWindowCompression"],vh(k));const O=o(e,["proactivity"]);return t!==void 0&&O!=null&&s(t,["setup","proactivity"],Lh(O)),n}function Oh(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["setup","model"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],wh(r,n)),n}function Fh(){return{}}function Uh(){return{}}function Bh(e){const t={},n=o(e,["media"]);n!=null&&s(t,["mediaChunks"],ls(n));const i=o(e,["audio"]);i!=null&&s(t,["audio"],fs(i));const r=o(e,["audioStreamEnd"]);r!=null&&s(t,["audioStreamEnd"],r);const u=o(e,["video"]);u!=null&&s(t,["video"],cs(u));const a=o(e,["text"]);return a!=null&&s(t,["text"],a),o(e,["activityStart"])!=null&&s(t,["activityStart"],Fh()),o(e,["activityEnd"])!=null&&s(t,["activityEnd"],Uh()),t}function Hh(){return{}}function Vh(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function qh(e){const t={},n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Gh(e){const t={},n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Yh(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Vh(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],qh(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],Gh(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function zh(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>Yh(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function Uo(e){const t={},n=o(e,["text"]);n!=null&&s(t,["text"],n);const i=o(e,["finished"]);return i!=null&&s(t,["finished"],i),t}function $h(e){const t={},n=o(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const i=o(e,["urlRetrievalStatus"]);return i!=null&&s(t,["urlRetrievalStatus"],i),t}function Wh(e){const t={},n=o(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$h(r))),s(t,["urlMetadata"],i)}return t}function Jh(e){const t={},n=o(e,["modelTurn"]);n!=null&&s(t,["modelTurn"],zh(n));const i=o(e,["turnComplete"]);i!=null&&s(t,["turnComplete"],i);const r=o(e,["interrupted"]);r!=null&&s(t,["interrupted"],r);const u=o(e,["groundingMetadata"]);u!=null&&s(t,["groundingMetadata"],u);const a=o(e,["generationComplete"]);a!=null&&s(t,["generationComplete"],a);const l=o(e,["inputTranscription"]);l!=null&&s(t,["inputTranscription"],Uo(l));const f=o(e,["outputTranscription"]);f!=null&&s(t,["outputTranscription"],Uo(f));const c=o(e,["urlContextMetadata"]);return c!=null&&s(t,["urlContextMetadata"],Wh(c)),t}function Kh(e){const t={},n=o(e,["id"]);n!=null&&s(t,["id"],n);const i=o(e,["args"]);i!=null&&s(t,["args"],i);const r=o(e,["name"]);return r!=null&&s(t,["name"],r),t}function Qh(e){const t={},n=o(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Kh(r))),s(t,["functionCalls"],i)}return t}function Xh(e){const t={},n=o(e,["ids"]);return n!=null&&s(t,["ids"],n),t}function _n(e){const t={},n=o(e,["modality"]);n!=null&&s(t,["modality"],n);const i=o(e,["tokenCount"]);return i!=null&&s(t,["tokenCount"],i),t}function Zh(e){const t={},n=o(e,["promptTokenCount"]);n!=null&&s(t,["promptTokenCount"],n);const i=o(e,["cachedContentTokenCount"]);i!=null&&s(t,["cachedContentTokenCount"],i);const r=o(e,["responseTokenCount"]);r!=null&&s(t,["responseTokenCount"],r);const u=o(e,["toolUsePromptTokenCount"]);u!=null&&s(t,["toolUsePromptTokenCount"],u);const a=o(e,["thoughtsTokenCount"]);a!=null&&s(t,["thoughtsTokenCount"],a);const l=o(e,["totalTokenCount"]);l!=null&&s(t,["totalTokenCount"],l);const f=o(e,["promptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>_n(g))),s(t,["promptTokensDetails"],m)}const c=o(e,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>_n(g))),s(t,["cacheTokensDetails"],m)}const h=o(e,["responseTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>_n(g))),s(t,["responseTokensDetails"],m)}const p=o(e,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>_n(g))),s(t,["toolUsePromptTokensDetails"],m)}return t}function jh(e){const t={},n=o(e,["timeLeft"]);return n!=null&&s(t,["timeLeft"],n),t}function ep(e){const t={},n=o(e,["newHandle"]);n!=null&&s(t,["newHandle"],n);const i=o(e,["resumable"]);i!=null&&s(t,["resumable"],i);const r=o(e,["lastConsumedClientMessageIndex"]);return r!=null&&s(t,["lastConsumedClientMessageIndex"],r),t}function tp(e){const t={};o(e,["setupComplete"])!=null&&s(t,["setupComplete"],Hh());const i=o(e,["serverContent"]);i!=null&&s(t,["serverContent"],Jh(i));const r=o(e,["toolCall"]);r!=null&&s(t,["toolCall"],Qh(r));const u=o(e,["toolCallCancellation"]);u!=null&&s(t,["toolCallCancellation"],Xh(u));const a=o(e,["usageMetadata"]);a!=null&&s(t,["usageMetadata"],Zh(a));const l=o(e,["goAway"]);l!=null&&s(t,["goAway"],jh(l));const f=o(e,["sessionResumptionUpdate"]);return f!=null&&s(t,["sessionResumptionUpdate"],ep(f)),t}function np(){return{}}function ip(e){const t={},n=o(e,["text"]);n!=null&&s(t,["text"],n);const i=o(e,["weight"]);return i!=null&&s(t,["weight"],i),t}function rp(e){const t={},n=o(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ip(r))),s(t,["weightedPrompts"],i)}return t}function op(e){const t={},n=o(e,["temperature"]);n!=null&&s(t,["temperature"],n);const i=o(e,["topK"]);i!=null&&s(t,["topK"],i);const r=o(e,["seed"]);r!=null&&s(t,["seed"],r);const u=o(e,["guidance"]);u!=null&&s(t,["guidance"],u);const a=o(e,["bpm"]);a!=null&&s(t,["bpm"],a);const l=o(e,["density"]);l!=null&&s(t,["density"],l);const f=o(e,["brightness"]);f!=null&&s(t,["brightness"],f);const c=o(e,["scale"]);c!=null&&s(t,["scale"],c);const h=o(e,["muteBass"]);h!=null&&s(t,["muteBass"],h);const p=o(e,["muteDrums"]);p!=null&&s(t,["muteDrums"],p);const m=o(e,["onlyBassAndDrums"]);return m!=null&&s(t,["onlyBassAndDrums"],m),t}function up(e){const t={},n=o(e,["clientContent"]);n!=null&&s(t,["clientContent"],rp(n));const i=o(e,["musicGenerationConfig"]);return i!=null&&s(t,["musicGenerationConfig"],op(i)),t}function sp(e){const t={},n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);i!=null&&s(t,["mimeType"],i);const r=o(e,["sourceMetadata"]);return r!=null&&s(t,["sourceMetadata"],up(r)),t}function ap(e){const t={},n=o(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sp(r))),s(t,["audioChunks"],i)}return t}function lp(e){const t={},n=o(e,["text"]);n!=null&&s(t,["text"],n);const i=o(e,["filteredReason"]);return i!=null&&s(t,["filteredReason"],i),t}function cp(e){const t={};o(e,["setupComplete"])!=null&&s(t,["setupComplete"],np());const i=o(e,["serverContent"]);i!=null&&s(t,["serverContent"],ap(i));const r=o(e,["filteredPrompt"]);return r!=null&&s(t,["filteredPrompt"],lp(r)),t}function fp(e){const t={},n=o(e,["sessionId"]);return n!=null&&s(t,["sessionId"],n),t}function dp(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function hp(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["data"]);i!=null&&s(t,["data"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function pp(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function mp(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],dp(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],hp(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],pp(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function gp(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>mp(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function Bo(e){const t={},n=o(e,["text"]);n!=null&&s(t,["text"],n);const i=o(e,["finished"]);return i!=null&&s(t,["finished"],i),t}function Tp(e){const t={},n=o(e,["modelTurn"]);n!=null&&s(t,["modelTurn"],gp(n));const i=o(e,["turnComplete"]);i!=null&&s(t,["turnComplete"],i);const r=o(e,["interrupted"]);r!=null&&s(t,["interrupted"],r);const u=o(e,["groundingMetadata"]);u!=null&&s(t,["groundingMetadata"],u);const a=o(e,["generationComplete"]);a!=null&&s(t,["generationComplete"],a);const l=o(e,["inputTranscription"]);l!=null&&s(t,["inputTranscription"],Bo(l));const f=o(e,["outputTranscription"]);return f!=null&&s(t,["outputTranscription"],Bo(f)),t}function Ep(e){const t={},n=o(e,["args"]);n!=null&&s(t,["args"],n);const i=o(e,["name"]);return i!=null&&s(t,["name"],i),t}function Cp(e){const t={},n=o(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ep(r))),s(t,["functionCalls"],i)}return t}function yp(e){const t={},n=o(e,["ids"]);return n!=null&&s(t,["ids"],n),t}function An(e){const t={},n=o(e,["modality"]);n!=null&&s(t,["modality"],n);const i=o(e,["tokenCount"]);return i!=null&&s(t,["tokenCount"],i),t}function _p(e){const t={},n=o(e,["promptTokenCount"]);n!=null&&s(t,["promptTokenCount"],n);const i=o(e,["cachedContentTokenCount"]);i!=null&&s(t,["cachedContentTokenCount"],i);const r=o(e,["candidatesTokenCount"]);r!=null&&s(t,["responseTokenCount"],r);const u=o(e,["toolUsePromptTokenCount"]);u!=null&&s(t,["toolUsePromptTokenCount"],u);const a=o(e,["thoughtsTokenCount"]);a!=null&&s(t,["thoughtsTokenCount"],a);const l=o(e,["totalTokenCount"]);l!=null&&s(t,["totalTokenCount"],l);const f=o(e,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(E=>An(E))),s(t,["promptTokensDetails"],g)}const c=o(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(E=>An(E))),s(t,["cacheTokensDetails"],g)}const h=o(e,["candidatesTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(E=>An(E))),s(t,["responseTokensDetails"],g)}const p=o(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(E=>An(E))),s(t,["toolUsePromptTokensDetails"],g)}const m=o(e,["trafficType"]);return m!=null&&s(t,["trafficType"],m),t}function Ap(e){const t={},n=o(e,["timeLeft"]);return n!=null&&s(t,["timeLeft"],n),t}function Sp(e){const t={},n=o(e,["newHandle"]);n!=null&&s(t,["newHandle"],n);const i=o(e,["resumable"]);i!=null&&s(t,["resumable"],i);const r=o(e,["lastConsumedClientMessageIndex"]);return r!=null&&s(t,["lastConsumedClientMessageIndex"],r),t}function Ip(e){const t={},n=o(e,["setupComplete"]);n!=null&&s(t,["setupComplete"],fp(n));const i=o(e,["serverContent"]);i!=null&&s(t,["serverContent"],Tp(i));const r=o(e,["toolCall"]);r!=null&&s(t,["toolCall"],Cp(r));const u=o(e,["toolCallCancellation"]);u!=null&&s(t,["toolCallCancellation"],yp(u));const a=o(e,["usageMetadata"]);a!=null&&s(t,["usageMetadata"],_p(a));const l=o(e,["goAway"]);l!=null&&s(t,["goAway"],Ap(l));const f=o(e,["sessionResumptionUpdate"]);return f!=null&&s(t,["sessionResumptionUpdate"],Sp(f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bp(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function xp(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Np(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Rp(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],bp(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],xp(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],Np(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function Gn(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>Rp(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function kp(e){const t={},n=o(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const i=o(e,["default"]);i!=null&&s(t,["default"],i);const r=o(e,["description"]);r!=null&&s(t,["description"],r);const u=o(e,["enum"]);u!=null&&s(t,["enum"],u);const a=o(e,["example"]);a!=null&&s(t,["example"],a);const l=o(e,["format"]);l!=null&&s(t,["format"],l);const f=o(e,["items"]);f!=null&&s(t,["items"],f);const c=o(e,["maxItems"]);c!=null&&s(t,["maxItems"],c);const h=o(e,["maxLength"]);h!=null&&s(t,["maxLength"],h);const p=o(e,["maxProperties"]);p!=null&&s(t,["maxProperties"],p);const m=o(e,["maximum"]);m!=null&&s(t,["maximum"],m);const g=o(e,["minItems"]);g!=null&&s(t,["minItems"],g);const E=o(e,["minLength"]);E!=null&&s(t,["minLength"],E);const A=o(e,["minProperties"]);A!=null&&s(t,["minProperties"],A);const R=o(e,["minimum"]);R!=null&&s(t,["minimum"],R);const I=o(e,["nullable"]);I!=null&&s(t,["nullable"],I);const M=o(e,["pattern"]);M!=null&&s(t,["pattern"],M);const k=o(e,["properties"]);k!=null&&s(t,["properties"],k);const O=o(e,["propertyOrdering"]);O!=null&&s(t,["propertyOrdering"],O);const w=o(e,["required"]);w!=null&&s(t,["required"],w);const N=o(e,["title"]);N!=null&&s(t,["title"],N);const q=o(e,["type"]);return q!=null&&s(t,["type"],q),t}function Mp(e){const t={};if(o(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=o(e,["category"]);n!=null&&s(t,["category"],n);const i=o(e,["threshold"]);return i!=null&&s(t,["threshold"],i),t}function Dp(e){const t={},n=o(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=o(e,["description"]);i!=null&&s(t,["description"],i);const r=o(e,["name"]);r!=null&&s(t,["name"],r);const u=o(e,["parameters"]);u!=null&&s(t,["parameters"],u);const a=o(e,["parametersJsonSchema"]);a!=null&&s(t,["parametersJsonSchema"],a);const l=o(e,["response"]);l!=null&&s(t,["response"],l);const f=o(e,["responseJsonSchema"]);return f!=null&&s(t,["responseJsonSchema"],f),t}function Pp(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function vp(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Pp(n)),t}function Lp(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function wp(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Lp(n)),t}function Op(){return{}}function Fp(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Dp(c))),s(t,["functionDeclarations"],f)}if(o(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],vp(i));const r=o(e,["googleSearchRetrieval"]);if(r!=null&&s(t,["googleSearchRetrieval"],wp(r)),o(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(e,["urlContext"])!=null&&s(t,["urlContext"],Op());const a=o(e,["codeExecution"]);a!=null&&s(t,["codeExecution"],a);const l=o(e,["computerUse"]);return l!=null&&s(t,["computerUse"],l),t}function Up(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function Bp(e){const t={},n=o(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=o(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function Hp(e){const t={},n=o(e,["latLng"]);n!=null&&s(t,["latLng"],Bp(n));const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function Vp(e){const t={},n=o(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],Up(n));const i=o(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],Hp(i)),t}function qp(e){const t={},n=o(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Ms(e){const t={},n=o(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],qp(n)),t}function Gp(e){const t={},n=o(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=o(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],Ms(i)),t}function Yp(e){const t={},n=o(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Gp(r))),s(t,["speakerVoiceConfigs"],i)}return t}function zp(e){const t={},n=o(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],Ms(n));const i=o(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],Yp(i));const r=o(e,["languageCode"]);return r!=null&&s(t,["languageCode"],r),t}function $p(e){const t={},n=o(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const i=o(e,["thinkingBudget"]);return i!=null&&s(t,["thinkingBudget"],i),t}function Wp(e,t,n){const i={},r=o(t,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],Gn(Ae(r)));const u=o(t,["temperature"]);u!=null&&s(i,["temperature"],u);const a=o(t,["topP"]);a!=null&&s(i,["topP"],a);const l=o(t,["topK"]);l!=null&&s(i,["topK"],l);const f=o(t,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);const c=o(t,["maxOutputTokens"]);c!=null&&s(i,["maxOutputTokens"],c);const h=o(t,["stopSequences"]);h!=null&&s(i,["stopSequences"],h);const p=o(t,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(t,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(t,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const E=o(t,["frequencyPenalty"]);E!=null&&s(i,["frequencyPenalty"],E);const A=o(t,["seed"]);A!=null&&s(i,["seed"],A);const R=o(t,["responseMimeType"]);R!=null&&s(i,["responseMimeType"],R);const I=o(t,["responseSchema"]);I!=null&&s(i,["responseSchema"],kp(Zi(I)));const M=o(t,["responseJsonSchema"]);if(M!=null&&s(i,["responseJsonSchema"],M),o(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=o(t,["safetySettings"]);if(n!==void 0&&k!=null){let F=k;Array.isArray(F)&&(F=F.map(Y=>Mp(Y))),s(n,["safetySettings"],F)}const O=o(t,["tools"]);if(n!==void 0&&O!=null){let F=Pt(O);Array.isArray(F)&&(F=F.map(Y=>Fp(Dt(Y)))),s(n,["tools"],F)}const w=o(t,["toolConfig"]);if(n!==void 0&&w!=null&&s(n,["toolConfig"],Vp(w)),o(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=o(t,["cachedContent"]);n!==void 0&&N!=null&&s(n,["cachedContent"],Qe(e,N));const q=o(t,["responseModalities"]);q!=null&&s(i,["responseModalities"],q);const Z=o(t,["mediaResolution"]);Z!=null&&s(i,["mediaResolution"],Z);const G=o(t,["speechConfig"]);if(G!=null&&s(i,["speechConfig"],zp(ji(G))),o(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=o(t,["thinkingConfig"]);return x!=null&&s(i,["thinkingConfig"],$p(x)),i}function Ho(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);if(r!=null){let a=Ue(r);Array.isArray(a)&&(a=a.map(l=>Gn(l))),s(n,["contents"],a)}const u=o(t,["config"]);return u!=null&&s(n,["generationConfig"],Wp(e,u,n)),n}function Jp(e,t){const n={},i=o(e,["taskType"]);t!==void 0&&i!=null&&s(t,["requests[]","taskType"],i);const r=o(e,["title"]);t!==void 0&&r!=null&&s(t,["requests[]","title"],r);const u=o(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&s(t,["requests[]","outputDimensionality"],u),o(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(o(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Kp(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);r!=null&&s(n,["requests[]","content"],hs(e,r));const u=o(t,["config"]);u!=null&&s(n,["config"],Jp(u,n));const a=o(t,["model"]);return a!==void 0&&s(n,["requests[]","model"],se(e,a)),n}function Qp(e,t){const n={};if(o(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=o(e,["numberOfImages"]);t!==void 0&&i!=null&&s(t,["parameters","sampleCount"],i);const r=o(e,["aspectRatio"]);t!==void 0&&r!=null&&s(t,["parameters","aspectRatio"],r);const u=o(e,["guidanceScale"]);if(t!==void 0&&u!=null&&s(t,["parameters","guidanceScale"],u),o(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=o(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&s(t,["parameters","safetySetting"],a);const l=o(e,["personGeneration"]);t!==void 0&&l!=null&&s(t,["parameters","personGeneration"],l);const f=o(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&s(t,["parameters","includeSafetyAttributes"],f);const c=o(e,["includeRaiReason"]);t!==void 0&&c!=null&&s(t,["parameters","includeRaiReason"],c);const h=o(e,["language"]);t!==void 0&&h!=null&&s(t,["parameters","language"],h);const p=o(e,["outputMimeType"]);t!==void 0&&p!=null&&s(t,["parameters","outputOptions","mimeType"],p);const m=o(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&s(t,["parameters","outputOptions","compressionQuality"],m),o(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(o(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Xp(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const u=o(t,["config"]);return u!=null&&s(n,["config"],Qp(u,n)),n}function Zp(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","name"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function jp(e,t,n){const i={},r=o(t,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);const u=o(t,["pageToken"]);n!==void 0&&u!=null&&s(n,["_query","pageToken"],u);const a=o(t,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const l=o(t,["queryBase"]);return n!==void 0&&l!=null&&s(n,["_url","models_url"],gs(e,l)),i}function em(e,t){const n={},i=o(t,["config"]);return i!=null&&s(n,["config"],jp(e,i,n)),n}function tm(e,t){const n={},i=o(e,["displayName"]);t!==void 0&&i!=null&&s(t,["displayName"],i);const r=o(e,["description"]);t!==void 0&&r!=null&&s(t,["description"],r);const u=o(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&s(t,["defaultCheckpointId"],u),n}function nm(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","name"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],tm(r,n)),n}function im(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","name"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function rm(e){const t={};if(o(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(o(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(o(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function om(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);if(r!=null){let a=Ue(r);Array.isArray(a)&&(a=a.map(l=>Gn(l))),s(n,["contents"],a)}const u=o(t,["config"]);return u!=null&&s(n,["config"],rm(u)),n}function um(e){const t={};if(o(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=o(e,["imageBytes"]);n!=null&&s(t,["bytesBase64Encoded"],Xe(n));const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function sm(e,t){const n={},i=o(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&s(t,["parameters","sampleCount"],i),o(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=o(e,["durationSeconds"]);if(t!==void 0&&r!=null&&s(t,["parameters","durationSeconds"],r),o(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=o(e,["aspectRatio"]);if(t!==void 0&&u!=null&&s(t,["parameters","aspectRatio"],u),o(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=o(e,["personGeneration"]);if(t!==void 0&&a!=null&&s(t,["parameters","personGeneration"],a),o(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=o(e,["negativePrompt"]);t!==void 0&&l!=null&&s(t,["parameters","negativePrompt"],l);const f=o(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&s(t,["parameters","enhancePrompt"],f),o(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(o(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(o(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function am(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const u=o(t,["image"]);if(u!=null&&s(n,["instances[0]","image"],um(u)),o(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=o(t,["config"]);return a!=null&&s(n,["config"],sm(a,n)),n}function lm(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function cm(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["data"]);i!=null&&s(t,["data"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function fm(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function dm(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],lm(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],cm(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],fm(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function Lt(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>dm(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function hm(e){const t={},n=o(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const i=o(e,["default"]);i!=null&&s(t,["default"],i);const r=o(e,["description"]);r!=null&&s(t,["description"],r);const u=o(e,["enum"]);u!=null&&s(t,["enum"],u);const a=o(e,["example"]);a!=null&&s(t,["example"],a);const l=o(e,["format"]);l!=null&&s(t,["format"],l);const f=o(e,["items"]);f!=null&&s(t,["items"],f);const c=o(e,["maxItems"]);c!=null&&s(t,["maxItems"],c);const h=o(e,["maxLength"]);h!=null&&s(t,["maxLength"],h);const p=o(e,["maxProperties"]);p!=null&&s(t,["maxProperties"],p);const m=o(e,["maximum"]);m!=null&&s(t,["maximum"],m);const g=o(e,["minItems"]);g!=null&&s(t,["minItems"],g);const E=o(e,["minLength"]);E!=null&&s(t,["minLength"],E);const A=o(e,["minProperties"]);A!=null&&s(t,["minProperties"],A);const R=o(e,["minimum"]);R!=null&&s(t,["minimum"],R);const I=o(e,["nullable"]);I!=null&&s(t,["nullable"],I);const M=o(e,["pattern"]);M!=null&&s(t,["pattern"],M);const k=o(e,["properties"]);k!=null&&s(t,["properties"],k);const O=o(e,["propertyOrdering"]);O!=null&&s(t,["propertyOrdering"],O);const w=o(e,["required"]);w!=null&&s(t,["required"],w);const N=o(e,["title"]);N!=null&&s(t,["title"],N);const q=o(e,["type"]);return q!=null&&s(t,["type"],q),t}function pm(e){const t={},n=o(e,["featureSelectionPreference"]);return n!=null&&s(t,["featureSelectionPreference"],n),t}function mm(e){const t={},n=o(e,["method"]);n!=null&&s(t,["method"],n);const i=o(e,["category"]);i!=null&&s(t,["category"],i);const r=o(e,["threshold"]);return r!=null&&s(t,["threshold"],r),t}function gm(e){const t={};if(o(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=o(e,["description"]);n!=null&&s(t,["description"],n);const i=o(e,["name"]);i!=null&&s(t,["name"],i);const r=o(e,["parameters"]);r!=null&&s(t,["parameters"],r);const u=o(e,["parametersJsonSchema"]);u!=null&&s(t,["parametersJsonSchema"],u);const a=o(e,["response"]);a!=null&&s(t,["response"],a);const l=o(e,["responseJsonSchema"]);return l!=null&&s(t,["responseJsonSchema"],l),t}function Tm(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Em(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Tm(n)),t}function Cm(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function ym(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Cm(n)),t}function _m(){return{}}function Am(e){const t={},n=o(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function Sm(e){const t={},n=o(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Am(n));const i=o(e,["authType"]);i!=null&&s(t,["authType"],i);const r=o(e,["googleServiceAccountConfig"]);r!=null&&s(t,["googleServiceAccountConfig"],r);const u=o(e,["httpBasicAuthConfig"]);u!=null&&s(t,["httpBasicAuthConfig"],u);const a=o(e,["oauthConfig"]);a!=null&&s(t,["oauthConfig"],a);const l=o(e,["oidcConfig"]);return l!=null&&s(t,["oidcConfig"],l),t}function Im(e){const t={},n=o(e,["authConfig"]);return n!=null&&s(t,["authConfig"],Sm(n)),t}function bm(){return{}}function Ds(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>gm(m))),s(t,["functionDeclarations"],p)}const i=o(e,["retrieval"]);i!=null&&s(t,["retrieval"],i);const r=o(e,["googleSearch"]);r!=null&&s(t,["googleSearch"],Em(r));const u=o(e,["googleSearchRetrieval"]);u!=null&&s(t,["googleSearchRetrieval"],ym(u)),o(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],_m());const l=o(e,["googleMaps"]);l!=null&&s(t,["googleMaps"],Im(l)),o(e,["urlContext"])!=null&&s(t,["urlContext"],bm());const c=o(e,["codeExecution"]);c!=null&&s(t,["codeExecution"],c);const h=o(e,["computerUse"]);return h!=null&&s(t,["computerUse"],h),t}function xm(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function Nm(e){const t={},n=o(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=o(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function Rm(e){const t={},n=o(e,["latLng"]);n!=null&&s(t,["latLng"],Nm(n));const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function km(e){const t={},n=o(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],xm(n));const i=o(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],Rm(i)),t}function Mm(e){const t={},n=o(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Dm(e){const t={},n=o(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Mm(n)),t}function Pm(e){const t={},n=o(e,["voiceConfig"]);if(n!=null&&s(t,["voiceConfig"],Dm(n)),o(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=o(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function vm(e){const t={},n=o(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const i=o(e,["thinkingBudget"]);return i!=null&&s(t,["thinkingBudget"],i),t}function Lm(e,t,n){const i={},r=o(t,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],Lt(Ae(r)));const u=o(t,["temperature"]);u!=null&&s(i,["temperature"],u);const a=o(t,["topP"]);a!=null&&s(i,["topP"],a);const l=o(t,["topK"]);l!=null&&s(i,["topK"],l);const f=o(t,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);const c=o(t,["maxOutputTokens"]);c!=null&&s(i,["maxOutputTokens"],c);const h=o(t,["stopSequences"]);h!=null&&s(i,["stopSequences"],h);const p=o(t,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(t,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(t,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const E=o(t,["frequencyPenalty"]);E!=null&&s(i,["frequencyPenalty"],E);const A=o(t,["seed"]);A!=null&&s(i,["seed"],A);const R=o(t,["responseMimeType"]);R!=null&&s(i,["responseMimeType"],R);const I=o(t,["responseSchema"]);I!=null&&s(i,["responseSchema"],hm(Zi(I)));const M=o(t,["responseJsonSchema"]);M!=null&&s(i,["responseJsonSchema"],M);const k=o(t,["routingConfig"]);k!=null&&s(i,["routingConfig"],k);const O=o(t,["modelSelectionConfig"]);O!=null&&s(i,["modelConfig"],pm(O));const w=o(t,["safetySettings"]);if(n!==void 0&&w!=null){let W=w;Array.isArray(W)&&(W=W.map(H=>mm(H))),s(n,["safetySettings"],W)}const N=o(t,["tools"]);if(n!==void 0&&N!=null){let W=Pt(N);Array.isArray(W)&&(W=W.map(H=>Ds(Dt(H)))),s(n,["tools"],W)}const q=o(t,["toolConfig"]);n!==void 0&&q!=null&&s(n,["toolConfig"],km(q));const Z=o(t,["labels"]);n!==void 0&&Z!=null&&s(n,["labels"],Z);const G=o(t,["cachedContent"]);n!==void 0&&G!=null&&s(n,["cachedContent"],Qe(e,G));const x=o(t,["responseModalities"]);x!=null&&s(i,["responseModalities"],x);const F=o(t,["mediaResolution"]);F!=null&&s(i,["mediaResolution"],F);const Y=o(t,["speechConfig"]);Y!=null&&s(i,["speechConfig"],Pm(ji(Y)));const $=o(t,["audioTimestamp"]);$!=null&&s(i,["audioTimestamp"],$);const z=o(t,["thinkingConfig"]);return z!=null&&s(i,["thinkingConfig"],vm(z)),i}function Vo(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);if(r!=null){let a=Ue(r);Array.isArray(a)&&(a=a.map(l=>Lt(l))),s(n,["contents"],a)}const u=o(t,["config"]);return u!=null&&s(n,["generationConfig"],Lm(e,u,n)),n}function wm(e,t){const n={},i=o(e,["taskType"]);t!==void 0&&i!=null&&s(t,["instances[]","task_type"],i);const r=o(e,["title"]);t!==void 0&&r!=null&&s(t,["instances[]","title"],r);const u=o(e,["outputDimensionality"]);t!==void 0&&u!=null&&s(t,["parameters","outputDimensionality"],u);const a=o(e,["mimeType"]);t!==void 0&&a!=null&&s(t,["instances[]","mimeType"],a);const l=o(e,["autoTruncate"]);return t!==void 0&&l!=null&&s(t,["parameters","autoTruncate"],l),n}function Om(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);r!=null&&s(n,["instances[]","content"],hs(e,r));const u=o(t,["config"]);return u!=null&&s(n,["config"],wm(u,n)),n}function Fm(e,t){const n={},i=o(e,["outputGcsUri"]);t!==void 0&&i!=null&&s(t,["parameters","storageUri"],i);const r=o(e,["negativePrompt"]);t!==void 0&&r!=null&&s(t,["parameters","negativePrompt"],r);const u=o(e,["numberOfImages"]);t!==void 0&&u!=null&&s(t,["parameters","sampleCount"],u);const a=o(e,["aspectRatio"]);t!==void 0&&a!=null&&s(t,["parameters","aspectRatio"],a);const l=o(e,["guidanceScale"]);t!==void 0&&l!=null&&s(t,["parameters","guidanceScale"],l);const f=o(e,["seed"]);t!==void 0&&f!=null&&s(t,["parameters","seed"],f);const c=o(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&s(t,["parameters","safetySetting"],c);const h=o(e,["personGeneration"]);t!==void 0&&h!=null&&s(t,["parameters","personGeneration"],h);const p=o(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&s(t,["parameters","includeSafetyAttributes"],p);const m=o(e,["includeRaiReason"]);t!==void 0&&m!=null&&s(t,["parameters","includeRaiReason"],m);const g=o(e,["language"]);t!==void 0&&g!=null&&s(t,["parameters","language"],g);const E=o(e,["outputMimeType"]);t!==void 0&&E!=null&&s(t,["parameters","outputOptions","mimeType"],E);const A=o(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&s(t,["parameters","outputOptions","compressionQuality"],A);const R=o(e,["addWatermark"]);t!==void 0&&R!=null&&s(t,["parameters","addWatermark"],R);const I=o(e,["enhancePrompt"]);return t!==void 0&&I!=null&&s(t,["parameters","enhancePrompt"],I),n}function Um(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const u=o(t,["config"]);return u!=null&&s(n,["config"],Fm(u,n)),n}function Yn(e){const t={},n=o(e,["gcsUri"]);n!=null&&s(t,["gcsUri"],n);const i=o(e,["imageBytes"]);i!=null&&s(t,["bytesBase64Encoded"],Xe(i));const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function Bm(e){const t={},n=o(e,["maskMode"]);n!=null&&s(t,["maskMode"],n);const i=o(e,["segmentationClasses"]);i!=null&&s(t,["maskClasses"],i);const r=o(e,["maskDilation"]);return r!=null&&s(t,["dilation"],r),t}function Hm(e){const t={},n=o(e,["controlType"]);n!=null&&s(t,["controlType"],n);const i=o(e,["enableControlImageComputation"]);return i!=null&&s(t,["computeControl"],i),t}function Vm(e){const t={},n=o(e,["styleDescription"]);return n!=null&&s(t,["styleDescription"],n),t}function qm(e){const t={},n=o(e,["subjectType"]);n!=null&&s(t,["subjectType"],n);const i=o(e,["subjectDescription"]);return i!=null&&s(t,["subjectDescription"],i),t}function Gm(e){const t={},n=o(e,["referenceImage"]);n!=null&&s(t,["referenceImage"],Yn(n));const i=o(e,["referenceId"]);i!=null&&s(t,["referenceId"],i);const r=o(e,["referenceType"]);r!=null&&s(t,["referenceType"],r);const u=o(e,["maskImageConfig"]);u!=null&&s(t,["maskImageConfig"],Bm(u));const a=o(e,["controlImageConfig"]);a!=null&&s(t,["controlImageConfig"],Hm(a));const l=o(e,["styleImageConfig"]);l!=null&&s(t,["styleImageConfig"],Vm(l));const f=o(e,["subjectImageConfig"]);return f!=null&&s(t,["subjectImageConfig"],qm(f)),t}function Ym(e,t){const n={},i=o(e,["outputGcsUri"]);t!==void 0&&i!=null&&s(t,["parameters","storageUri"],i);const r=o(e,["negativePrompt"]);t!==void 0&&r!=null&&s(t,["parameters","negativePrompt"],r);const u=o(e,["numberOfImages"]);t!==void 0&&u!=null&&s(t,["parameters","sampleCount"],u);const a=o(e,["aspectRatio"]);t!==void 0&&a!=null&&s(t,["parameters","aspectRatio"],a);const l=o(e,["guidanceScale"]);t!==void 0&&l!=null&&s(t,["parameters","guidanceScale"],l);const f=o(e,["seed"]);t!==void 0&&f!=null&&s(t,["parameters","seed"],f);const c=o(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&s(t,["parameters","safetySetting"],c);const h=o(e,["personGeneration"]);t!==void 0&&h!=null&&s(t,["parameters","personGeneration"],h);const p=o(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&s(t,["parameters","includeSafetyAttributes"],p);const m=o(e,["includeRaiReason"]);t!==void 0&&m!=null&&s(t,["parameters","includeRaiReason"],m);const g=o(e,["language"]);t!==void 0&&g!=null&&s(t,["parameters","language"],g);const E=o(e,["outputMimeType"]);t!==void 0&&E!=null&&s(t,["parameters","outputOptions","mimeType"],E);const A=o(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&s(t,["parameters","outputOptions","compressionQuality"],A);const R=o(e,["addWatermark"]);t!==void 0&&R!=null&&s(t,["parameters","addWatermark"],R);const I=o(e,["editMode"]);t!==void 0&&I!=null&&s(t,["parameters","editMode"],I);const M=o(e,["baseSteps"]);return t!==void 0&&M!=null&&s(t,["parameters","editConfig","baseSteps"],M),n}function zm(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const u=o(t,["referenceImages"]);if(u!=null){let l=u;Array.isArray(l)&&(l=l.map(f=>Gm(f))),s(n,["instances[0]","referenceImages"],l)}const a=o(t,["config"]);return a!=null&&s(n,["config"],Ym(a,n)),n}function $m(e,t){const n={},i=o(e,["includeRaiReason"]);t!==void 0&&i!=null&&s(t,["parameters","includeRaiReason"],i);const r=o(e,["outputMimeType"]);t!==void 0&&r!=null&&s(t,["parameters","outputOptions","mimeType"],r);const u=o(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&s(t,["parameters","outputOptions","compressionQuality"],u);const a=o(e,["enhanceInputImage"]);t!==void 0&&a!=null&&s(t,["parameters","upscaleConfig","enhanceInputImage"],a);const l=o(e,["imagePreservationFactor"]);t!==void 0&&l!=null&&s(t,["parameters","upscaleConfig","imagePreservationFactor"],l);const f=o(e,["numberOfImages"]);t!==void 0&&f!=null&&s(t,["parameters","sampleCount"],f);const c=o(e,["mode"]);return t!==void 0&&c!=null&&s(t,["parameters","mode"],c),n}function Wm(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["image"]);r!=null&&s(n,["instances[0]","image"],Yn(r));const u=o(t,["upscaleFactor"]);u!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],u);const a=o(t,["config"]);return a!=null&&s(n,["config"],$m(a,n)),n}function Jm(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","name"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function Km(e,t,n){const i={},r=o(t,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);const u=o(t,["pageToken"]);n!==void 0&&u!=null&&s(n,["_query","pageToken"],u);const a=o(t,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const l=o(t,["queryBase"]);return n!==void 0&&l!=null&&s(n,["_url","models_url"],gs(e,l)),i}function Qm(e,t){const n={},i=o(t,["config"]);return i!=null&&s(n,["config"],Km(e,i,n)),n}function Xm(e,t){const n={},i=o(e,["displayName"]);t!==void 0&&i!=null&&s(t,["displayName"],i);const r=o(e,["description"]);t!==void 0&&r!=null&&s(t,["description"],r);const u=o(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&s(t,["defaultCheckpointId"],u),n}function Zm(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],Xm(r,n)),n}function jm(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","name"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],r),n}function e0(e,t){const n={},i=o(e,["systemInstruction"]);t!==void 0&&i!=null&&s(t,["systemInstruction"],Lt(Ae(i)));const r=o(e,["tools"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Ds(l))),s(t,["tools"],a)}const u=o(e,["generationConfig"]);return t!==void 0&&u!=null&&s(t,["generationConfig"],u),n}function t0(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);if(r!=null){let a=Ue(r);Array.isArray(a)&&(a=a.map(l=>Lt(l))),s(n,["contents"],a)}const u=o(t,["config"]);return u!=null&&s(n,["config"],e0(u,n)),n}function n0(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["contents"]);if(r!=null){let a=Ue(r);Array.isArray(a)&&(a=a.map(l=>Lt(l))),s(n,["contents"],a)}const u=o(t,["config"]);return u!=null&&s(n,["config"],u),n}function i0(e){const t={},n=o(e,["uri"]);n!=null&&s(t,["gcsUri"],n);const i=o(e,["videoBytes"]);i!=null&&s(t,["bytesBase64Encoded"],Xe(i));const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function r0(e,t){const n={},i=o(e,["numberOfVideos"]);t!==void 0&&i!=null&&s(t,["parameters","sampleCount"],i);const r=o(e,["outputGcsUri"]);t!==void 0&&r!=null&&s(t,["parameters","storageUri"],r);const u=o(e,["fps"]);t!==void 0&&u!=null&&s(t,["parameters","fps"],u);const a=o(e,["durationSeconds"]);t!==void 0&&a!=null&&s(t,["parameters","durationSeconds"],a);const l=o(e,["seed"]);t!==void 0&&l!=null&&s(t,["parameters","seed"],l);const f=o(e,["aspectRatio"]);t!==void 0&&f!=null&&s(t,["parameters","aspectRatio"],f);const c=o(e,["resolution"]);t!==void 0&&c!=null&&s(t,["parameters","resolution"],c);const h=o(e,["personGeneration"]);t!==void 0&&h!=null&&s(t,["parameters","personGeneration"],h);const p=o(e,["pubsubTopic"]);t!==void 0&&p!=null&&s(t,["parameters","pubsubTopic"],p);const m=o(e,["negativePrompt"]);t!==void 0&&m!=null&&s(t,["parameters","negativePrompt"],m);const g=o(e,["enhancePrompt"]);t!==void 0&&g!=null&&s(t,["parameters","enhancePrompt"],g);const E=o(e,["generateAudio"]);t!==void 0&&E!=null&&s(t,["parameters","generateAudio"],E);const A=o(e,["lastFrame"]);t!==void 0&&A!=null&&s(t,["instances[0]","lastFrame"],Yn(A));const R=o(e,["compressionQuality"]);return t!==void 0&&R!=null&&s(t,["parameters","compressionQuality"],R),n}function o0(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["_url","model"],se(e,i));const r=o(t,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const u=o(t,["image"]);u!=null&&s(n,["instances[0]","image"],Yn(u));const a=o(t,["video"]);a!=null&&s(n,["instances[0]","video"],i0(a));const l=o(t,["config"]);return l!=null&&s(n,["config"],r0(l,n)),n}function u0(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function s0(e){const t={},n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function a0(e){const t={},n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function l0(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],u0(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],s0(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],a0(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function c0(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>l0(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function f0(e){const t={},n=o(e,["citationSources"]);return n!=null&&s(t,["citations"],n),t}function d0(e){const t={},n=o(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const i=o(e,["urlRetrievalStatus"]);return i!=null&&s(t,["urlRetrievalStatus"],i),t}function h0(e){const t={},n=o(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>d0(r))),s(t,["urlMetadata"],i)}return t}function p0(e){const t={},n=o(e,["content"]);n!=null&&s(t,["content"],c0(n));const i=o(e,["citationMetadata"]);i!=null&&s(t,["citationMetadata"],f0(i));const r=o(e,["tokenCount"]);r!=null&&s(t,["tokenCount"],r);const u=o(e,["finishReason"]);u!=null&&s(t,["finishReason"],u);const a=o(e,["urlContextMetadata"]);a!=null&&s(t,["urlContextMetadata"],h0(a));const l=o(e,["avgLogprobs"]);l!=null&&s(t,["avgLogprobs"],l);const f=o(e,["groundingMetadata"]);f!=null&&s(t,["groundingMetadata"],f);const c=o(e,["index"]);c!=null&&s(t,["index"],c);const h=o(e,["logprobsResult"]);h!=null&&s(t,["logprobsResult"],h);const p=o(e,["safetyRatings"]);return p!=null&&s(t,["safetyRatings"],p),t}function qo(e){const t={},n=o(e,["sdkHttpResponse"]);n!=null&&s(t,["sdkHttpResponse"],n);const i=o(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>p0(f))),s(t,["candidates"],l)}const r=o(e,["modelVersion"]);r!=null&&s(t,["modelVersion"],r);const u=o(e,["promptFeedback"]);u!=null&&s(t,["promptFeedback"],u);const a=o(e,["usageMetadata"]);return a!=null&&s(t,["usageMetadata"],a),t}function m0(e){const t={},n=o(e,["values"]);return n!=null&&s(t,["values"],n),t}function g0(){return{}}function T0(e){const t={},n=o(e,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>m0(u))),s(t,["embeddings"],r)}return o(e,["metadata"])!=null&&s(t,["metadata"],g0()),t}function E0(e){const t={},n=o(e,["bytesBase64Encoded"]);n!=null&&s(t,["imageBytes"],Xe(n));const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Ps(e){const t={},n=o(e,["safetyAttributes","categories"]);n!=null&&s(t,["categories"],n);const i=o(e,["safetyAttributes","scores"]);i!=null&&s(t,["scores"],i);const r=o(e,["contentType"]);return r!=null&&s(t,["contentType"],r),t}function C0(e){const t={},n=o(e,["_self"]);n!=null&&s(t,["image"],E0(n));const i=o(e,["raiFilteredReason"]);i!=null&&s(t,["raiFilteredReason"],i);const r=o(e,["_self"]);return r!=null&&s(t,["safetyAttributes"],Ps(r)),t}function y0(e){const t={},n=o(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>C0(u))),s(t,["generatedImages"],r)}const i=o(e,["positivePromptSafetyAttributes"]);return i!=null&&s(t,["positivePromptSafetyAttributes"],Ps(i)),t}function _0(e){const t={},n=o(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const i=o(e,["createTime"]);i!=null&&s(t,["createTime"],i);const r=o(e,["updateTime"]);return r!=null&&s(t,["updateTime"],r),t}function Di(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["description"]);r!=null&&s(t,["description"],r);const u=o(e,["version"]);u!=null&&s(t,["version"],u);const a=o(e,["_self"]);a!=null&&s(t,["tunedModelInfo"],_0(a));const l=o(e,["inputTokenLimit"]);l!=null&&s(t,["inputTokenLimit"],l);const f=o(e,["outputTokenLimit"]);f!=null&&s(t,["outputTokenLimit"],f);const c=o(e,["supportedGenerationMethods"]);return c!=null&&s(t,["supportedActions"],c),t}function A0(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["_self"]);if(i!=null){let r=Ts(i);Array.isArray(r)&&(r=r.map(u=>Di(u))),s(t,["models"],r)}return t}function S0(){return{}}function I0(e){const t={},n=o(e,["totalTokens"]);n!=null&&s(t,["totalTokens"],n);const i=o(e,["cachedContentTokenCount"]);return i!=null&&s(t,["cachedContentTokenCount"],i),t}function b0(e){const t={},n=o(e,["video","uri"]);n!=null&&s(t,["uri"],n);const i=o(e,["video","encodedVideo"]);i!=null&&s(t,["videoBytes"],Xe(i));const r=o(e,["encoding"]);return r!=null&&s(t,["mimeType"],r),t}function x0(e){const t={},n=o(e,["_self"]);return n!=null&&s(t,["video"],b0(n)),t}function N0(e){const t={},n=o(e,["generatedSamples"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(a=>x0(a))),s(t,["generatedVideos"],u)}const i=o(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const r=o(e,["raiMediaFilteredReasons"]);return r!=null&&s(t,["raiMediaFilteredReasons"],r),t}function R0(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["metadata"]);i!=null&&s(t,["metadata"],i);const r=o(e,["done"]);r!=null&&s(t,["done"],r);const u=o(e,["error"]);u!=null&&s(t,["error"],u);const a=o(e,["response","generateVideoResponse"]);return a!=null&&s(t,["response"],N0(a)),t}function k0(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function M0(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["data"]);i!=null&&s(t,["data"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function D0(e){const t={},n=o(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=o(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function P0(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],k0(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],M0(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],D0(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function v0(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>P0(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function L0(e){const t={},n=o(e,["citations"]);return n!=null&&s(t,["citations"],n),t}function w0(e){const t={},n=o(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const i=o(e,["urlRetrievalStatus"]);return i!=null&&s(t,["urlRetrievalStatus"],i),t}function O0(e){const t={},n=o(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>w0(r))),s(t,["urlMetadata"],i)}return t}function F0(e){const t={},n=o(e,["content"]);n!=null&&s(t,["content"],v0(n));const i=o(e,["citationMetadata"]);i!=null&&s(t,["citationMetadata"],L0(i));const r=o(e,["finishMessage"]);r!=null&&s(t,["finishMessage"],r);const u=o(e,["finishReason"]);u!=null&&s(t,["finishReason"],u);const a=o(e,["urlContextMetadata"]);a!=null&&s(t,["urlContextMetadata"],O0(a));const l=o(e,["avgLogprobs"]);l!=null&&s(t,["avgLogprobs"],l);const f=o(e,["groundingMetadata"]);f!=null&&s(t,["groundingMetadata"],f);const c=o(e,["index"]);c!=null&&s(t,["index"],c);const h=o(e,["logprobsResult"]);h!=null&&s(t,["logprobsResult"],h);const p=o(e,["safetyRatings"]);return p!=null&&s(t,["safetyRatings"],p),t}function Go(e){const t={},n=o(e,["sdkHttpResponse"]);n!=null&&s(t,["sdkHttpResponse"],n);const i=o(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>F0(h))),s(t,["candidates"],c)}const r=o(e,["createTime"]);r!=null&&s(t,["createTime"],r);const u=o(e,["responseId"]);u!=null&&s(t,["responseId"],u);const a=o(e,["modelVersion"]);a!=null&&s(t,["modelVersion"],a);const l=o(e,["promptFeedback"]);l!=null&&s(t,["promptFeedback"],l);const f=o(e,["usageMetadata"]);return f!=null&&s(t,["usageMetadata"],f),t}function U0(e){const t={},n=o(e,["truncated"]);n!=null&&s(t,["truncated"],n);const i=o(e,["token_count"]);return i!=null&&s(t,["tokenCount"],i),t}function B0(e){const t={},n=o(e,["values"]);n!=null&&s(t,["values"],n);const i=o(e,["statistics"]);return i!=null&&s(t,["statistics"],U0(i)),t}function H0(e){const t={},n=o(e,["billableCharacterCount"]);return n!=null&&s(t,["billableCharacterCount"],n),t}function V0(e){const t={},n=o(e,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>B0(u))),s(t,["embeddings"],r)}const i=o(e,["metadata"]);return i!=null&&s(t,["metadata"],H0(i)),t}function q0(e){const t={},n=o(e,["gcsUri"]);n!=null&&s(t,["gcsUri"],n);const i=o(e,["bytesBase64Encoded"]);i!=null&&s(t,["imageBytes"],Xe(i));const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function vs(e){const t={},n=o(e,["safetyAttributes","categories"]);n!=null&&s(t,["categories"],n);const i=o(e,["safetyAttributes","scores"]);i!=null&&s(t,["scores"],i);const r=o(e,["contentType"]);return r!=null&&s(t,["contentType"],r),t}function tr(e){const t={},n=o(e,["_self"]);n!=null&&s(t,["image"],q0(n));const i=o(e,["raiFilteredReason"]);i!=null&&s(t,["raiFilteredReason"],i);const r=o(e,["_self"]);r!=null&&s(t,["safetyAttributes"],vs(r));const u=o(e,["prompt"]);return u!=null&&s(t,["enhancedPrompt"],u),t}function G0(e){const t={},n=o(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>tr(u))),s(t,["generatedImages"],r)}const i=o(e,["positivePromptSafetyAttributes"]);return i!=null&&s(t,["positivePromptSafetyAttributes"],vs(i)),t}function Y0(e){const t={},n=o(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>tr(r))),s(t,["generatedImages"],i)}return t}function z0(e){const t={},n=o(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>tr(r))),s(t,["generatedImages"],i)}return t}function $0(e){const t={},n=o(e,["endpoint"]);n!=null&&s(t,["name"],n);const i=o(e,["deployedModelId"]);return i!=null&&s(t,["deployedModelId"],i),t}function W0(e){const t={},n=o(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(t,["baseModel"],n);const i=o(e,["createTime"]);i!=null&&s(t,["createTime"],i);const r=o(e,["updateTime"]);return r!=null&&s(t,["updateTime"],r),t}function J0(e){const t={},n=o(e,["checkpointId"]);n!=null&&s(t,["checkpointId"],n);const i=o(e,["epoch"]);i!=null&&s(t,["epoch"],i);const r=o(e,["step"]);return r!=null&&s(t,["step"],r),t}function Pi(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["displayName"]);i!=null&&s(t,["displayName"],i);const r=o(e,["description"]);r!=null&&s(t,["description"],r);const u=o(e,["versionId"]);u!=null&&s(t,["version"],u);const a=o(e,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>$0(m))),s(t,["endpoints"],p)}const l=o(e,["labels"]);l!=null&&s(t,["labels"],l);const f=o(e,["_self"]);f!=null&&s(t,["tunedModelInfo"],W0(f));const c=o(e,["defaultCheckpointId"]);c!=null&&s(t,["defaultCheckpointId"],c);const h=o(e,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>J0(m))),s(t,["checkpoints"],p)}return t}function K0(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["_self"]);if(i!=null){let r=Ts(i);Array.isArray(r)&&(r=r.map(u=>Pi(u))),s(t,["models"],r)}return t}function Q0(){return{}}function X0(e){const t={},n=o(e,["totalTokens"]);return n!=null&&s(t,["totalTokens"],n),t}function Z0(e){const t={},n=o(e,["tokensInfo"]);return n!=null&&s(t,["tokensInfo"],n),t}function j0(e){const t={},n=o(e,["gcsUri"]);n!=null&&s(t,["uri"],n);const i=o(e,["bytesBase64Encoded"]);i!=null&&s(t,["videoBytes"],Xe(i));const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function eg(e){const t={},n=o(e,["_self"]);return n!=null&&s(t,["video"],j0(n)),t}function tg(e){const t={},n=o(e,["videos"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(a=>eg(a))),s(t,["generatedVideos"],u)}const i=o(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const r=o(e,["raiMediaFilteredReasons"]);return r!=null&&s(t,["raiMediaFilteredReasons"],r),t}function ng(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["metadata"]);i!=null&&s(t,["metadata"],i);const r=o(e,["done"]);r!=null&&s(t,["done"],r);const u=o(e,["error"]);u!=null&&s(t,["error"],u);const a=o(e,["response"]);return a!=null&&s(t,["response"],tg(a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig="Content-Type",rg="X-Server-Timeout",og="User-Agent",vi="x-goog-api-client",ug="1.10.0",sg=`google-genai-sdk/${ug}`,ag="v1beta1",lg="v1beta",Yo=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class cg{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ag,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:lg,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[a,l]of Object.entries(t.queryParams))r.searchParams.append(a,String(l));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,n,t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(n))typeof u=="object"?i[r]=Object.assign(Object.assign({},i[r]),u):u!==void 0&&(i[r]=u);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,n,t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const r=new AbortController,u=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),t.signal=u}return n&&n.extraBody!==null&&fg(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await zo(r),new bi(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await zo(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var n;return bt(this,arguments,function*(){const r=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:l,value:f}=yield de(r.read());if(l){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=u.decode(f,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,E=m.code,A=`got status: ${g}. ${JSON.stringify(p)}`;if(E>=400&&E<600)throw new qn({message:A,status:E})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let h=a.match(Yo);for(;h;){const p=h[1];try{const m=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield de(new bi(m)),a=a.slice(h[0].length),h=a.match(Yo)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=sg+" "+this.clientOptions.userAgentExtra;return t[og]=n,t[vi]=n,t[ig]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,r]of Object.entries(t.headers))n.append(i,r);t.timeout&&t.timeout>0&&n.append(rg,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,a=await u.stat(t);r.sizeBytes=String(a.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const f=await this.fetchUploadUrl(r,n);return u.upload(t,f,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const u={file:t},a=await this.request({path:J("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function zo(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new qn({message:r,status:n}):new Error(r)}}function fg(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const u=JSON.parse(e.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))n=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(u,a){const l=Object.assign({},u);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const c=a[f],h=l[f];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?l[f]=i(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),l[f]=c)}return l}const r=i(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dg="mcp_used/unknown";let hg=!1;function Ls(e){for(const t of e)if(nr(t)||typeof t=="object"&&"inputSchema"in t)return!0;return hg}function ws(e){var t;const n=(t=e[vi])!==null&&t!==void 0?t:"";e[vi]=(n+` ${dg}`).trimStart()}function pg(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>nr(r)))!==null&&i!==void 0?i:!1}function mg(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>!nr(r)))!==null&&i!==void 0?i:!1}function nr(e){return e!==null&&typeof e=="object"&&e instanceof ir}function gg(e,t=100){return bt(this,arguments,function*(){let i,r=0;for(;r<t;){const u=yield de(e.listTools({cursor:i}));for(const a of u.tools)yield yield de(a),r++;if(!u.nextCursor)break;i=u.nextCursor}})}class ir{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new ir(t,n)}async initialize(){var t,n,i,r;if(this.mcpTools.length>0)return;const u={},a=[];for(const h of this.mcpClients)try{for(var l=!0,f=(n=void 0,jt(gg(h))),c;c=await f.next(),t=c.done,!t;l=!0){r=c.value,l=!1;const p=r;a.push(p);const m=p.name;if(u[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);u[m]=h}}catch(p){n={error:p}}finally{try{!l&&!t&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),lc(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,u);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Tg(e,t,n){const i=new tc;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const u=cp(r);Object.assign(i,u),t(i)}class Eg{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),a=_g(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const h=new Promise(k=>{c=k}),p=t.callbacks,m=function(){c({})},g=this.apiClient,E={onopen:m,onmessage:k=>{Tg(g,p.onmessage,k)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(k){}},A=this.webSocketFactory.create(f,yg(a),E);A.connect(),await h;const R=se(this.apiClient,t.model),I=Rs({model:R}),M=Mi({setup:I});return A.send(JSON.stringify(M)),new Cg(A,this.apiClient)}}class Cg{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ah(t),i=ks(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=lh(t),i=Mi(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const n=Mi({playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(At.PLAY)}pause(){this.sendPlaybackControl(At.PAUSE)}stop(){this.sendPlaybackControl(At.STOP)}resetContext(){this.sendPlaybackControl(At.RESET_CONTEXT)}close(){this.conn.close()}}function yg(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function _g(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ag="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Sg(e,t,n){const i=new ec;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const u=JSON.parse(r);if(e.isVertexAI()){const a=Ip(u);Object.assign(i,a)}else{const a=tp(u);Object.assign(i,a)}t(i)}class Ig{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new Eg(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,r,u,a,l;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const p=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&Ls(t.config.tools)&&ws(p);const m=Rg(p);if(this.apiClient.isVertexAI())h=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const G=this.apiClient.getApiKey();let x="BidiGenerateContent",F="key";G!=null&&G.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",F="access_token"),h=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${x}?${F}=${G}`}let g=()=>{};const E=new Promise(G=>{g=G}),A=t.callbacks,R=function(){var G;(G=A==null?void 0:A.onopen)===null||G===void 0||G.call(A),g({})},I=this.apiClient,M={onopen:R,onmessage:G=>{Sg(I,A.onmessage,G)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(G){},onclose:(i=A==null?void 0:A.onclose)!==null&&i!==void 0?i:function(G){}},k=this.webSocketFactory.create(h,Ng(m),M);k.connect(),await E;let O=se(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const G=this.apiClient.getProject(),x=this.apiClient.getLocation();O=`projects/${G}/locations/${x}/`+O}let w={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ln.AUDIO]}:t.config.responseModalities=[Ln.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(l=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[],q=[];for(const G of N)if(this.isCallableTool(G)){const x=G;q.push(await x.tool())}else q.push(G);q.length>0&&(t.config.tools=q);const Z={model:O,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?w=Oh(this.apiClient,Z):w=rh(this.apiClient,Z),delete w.config,k.send(JSON.stringify(w)),new xg(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const bg={turnComplete:!0};class xg{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ue(n.turns),t.isVertexAI()?i=i.map(r=>Lt(r)):i=i.map(r=>Gn(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const u of i){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(Ag)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},bg),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Bh(t)}:n={realtimeInput:sh(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Ng(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function Rg(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $o=10;function Wo(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const a of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Mn(a)){r=!0;break}if(!r)return!0;const u=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Mn(e){return"callTool"in e&&typeof e.callTool=="function"}function Jo(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kg extends dt{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,r,u,a,l;const f=await this.processParamsForMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!pg(n)||Wo(n.config))return await this.generateContentInternal(f);if(mg(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,h;const p=Ue(f.contents),m=(u=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:$o;let g=0;for(;g<m&&(c=await this.generateContentInternal(f),!(!c.functionCalls||c.functionCalls.length===0));){const E=c.candidates[0].content,A=[];for(const R of(l=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[])if(Mn(R)){const M=await R.callTool(c.functionCalls);A.push(...M)}g++,h={role:"user",parts:A},f.contents=Ue(f.contents),f.contents.push(E),f.contents.push(h),Jo(f.config)&&(p.push(E),p.push(h))}return Jo(f.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Wo(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let u;const a=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=f==null?void 0:f.safetyAttributes:a.push(f);let l;return u?l={generatedImages:a,positivePromptSafetyAttributes:u}:l={generatedImages:a},l}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new hn(ct.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsForMcpUsage(t){var n,i,r;const u=(n=t.config)===null||n===void 0?void 0:n.tools;if(!u)return t;const a=await Promise.all(u.map(async f=>Mn(f)?await f.tool():f)),l={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(l.config.tools=a,t.config&&t.config.tools&&Ls(t.config.tools)){const f=(r=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),ws(c),l.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(t){var n,i,r;const u=new Map;for(const a of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Mn(a)){const l=a,f=await l.tool();for(const c of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(u.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);u.set(c.name,l)}}return u}async processAfcStream(t){var n,i,r;const u=(r=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:$o;let a=!1,l=0;const f=await this.initAfcToolsMap(t);return function(c,h,p){var m,g;return bt(this,arguments,function*(){for(var E,A,R,I;l<u;){a&&(l++,a=!1);const w=yield de(c.processParamsForMcpUsage(p)),N=yield de(c.generateContentStreamInternal(w)),q=[],Z=[];try{for(var M=!0,k=(A=void 0,jt(N)),O;O=yield de(k.next()),E=O.done,!E;M=!0){I=O.value,M=!1;const G=I;if(yield yield de(G),G.candidates&&(!((m=G.candidates[0])===null||m===void 0)&&m.content)){Z.push(G.candidates[0].content);for(const x of(g=G.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(l<u&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(x.functionCall.name)){const F=yield de(h.get(x.functionCall.name).callTool([x.functionCall]));q.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(G){A={error:G}}finally{try{!M&&!E&&(R=k.return)&&(yield de(R.call(k)))}finally{if(A)throw A.error}}if(q.length>0){a=!0;const G=new zt;G.candidates=[{content:{role:"user",parts:q}}],yield yield de(G);const x=[];x.push(...Z),x.push({role:"user",parts:q});const F=Ue(p.contents).concat(x);p.contents=F}else break}})}(this,f,t)}async generateContentInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Vo(this.apiClient,t);return l=J("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=Go(h),m=new zt;return Object.assign(m,p),m})}else{const c=Ho(this.apiClient,t);return l=J("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=qo(h),m=new zt;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Vo(this.apiClient,t);return l=J("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return bt(this,arguments,function*(){var m,g,E,A;try{for(var R=!0,I=jt(p),M;M=yield de(I.next()),m=M.done,!m;R=!0){A=M.value,R=!1;const k=A,O=Go(yield de(k.json()));O.sdkHttpResponse={headers:k.headers};const w=new zt;Object.assign(w,O),yield yield de(w)}}catch(k){g={error:k}}finally{try{!R&&!m&&(E=I.return)&&(yield de(E.call(I)))}finally{if(g)throw g.error}}})})}else{const c=Ho(this.apiClient,t);return l=J("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),a.then(function(p){return bt(this,arguments,function*(){var m,g,E,A;try{for(var R=!0,I=jt(p),M;M=yield de(I.next()),m=M.done,!m;R=!0){A=M.value,R=!1;const k=A,O=qo(yield de(k.json()));O.sdkHttpResponse={headers:k.headers};const w=new zt;Object.assign(w,O),yield yield de(w)}}catch(k){g={error:k}}finally{try{!R&&!m&&(E=I.return)&&(yield de(E.call(I)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Om(this.apiClient,t);return l=J("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=V0(h),m=new yo;return Object.assign(m,p),m})}else{const c=Kp(this.apiClient,t);return l=J("{model}:batchEmbedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=T0(h),m=new yo;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Um(this.apiClient,t);return l=J("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=G0(h),m=new _o;return Object.assign(m,p),m})}else{const c=Xp(this.apiClient,t);return l=J("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=y0(h),m=new _o;return Object.assign(m,p),m})}}async editImageInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI()){const l=zm(this.apiClient,t);return u=J("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const c=Y0(f),h=new Jl;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI()){const l=Wm(this.apiClient,t);return u=J("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const c=z0(f),h=new Kl;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Jm(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>Pi(h))}else{const c=Zp(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Di(h))}}async listInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Qm(this.apiClient,t);return l=J("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=K0(h),m=new Ao;return Object.assign(m,p),m})}else{const c=em(this.apiClient,t);return l=J("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=A0(h),m=new Ao;return Object.assign(m,p),m})}}async update(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Zm(this.apiClient,t);return l=J("{model}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>Pi(h))}else{const c=nm(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Di(h))}}async delete(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=jm(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(()=>{const h=Q0(),p=new So;return Object.assign(p,h),p})}else{const c=im(this.apiClient,t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(()=>{const h=S0(),p=new So;return Object.assign(p,h),p})}}async countTokens(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=t0(this.apiClient,t);return l=J("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=X0(h),m=new Io;return Object.assign(m,p),m})}else{const c=om(this.apiClient,t);return l=J("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=I0(h),m=new Io;return Object.assign(m,p),m})}}async computeTokens(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI()){const l=n0(this.apiClient,t);return u=J("{model}:computeTokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const c=Z0(f),h=new Ql;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=o0(this.apiClient,t);return l=J("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>ng(h))}else{const c=am(this.apiClient,t);return l=J("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>R0(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mg(e){const t={},n=o(e,["operationName"]);n!=null&&s(t,["_url","operationName"],n);const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function Dg(e){const t={},n=o(e,["operationName"]);n!=null&&s(t,["_url","operationName"],n);const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function Pg(e){const t={},n=o(e,["operationName"]);n!=null&&s(t,["operationName"],n);const i=o(e,["resourceName"]);i!=null&&s(t,["_url","resourceName"],i);const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function vg(e){const t={},n=o(e,["video","uri"]);n!=null&&s(t,["uri"],n);const i=o(e,["video","encodedVideo"]);i!=null&&s(t,["videoBytes"],Xe(i));const r=o(e,["encoding"]);return r!=null&&s(t,["mimeType"],r),t}function Lg(e){const t={},n=o(e,["_self"]);return n!=null&&s(t,["video"],vg(n)),t}function wg(e){const t={},n=o(e,["generatedSamples"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(a=>Lg(a))),s(t,["generatedVideos"],u)}const i=o(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const r=o(e,["raiMediaFilteredReasons"]);return r!=null&&s(t,["raiMediaFilteredReasons"],r),t}function Og(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["metadata"]);i!=null&&s(t,["metadata"],i);const r=o(e,["done"]);r!=null&&s(t,["done"],r);const u=o(e,["error"]);u!=null&&s(t,["error"],u);const a=o(e,["response","generateVideoResponse"]);return a!=null&&s(t,["response"],wg(a)),t}function Fg(e){const t={},n=o(e,["gcsUri"]);n!=null&&s(t,["uri"],n);const i=o(e,["bytesBase64Encoded"]);i!=null&&s(t,["videoBytes"],Xe(i));const r=o(e,["mimeType"]);return r!=null&&s(t,["mimeType"],r),t}function Ug(e){const t={},n=o(e,["_self"]);return n!=null&&s(t,["video"],Fg(n)),t}function Bg(e){const t={},n=o(e,["videos"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(a=>Ug(a))),s(t,["generatedVideos"],u)}const i=o(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const r=o(e,["raiMediaFilteredReasons"]);return r!=null&&s(t,["raiMediaFilteredReasons"],r),t}function Ko(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["metadata"]);i!=null&&s(t,["metadata"],i);const r=o(e,["done"]);r!=null&&s(t,["done"],r);const u=o(e,["error"]);u!=null&&s(t,["error"],u);const a=o(e,["response"]);return a!=null&&s(t,["response"],Bg(a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hg extends dt{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let u;return i&&"httpOptions"in i&&(u=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:u}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=Dg(t);return l=J("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>Ko(h))}else{const c=Mg(t);return l=J("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Og(h))}}async fetchPredictVideosOperationInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI()){const l=Pg(t);return u=J("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>Ko(f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vg(e){const t={},n=o(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Os(e){const t={},n=o(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Vg(n)),t}function qg(e){const t={},n=o(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=o(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],Os(i)),t}function Gg(e){const t={},n=o(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>qg(r))),s(t,["speakerVoiceConfigs"],i)}return t}function Yg(e){const t={},n=o(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],Os(n));const i=o(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],Gg(i));const r=o(e,["languageCode"]);return r!=null&&s(t,["languageCode"],r),t}function zg(e){const t={},n=o(e,["fps"]);n!=null&&s(t,["fps"],n);const i=o(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const r=o(e,["startOffset"]);return r!=null&&s(t,["startOffset"],r),t}function $g(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["data"]);n!=null&&s(t,["data"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Wg(e){const t={};if(o(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=o(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=o(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Jg(e){const t={},n=o(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],zg(n));const i=o(e,["thought"]);i!=null&&s(t,["thought"],i);const r=o(e,["inlineData"]);r!=null&&s(t,["inlineData"],$g(r));const u=o(e,["fileData"]);u!=null&&s(t,["fileData"],Wg(u));const a=o(e,["thoughtSignature"]);a!=null&&s(t,["thoughtSignature"],a);const l=o(e,["codeExecutionResult"]);l!=null&&s(t,["codeExecutionResult"],l);const f=o(e,["executableCode"]);f!=null&&s(t,["executableCode"],f);const c=o(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const h=o(e,["functionResponse"]);h!=null&&s(t,["functionResponse"],h);const p=o(e,["text"]);return p!=null&&s(t,["text"],p),t}function Kg(e){const t={},n=o(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>Jg(u))),s(t,["parts"],r)}const i=o(e,["role"]);return i!=null&&s(t,["role"],i),t}function Qg(e){const t={},n=o(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=o(e,["description"]);i!=null&&s(t,["description"],i);const r=o(e,["name"]);r!=null&&s(t,["name"],r);const u=o(e,["parameters"]);u!=null&&s(t,["parameters"],u);const a=o(e,["parametersJsonSchema"]);a!=null&&s(t,["parametersJsonSchema"],a);const l=o(e,["response"]);l!=null&&s(t,["response"],l);const f=o(e,["responseJsonSchema"]);return f!=null&&s(t,["responseJsonSchema"],f),t}function Xg(e){const t={},n=o(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=o(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Zg(e){const t={},n=o(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Xg(n)),t}function jg(e){const t={},n=o(e,["mode"]);n!=null&&s(t,["mode"],n);const i=o(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function eT(e){const t={},n=o(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],jg(n)),t}function tT(){return{}}function nT(e){const t={},n=o(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Qg(c))),s(t,["functionDeclarations"],f)}if(o(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],Zg(i));const r=o(e,["googleSearchRetrieval"]);if(r!=null&&s(t,["googleSearchRetrieval"],eT(r)),o(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(e,["urlContext"])!=null&&s(t,["urlContext"],tT());const a=o(e,["codeExecution"]);a!=null&&s(t,["codeExecution"],a);const l=o(e,["computerUse"]);return l!=null&&s(t,["computerUse"],l),t}function iT(e){const t={},n=o(e,["handle"]);if(n!=null&&s(t,["handle"],n),o(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Qo(){return{}}function rT(e){const t={},n=o(e,["disabled"]);n!=null&&s(t,["disabled"],n);const i=o(e,["startOfSpeechSensitivity"]);i!=null&&s(t,["startOfSpeechSensitivity"],i);const r=o(e,["endOfSpeechSensitivity"]);r!=null&&s(t,["endOfSpeechSensitivity"],r);const u=o(e,["prefixPaddingMs"]);u!=null&&s(t,["prefixPaddingMs"],u);const a=o(e,["silenceDurationMs"]);return a!=null&&s(t,["silenceDurationMs"],a),t}function oT(e){const t={},n=o(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],rT(n));const i=o(e,["activityHandling"]);i!=null&&s(t,["activityHandling"],i);const r=o(e,["turnCoverage"]);return r!=null&&s(t,["turnCoverage"],r),t}function uT(e){const t={},n=o(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function sT(e){const t={},n=o(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const i=o(e,["slidingWindow"]);return i!=null&&s(t,["slidingWindow"],uT(i)),t}function aT(e){const t={},n=o(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function lT(e,t){const n={},i=o(e,["generationConfig"]);t!==void 0&&i!=null&&s(t,["setup","generationConfig"],i);const r=o(e,["responseModalities"]);t!==void 0&&r!=null&&s(t,["setup","generationConfig","responseModalities"],r);const u=o(e,["temperature"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","temperature"],u);const a=o(e,["topP"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","topP"],a);const l=o(e,["topK"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","topK"],l);const f=o(e,["maxOutputTokens"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","maxOutputTokens"],f);const c=o(e,["mediaResolution"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","mediaResolution"],c);const h=o(e,["seed"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","seed"],h);const p=o(e,["speechConfig"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","speechConfig"],Yg(er(p)));const m=o(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],Kg(Ae(g)));const E=o(e,["tools"]);if(t!==void 0&&E!=null){let w=Pt(E);Array.isArray(w)&&(w=w.map(N=>nT(Dt(N)))),s(t,["setup","tools"],w)}const A=o(e,["sessionResumption"]);t!==void 0&&A!=null&&s(t,["setup","sessionResumption"],iT(A));const R=o(e,["inputAudioTranscription"]);t!==void 0&&R!=null&&s(t,["setup","inputAudioTranscription"],Qo());const I=o(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&s(t,["setup","outputAudioTranscription"],Qo());const M=o(e,["realtimeInputConfig"]);t!==void 0&&M!=null&&s(t,["setup","realtimeInputConfig"],oT(M));const k=o(e,["contextWindowCompression"]);t!==void 0&&k!=null&&s(t,["setup","contextWindowCompression"],sT(k));const O=o(e,["proactivity"]);return t!==void 0&&O!=null&&s(t,["setup","proactivity"],aT(O)),n}function cT(e,t){const n={},i=o(t,["model"]);i!=null&&s(n,["setup","model"],se(e,i));const r=o(t,["config"]);return r!=null&&s(n,["config"],lT(r,n)),n}function fT(e,t,n){const i={},r=o(t,["expireTime"]);n!==void 0&&r!=null&&s(n,["expireTime"],r);const u=o(t,["newSessionExpireTime"]);n!==void 0&&u!=null&&s(n,["newSessionExpireTime"],u);const a=o(t,["uses"]);n!==void 0&&a!=null&&s(n,["uses"],a);const l=o(t,["liveConnectConstraints"]);n!==void 0&&l!=null&&s(n,["bidiGenerateContentSetup"],cT(e,l));const f=o(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&s(n,["fieldMask"],f),i}function dT(e,t){const n={},i=o(t,["config"]);return i!=null&&s(n,["config"],fT(e,i,n)),n}function hT(e){const t={},n=o(e,["name"]);return n!=null&&s(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pT(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(u=>`${n}.${u}`);t.push(...r)}else t.push(n)}return t.join(",")}function mT(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const u=i.setup;typeof u=="object"&&u!==null?(e.bidiGenerateContentSetup=u,n=u):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const u=pT(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)u?e.fieldMask=u:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(c=>a.includes(c)?`generationConfig.${c}`:c));const f=[];u&&f.push(u),l.length>0&&f.push(...l),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class gT extends dt{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=dT(this.apiClient,t);u=J("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const f=mT(l,t.config);return r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>hT(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(e){const t={},n=o(e,["name"]);n!=null&&s(t,["_url","name"],n);const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function ET(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);t!==void 0&&r!=null&&s(t,["_query","pageToken"],r);const u=o(e,["filter"]);return t!==void 0&&u!=null&&s(t,["_query","filter"],u),n}function CT(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],ET(n,t)),t}function yT(e){const t={},n=o(e,["textInput"]);n!=null&&s(t,["textInput"],n);const i=o(e,["output"]);return i!=null&&s(t,["output"],i),t}function _T(e){const t={};if(o(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=o(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>yT(r))),s(t,["examples","examples"],i)}return t}function AT(e,t){const n={};if(o(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=o(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&s(t,["displayName"],i),o(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=o(e,["epochCount"]);t!==void 0&&r!=null&&s(t,["tuningTask","hyperparameters","epochCount"],r);const u=o(e,["learningRateMultiplier"]);if(u!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],u),o(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(o(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=o(e,["batchSize"]);t!==void 0&&a!=null&&s(t,["tuningTask","hyperparameters","batchSize"],a);const l=o(e,["learningRate"]);return t!==void 0&&l!=null&&s(t,["tuningTask","hyperparameters","learningRate"],l),n}function ST(e){const t={},n=o(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const i=o(e,["trainingDataset"]);i!=null&&s(t,["tuningTask","trainingData"],_T(i));const r=o(e,["config"]);return r!=null&&s(t,["config"],AT(r,t)),t}function IT(e){const t={},n=o(e,["name"]);n!=null&&s(t,["_url","name"],n);const i=o(e,["config"]);return i!=null&&s(t,["config"],i),t}function bT(e,t){const n={},i=o(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const r=o(e,["pageToken"]);t!==void 0&&r!=null&&s(t,["_query","pageToken"],r);const u=o(e,["filter"]);return t!==void 0&&u!=null&&s(t,["_query","filter"],u),n}function xT(e){const t={},n=o(e,["config"]);return n!=null&&s(t,["config"],bT(n,t)),t}function NT(e,t){const n={},i=o(e,["gcsUri"]);t!==void 0&&i!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],i);const r=o(e,["vertexDatasetResource"]);if(t!==void 0&&r!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],r),o(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function RT(e,t){const n={},i=o(e,["gcsUri"]);i!=null&&s(n,["validationDatasetUri"],i);const r=o(e,["vertexDatasetResource"]);return t!==void 0&&r!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],r),n}function kT(e,t){const n={},i=o(e,["validationDataset"]);t!==void 0&&i!=null&&s(t,["supervisedTuningSpec"],RT(i,n));const r=o(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&s(t,["tunedModelDisplayName"],r);const u=o(e,["description"]);t!==void 0&&u!=null&&s(t,["description"],u);const a=o(e,["epochCount"]);t!==void 0&&a!=null&&s(t,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=o(e,["learningRateMultiplier"]);t!==void 0&&l!=null&&s(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const f=o(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&s(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const c=o(e,["adapterSize"]);if(t!==void 0&&c!=null&&s(t,["supervisedTuningSpec","hyperParameters","adapterSize"],c),o(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(o(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function MT(e){const t={},n=o(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const i=o(e,["trainingDataset"]);i!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],NT(i,t));const r=o(e,["config"]);return r!=null&&s(t,["config"],kT(r,t)),t}function DT(e){const t={},n=o(e,["name"]);n!=null&&s(t,["model"],n);const i=o(e,["name"]);return i!=null&&s(t,["endpoint"],i),t}function Fs(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["state"]);i!=null&&s(t,["state"],ps(i));const r=o(e,["createTime"]);r!=null&&s(t,["createTime"],r);const u=o(e,["tuningTask","startTime"]);u!=null&&s(t,["startTime"],u);const a=o(e,["tuningTask","completeTime"]);a!=null&&s(t,["endTime"],a);const l=o(e,["updateTime"]);l!=null&&s(t,["updateTime"],l);const f=o(e,["description"]);f!=null&&s(t,["description"],f);const c=o(e,["baseModel"]);c!=null&&s(t,["baseModel"],c);const h=o(e,["_self"]);h!=null&&s(t,["tunedModel"],DT(h));const p=o(e,["distillationSpec"]);p!=null&&s(t,["distillationSpec"],p);const m=o(e,["experiment"]);m!=null&&s(t,["experiment"],m);const g=o(e,["labels"]);g!=null&&s(t,["labels"],g);const E=o(e,["pipelineJob"]);E!=null&&s(t,["pipelineJob"],E);const A=o(e,["satisfiesPzi"]);A!=null&&s(t,["satisfiesPzi"],A);const R=o(e,["satisfiesPzs"]);R!=null&&s(t,["satisfiesPzs"],R);const I=o(e,["serviceAccount"]);I!=null&&s(t,["serviceAccount"],I);const M=o(e,["tunedModelDisplayName"]);return M!=null&&s(t,["tunedModelDisplayName"],M),t}function PT(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["tunedModels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Fs(u))),s(t,["tuningJobs"],r)}return t}function vT(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["metadata"]);i!=null&&s(t,["metadata"],i);const r=o(e,["done"]);r!=null&&s(t,["done"],r);const u=o(e,["error"]);return u!=null&&s(t,["error"],u),t}function LT(e){const t={},n=o(e,["checkpointId"]);n!=null&&s(t,["checkpointId"],n);const i=o(e,["epoch"]);i!=null&&s(t,["epoch"],i);const r=o(e,["step"]);r!=null&&s(t,["step"],r);const u=o(e,["endpoint"]);return u!=null&&s(t,["endpoint"],u),t}function wT(e){const t={},n=o(e,["model"]);n!=null&&s(t,["model"],n);const i=o(e,["endpoint"]);i!=null&&s(t,["endpoint"],i);const r=o(e,["checkpoints"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(a=>LT(a))),s(t,["checkpoints"],u)}return t}function Li(e){const t={},n=o(e,["name"]);n!=null&&s(t,["name"],n);const i=o(e,["state"]);i!=null&&s(t,["state"],ps(i));const r=o(e,["createTime"]);r!=null&&s(t,["createTime"],r);const u=o(e,["startTime"]);u!=null&&s(t,["startTime"],u);const a=o(e,["endTime"]);a!=null&&s(t,["endTime"],a);const l=o(e,["updateTime"]);l!=null&&s(t,["updateTime"],l);const f=o(e,["error"]);f!=null&&s(t,["error"],f);const c=o(e,["description"]);c!=null&&s(t,["description"],c);const h=o(e,["baseModel"]);h!=null&&s(t,["baseModel"],h);const p=o(e,["tunedModel"]);p!=null&&s(t,["tunedModel"],wT(p));const m=o(e,["supervisedTuningSpec"]);m!=null&&s(t,["supervisedTuningSpec"],m);const g=o(e,["tuningDataStats"]);g!=null&&s(t,["tuningDataStats"],g);const E=o(e,["encryptionSpec"]);E!=null&&s(t,["encryptionSpec"],E);const A=o(e,["partnerModelTuningSpec"]);A!=null&&s(t,["partnerModelTuningSpec"],A);const R=o(e,["distillationSpec"]);R!=null&&s(t,["distillationSpec"],R);const I=o(e,["experiment"]);I!=null&&s(t,["experiment"],I);const M=o(e,["labels"]);M!=null&&s(t,["labels"],M);const k=o(e,["pipelineJob"]);k!=null&&s(t,["pipelineJob"],k);const O=o(e,["satisfiesPzi"]);O!=null&&s(t,["satisfiesPzi"],O);const w=o(e,["satisfiesPzs"]);w!=null&&s(t,["satisfiesPzs"],w);const N=o(e,["serviceAccount"]);N!=null&&s(t,["serviceAccount"],N);const q=o(e,["tunedModelDisplayName"]);return q!=null&&s(t,["tunedModelDisplayName"],q),t}function OT(e){const t={},n=o(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=o(e,["tuningJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Li(u))),s(t,["tuningJobs"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FT extends dt{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new hn(ct.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:Ii.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=IT(t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>Li(h))}else{const c=TT(t);return l=J("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>Fs(h))}}async listInternal(t){var n,i,r,u;let a,l="",f={};if(this.apiClient.isVertexAI()){const c=xT(t);return l=J("tuningJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=OT(h),m=new bo;return Object.assign(m,p),m})}else{const c=CT(t);return l=J("tunedModels",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(h=>h.json()),a.then(h=>{const p=PT(h),m=new bo;return Object.assign(m,p),m})}}async tuneInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI()){const l=MT(t);return u=J("tuningJobs",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>Li(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let r,u="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ST(t);return u=J("tunedModels",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>vT(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UT{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const BT=1024*1024*8,HT=3,VT=1e3,qT=2,ri="x-goog-upload-status";async function GT(e,t,n){var i,r,u;let a=0,l=0,f=new bi(new Response),c="upload";for(a=e.size;l<a;){const p=Math.min(BT,a-l),m=e.slice(l,l+p);l+p>=a&&(c+=", finalize");let g=0,E=VT;for(;g<HT&&(f=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[ri]));)g++,await zT(E),E=E*qT;if(l+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[ri])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(f==null?void 0:f.json());if(((u=f==null?void 0:f.headers)===null||u===void 0?void 0:u[ri])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function YT(e){return{size:e.size,type:e.type}}function zT(e){return new Promise(t=>setTimeout(t,e))}class $T{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await GT(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await YT(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WT{create(t,n,i){return new JT(t,n,i)}}class JT{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xo="x-goog-api-key";class KT{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(Xo)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Xo,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QT="gl-node/";class N2{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=Wl(t,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const r=new KT(this.apiKey);this.apiClient=new cg({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:QT+"web",uploader:new $T,downloader:new UT}),this.models=new kg(this.apiClient),this.live=new Ig(this.apiClient,r,new WT),this.batches=new Tf(this.apiClient),this.chats=new _d(this.models,this.apiClient),this.caches=new Ed(this.apiClient),this.files=new Ld(this.apiClient),this.operations=new Hg(this.apiClient),this.authTokens=new gT(this.apiClient),this.tunings=new FT(this.apiClient)}}function R2(){}function Zo(e){const t=[],n=String(e||"");let i=n.indexOf(","),r=0,u=!1;for(;!u;){i===-1&&(i=n.length,u=!0);const a=n.slice(r,i).trim();(a||!u)&&t.push(a),r=i+1,i=n.indexOf(",",r)}return t}function Us(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const XT=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZT=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jT={};function jo(e,t){return(jT.jsx?ZT:XT).test(e)}const eE=/[ \t\n\f\r]/g;function tE(e){return typeof e=="object"?e.type==="text"?eu(e.value):!1:eu(e)}function eu(e){return e.replace(eE,"")===""}let pn=class{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}};pn.prototype.normal={};pn.prototype.property={};pn.prototype.space=void 0;function Bs(e,t){const n={},i={};for(const r of e)Object.assign(n,r.property),Object.assign(i,r.normal);return new pn(n,i,t)}function ln(e){return e.toLowerCase()}let Me=class{constructor(t,n){this.attribute=n,this.property=t}};Me.prototype.attribute="";Me.prototype.booleanish=!1;Me.prototype.boolean=!1;Me.prototype.commaOrSpaceSeparated=!1;Me.prototype.commaSeparated=!1;Me.prototype.defined=!1;Me.prototype.mustUseProperty=!1;Me.prototype.number=!1;Me.prototype.overloadedBoolean=!1;Me.prototype.property="";Me.prototype.spaceSeparated=!1;Me.prototype.space=void 0;let nE=0;const te=ht(),me=ht(),wi=ht(),U=ht(),ce=ht(),xt=ht(),Pe=ht();function ht(){return 2**++nE}const Oi=Object.freeze(Object.defineProperty({__proto__:null,boolean:te,booleanish:me,commaOrSpaceSeparated:Pe,commaSeparated:xt,number:U,overloadedBoolean:wi,spaceSeparated:ce},Symbol.toStringTag,{value:"Module"})),oi=Object.keys(Oi);let rr=class extends Me{constructor(t,n,i,r){let u=-1;if(super(t,n),tu(this,"space",r),typeof i=="number")for(;++u<oi.length;){const a=oi[u];tu(this,oi[u],(i&Oi[a])===Oi[a])}}};rr.prototype.defined=!0;function tu(e,t,n){n&&(e[t]=n)}function wt(e){const t={},n={};for(const[i,r]of Object.entries(e.properties)){const u=new rr(i,e.transform(e.attributes||{},i),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(u.mustUseProperty=!0),t[i]=u,n[ln(i)]=i,n[ln(u.attribute)]=i}return new pn(t,n,e.space)}const Hs=wt({properties:{ariaActiveDescendant:null,ariaAtomic:me,ariaAutoComplete:null,ariaBusy:me,ariaChecked:me,ariaColCount:U,ariaColIndex:U,ariaColSpan:U,ariaControls:ce,ariaCurrent:null,ariaDescribedBy:ce,ariaDetails:null,ariaDisabled:me,ariaDropEffect:ce,ariaErrorMessage:null,ariaExpanded:me,ariaFlowTo:ce,ariaGrabbed:me,ariaHasPopup:null,ariaHidden:me,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ce,ariaLevel:U,ariaLive:null,ariaModal:me,ariaMultiLine:me,ariaMultiSelectable:me,ariaOrientation:null,ariaOwns:ce,ariaPlaceholder:null,ariaPosInSet:U,ariaPressed:me,ariaReadOnly:me,ariaRelevant:null,ariaRequired:me,ariaRoleDescription:ce,ariaRowCount:U,ariaRowIndex:U,ariaRowSpan:U,ariaSelected:me,ariaSetSize:U,ariaSort:null,ariaValueMax:U,ariaValueMin:U,ariaValueNow:U,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Vs(e,t){return t in e?e[t]:t}function qs(e,t){return Vs(e,t.toLowerCase())}const iE=wt({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xt,acceptCharset:ce,accessKey:ce,action:null,allow:null,allowFullScreen:te,allowPaymentRequest:te,allowUserMedia:te,alt:null,as:null,async:te,autoCapitalize:null,autoComplete:ce,autoFocus:te,autoPlay:te,blocking:ce,capture:null,charSet:null,checked:te,cite:null,className:ce,cols:U,colSpan:null,content:null,contentEditable:me,controls:te,controlsList:ce,coords:U|xt,crossOrigin:null,data:null,dateTime:null,decoding:null,default:te,defer:te,dir:null,dirName:null,disabled:te,download:wi,draggable:me,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:te,formTarget:null,headers:ce,height:U,hidden:wi,high:U,href:null,hrefLang:null,htmlFor:ce,httpEquiv:ce,id:null,imageSizes:null,imageSrcSet:null,inert:te,inputMode:null,integrity:null,is:null,isMap:te,itemId:null,itemProp:ce,itemRef:ce,itemScope:te,itemType:ce,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:te,low:U,manifest:null,max:null,maxLength:U,media:null,method:null,min:null,minLength:U,multiple:te,muted:te,name:null,nonce:null,noModule:te,noValidate:te,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:te,optimum:U,pattern:null,ping:ce,placeholder:null,playsInline:te,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:te,referrerPolicy:null,rel:ce,required:te,reversed:te,rows:U,rowSpan:U,sandbox:ce,scope:null,scoped:te,seamless:te,selected:te,shadowRootClonable:te,shadowRootDelegatesFocus:te,shadowRootMode:null,shape:null,size:U,sizes:null,slot:null,span:U,spellCheck:me,src:null,srcDoc:null,srcLang:null,srcSet:null,start:U,step:null,style:null,tabIndex:U,target:null,title:null,translate:null,type:null,typeMustMatch:te,useMap:null,value:me,width:U,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ce,axis:null,background:null,bgColor:null,border:U,borderColor:null,bottomMargin:U,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:te,declare:te,event:null,face:null,frame:null,frameBorder:null,hSpace:U,leftMargin:U,link:null,longDesc:null,lowSrc:null,marginHeight:U,marginWidth:U,noResize:te,noHref:te,noShade:te,noWrap:te,object:null,profile:null,prompt:null,rev:null,rightMargin:U,rules:null,scheme:null,scrolling:me,standby:null,summary:null,text:null,topMargin:U,valueType:null,version:null,vAlign:null,vLink:null,vSpace:U,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:te,disableRemotePlayback:te,prefix:null,property:null,results:U,security:null,unselectable:null},space:"html",transform:qs}),rE=wt({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Pe,accentHeight:U,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:U,amplitude:U,arabicForm:null,ascent:U,attributeName:null,attributeType:null,azimuth:U,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:U,by:null,calcMode:null,capHeight:U,className:ce,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:U,diffuseConstant:U,direction:null,display:null,dur:null,divisor:U,dominantBaseline:null,download:te,dx:null,dy:null,edgeMode:null,editable:null,elevation:U,enableBackground:null,end:null,event:null,exponent:U,externalResourcesRequired:null,fill:null,fillOpacity:U,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xt,g2:xt,glyphName:xt,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:U,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:U,horizOriginX:U,horizOriginY:U,id:null,ideographic:U,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:U,k:U,k1:U,k2:U,k3:U,k4:U,kernelMatrix:Pe,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:U,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:U,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:U,overlineThickness:U,paintOrder:null,panose1:null,path:null,pathLength:U,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ce,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:U,pointsAtY:U,pointsAtZ:U,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pe,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pe,rev:Pe,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pe,requiredFeatures:Pe,requiredFonts:Pe,requiredFormats:Pe,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:U,specularExponent:U,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:U,strikethroughThickness:U,string:null,stroke:null,strokeDashArray:Pe,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:U,strokeOpacity:U,strokeWidth:null,style:null,surfaceScale:U,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pe,tabIndex:U,tableValues:null,target:null,targetX:U,targetY:U,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pe,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:U,underlineThickness:U,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:U,values:null,vAlphabetic:U,vMathematical:U,vectorEffect:null,vHanging:U,vIdeographic:U,version:null,vertAdvY:U,vertOriginX:U,vertOriginY:U,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:U,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Vs}),Gs=wt({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ys=wt({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qs}),zs=wt({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),oE=/[A-Z]/g,nu=/-[a-z]/g,uE=/^data[-\w.:]+$/i;function or(e,t){const n=ln(t);let i=t,r=Me;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&uE.test(t)){if(t.charAt(4)==="-"){const u=t.slice(5).replace(nu,aE);i="data"+u.charAt(0).toUpperCase()+u.slice(1)}else{const u=t.slice(4);if(!nu.test(u)){let a=u.replace(oE,sE);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}r=rr}return new r(i,t)}function sE(e){return"-"+e.toLowerCase()}function aE(e){return e.charAt(1).toUpperCase()}const zn=Bs([Hs,iE,Gs,Ys,zs],"html"),Ot=Bs([Hs,rE,Gs,Ys,zs],"svg");function iu(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function $s(e){return e.join(" ").trim()}var Ct={},ui,ru;function lE(){if(ru)return ui;ru=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,u=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,f=`
`,c="/",h="*",p="",m="comment",g="declaration";ui=function(A,R){if(typeof A!="string")throw new TypeError("First argument must be a string");if(!A)return[];R=R||{};var I=1,M=1;function k($){var z=$.match(t);z&&(I+=z.length);var W=$.lastIndexOf(f);M=~W?$.length-W:M+$.length}function O(){var $={line:I,column:M};return function(z){return z.position=new w($),Z(),z}}function w($){this.start=$,this.end={line:I,column:M},this.source=R.source}w.prototype.content=A;function N($){var z=new Error(R.source+":"+I+":"+M+": "+$);if(z.reason=$,z.filename=R.source,z.line=I,z.column=M,z.source=A,!R.silent)throw z}function q($){var z=$.exec(A);if(z){var W=z[0];return k(W),A=A.slice(W.length),z}}function Z(){q(n)}function G($){var z;for($=$||[];z=x();)z!==!1&&$.push(z);return $}function x(){var $=O();if(!(c!=A.charAt(0)||h!=A.charAt(1))){for(var z=2;p!=A.charAt(z)&&(h!=A.charAt(z)||c!=A.charAt(z+1));)++z;if(z+=2,p===A.charAt(z-1))return N("End of comment missing");var W=A.slice(2,z-2);return M+=2,k(W),A=A.slice(z),M+=2,$({type:m,comment:W})}}function F(){var $=O(),z=q(i);if(z){if(x(),!q(r))return N("property missing ':'");var W=q(u),H=$({type:g,property:E(z[0].replace(e,p)),value:W?E(W[0].replace(e,p)):p});return q(a),H}}function Y(){var $=[];G($);for(var z;z=F();)z!==!1&&($.push(z),G($));return $}return Z(),Y()};function E(A){return A?A.replace(l,p):p}return ui}var ou;function cE(){if(ou)return Ct;ou=1;var e=Ct&&Ct.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=n;var t=e(lE());function n(i,r){var u=null;if(!i||typeof i!="string")return u;var a=(0,t.default)(i),l=typeof r=="function";return a.forEach(function(f){if(f.type==="declaration"){var c=f.property,h=f.value;l?r(c,h,f):h&&(u=u||{},u[c]=h)}}),u}return Ct}var $t={},uu;function fE(){if(uu)return $t;uu=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,u=function(c){return!c||n.test(c)||e.test(c)},a=function(c,h){return h.toUpperCase()},l=function(c,h){return"".concat(h,"-")},f=function(c,h){return h===void 0&&(h={}),u(c)?c:(c=c.toLowerCase(),h.reactCompat?c=c.replace(r,l):c=c.replace(i,l),c.replace(t,a))};return $t.camelCase=f,$t}var Wt,su;function dE(){if(su)return Wt;su=1;var e=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},t=e(cE()),n=fE();function i(r,u){var a={};return!r||typeof r!="string"||(0,t.default)(r,function(l,f){l&&f&&(a[(0,n.camelCase)(l,u)]=f)}),a}return i.default=i,Wt=i,Wt}var hE=dE();const pE=ss(hE),$n=Ws("end"),ze=Ws("start");function Ws(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function mE(e){const t=ze(e),n=$n(e);if(t&&n)return{start:t,end:n}}function en(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?au(e.position):"start"in e||"end"in e?au(e):"line"in e||"column"in e?Fi(e):""}function Fi(e){return lu(e&&e.line)+":"+lu(e&&e.column)}function au(e){return Fi(e&&e.start)+"-"+Fi(e&&e.end)}function lu(e){return e&&typeof e=="number"?e:1}class Ie extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",u={},a=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof t=="string"?r=t:!u.cause&&t&&(a=!0,r=t.message,u.cause=t),!u.ruleId&&!u.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?u.ruleId=i:(u.source=i.slice(0,f),u.ruleId=i.slice(f+1))}if(!u.place&&u.ancestors&&u.ancestors){const f=u.ancestors[u.ancestors.length-1];f&&(u.place=f.position)}const l=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=l?l.line:void 0,this.name=en(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=a&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ie.prototype.file="";Ie.prototype.name="";Ie.prototype.reason="";Ie.prototype.message="";Ie.prototype.stack="";Ie.prototype.column=void 0;Ie.prototype.line=void 0;Ie.prototype.ancestors=void 0;Ie.prototype.cause=void 0;Ie.prototype.fatal=void 0;Ie.prototype.place=void 0;Ie.prototype.ruleId=void 0;Ie.prototype.source=void 0;const ur={}.hasOwnProperty,gE=new Map,TE=/[A-Z]/g,EE=new Set(["table","tbody","thead","tfoot","tr"]),CE=new Set(["td","th"]),Js="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function P2(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=NE(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=xE(n,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ot:zn,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},u=Ks(r,e,void 0);return u&&typeof u!="string"?u:r.create(e,r.Fragment,{children:u||void 0},void 0)}function Ks(e,t,n){if(t.type==="element")return yE(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return _E(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return SE(e,t,n);if(t.type==="mdxjsEsm")return AE(e,t);if(t.type==="root")return IE(e,t,n);if(t.type==="text")return bE(e,t)}function yE(e,t,n){const i=e.schema;let r=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Ot,e.schema=r),e.ancestors.push(t);const u=Xs(e,t.tagName,!1),a=RE(e,t);let l=ar(e,t);return EE.has(t.tagName)&&(l=l.filter(function(f){return typeof f=="string"?!tE(f):!0})),Qs(e,a,u,t),sr(a,l),e.ancestors.pop(),e.schema=i,e.create(t,u,a,n)}function _E(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}cn(e,t.position)}function AE(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);cn(e,t.position)}function SE(e,t,n){const i=e.schema;let r=i;t.name==="svg"&&i.space==="html"&&(r=Ot,e.schema=r),e.ancestors.push(t);const u=t.name===null?e.Fragment:Xs(e,t.name,!0),a=kE(e,t),l=ar(e,t);return Qs(e,a,u,t),sr(a,l),e.ancestors.pop(),e.schema=i,e.create(t,u,a,n)}function IE(e,t,n){const i={};return sr(i,ar(e,t)),e.create(t,e.Fragment,i,n)}function bE(e,t){return t.value}function Qs(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function sr(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function xE(e,t,n){return i;function i(r,u,a,l){const c=Array.isArray(a.children)?n:t;return l?c(u,a,l):c(u,a)}}function NE(e,t){return n;function n(i,r,u,a){const l=Array.isArray(u.children),f=ze(i);return t(r,u,a,l,{columnNumber:f?f.column-1:void 0,fileName:e,lineNumber:f?f.line:void 0},void 0)}}function RE(e,t){const n={};let i,r;for(r in t.properties)if(r!=="children"&&ur.call(t.properties,r)){const u=ME(e,r,t.properties[r]);if(u){const[a,l]=u;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&CE.has(t.tagName)?i=l:n[a]=l}}if(i){const u=n.style||(n.style={});u[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function kE(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const u=i.data.estree.body[0];u.type;const a=u.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else cn(e,t.position);else{const r=i.name;let u;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const l=i.value.data.estree.body[0];l.type,u=e.evaluater.evaluateExpression(l.expression)}else cn(e,t.position);else u=i.value===null?!0:i.value;n[r]=u}return n}function ar(e,t){const n=[];let i=-1;const r=e.passKeys?new Map:gE;for(;++i<t.children.length;){const u=t.children[i];let a;if(e.passKeys){const f=u.type==="element"?u.tagName:u.type==="mdxJsxFlowElement"||u.type==="mdxJsxTextElement"?u.name:void 0;if(f){const c=r.get(f)||0;a=f+"-"+c,r.set(f,c+1)}}const l=Ks(e,u,a);l!==void 0&&n.push(l)}return n}function ME(e,t,n){const i=or(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?Us(n):$s(n)),i.property==="style"){let r=typeof n=="object"?n:DE(e,String(n));return e.stylePropertyNameCase==="css"&&(r=PE(r)),["style",r]}return[e.elementAttributeNameCase==="react"&&i.space?ql[i.property]||i.property:i.attribute,n]}}function DE(e,t){try{return pE(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,r=new Ie("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=Js+"#cannot-parse-style-attribute",r}}function Xs(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let u=-1,a;for(;++u<r.length;){const l=jo(r[u])?{type:"Identifier",name:r[u]}:{type:"Literal",value:r[u]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(u&&l.type==="Literal"),optional:!1}:l}i=a}else i=jo(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const r=i.value;return ur.call(e.components,r)?e.components[r]:r}if(e.evaluater)return e.evaluater.evaluateExpression(i);cn(e)}function cn(e,t){const n=new Ie("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Js+"#cannot-handle-mdx-estrees-without-createevaluater",n}function PE(e){const t={};let n;for(n in e)ur.call(e,n)&&(t[vE(n)]=e[n]);return t}function vE(e){let t=e.replace(TE,LE);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function LE(e){return"-"+e.toLowerCase()}const v2={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wE={};function lr(e,t){const n=wE,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Zs(e,i,r)}function Zs(e,t,n){if(OE(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return cu(e.children,t,n)}return Array.isArray(e)?cu(e,t,n):""}function cu(e,t,n){const i=[];let r=-1;for(;++r<e.length;)i[r]=Zs(e[r],t,n);return i.join("")}function OE(e){return!!(e&&typeof e=="object")}const fu=document.createElement("i");function cr(e){const t="&"+e+";";fu.innerHTML=t;const n=fu.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Le(e,t,n,i){const r=e.length;let u=0,a;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);u<i.length;)a=i.slice(u,u+1e4),a.unshift(t,0),e.splice(...a),u+=1e4,t+=1e4}function Oe(e,t){return e.length>0?(Le(e,e.length,0,t),e):t}const du={}.hasOwnProperty;function js(e){const t={};let n=-1;for(;++n<e.length;)FE(t,e[n]);return t}function FE(e,t){let n;for(n in t){const r=(du.call(e,n)?e[n]:void 0)||(e[n]={}),u=t[n];let a;if(u)for(a in u){du.call(r,a)||(r[a]=[]);const l=u[a];UE(r[a],Array.isArray(l)?l:l?[l]:[])}}}function UE(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Le(e,0,0,i)}function ea(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ve(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xe=ot(/[A-Za-z]/),Se=ot(/[\dA-Za-z]/),BE=ot(/[#-'*+\--9=?A-Z^-~]/);function On(e){return e!==null&&(e<32||e===127)}const Ui=ot(/\d/),HE=ot(/[\dA-Fa-f]/),VE=ot(/[!-/:-@[-`{-~]/);function Q(e){return e!==null&&e<-2}function le(e){return e!==null&&(e<0||e===32)}function ie(e){return e===-2||e===-1||e===32}const Wn=ot(new RegExp("\\p{P}|\\p{S}","u")),ft=ot(/\s/);function ot(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ft(e){const t=[];let n=-1,i=0,r=0;for(;++n<e.length;){const u=e.charCodeAt(n);let a="";if(u===37&&Se(e.charCodeAt(n+1))&&Se(e.charCodeAt(n+2)))r=2;else if(u<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(u))||(a=String.fromCharCode(u));else if(u>55295&&u<57344){const l=e.charCodeAt(n+1);u<56320&&l>56319&&l<57344?(a=String.fromCharCode(u,l),r=1):a=""}else a=String.fromCharCode(u);a&&(t.push(e.slice(i,n),encodeURIComponent(a)),i=n+r+1,a=""),r&&(n+=r,r=0)}return t.join("")+e.slice(i)}function oe(e,t,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let u=0;return a;function a(f){return ie(f)?(e.enter(n),l(f)):t(f)}function l(f){return ie(f)&&u++<r?(e.consume(f),l):(e.exit(n),t(f))}}const qE={tokenize:GE};function GE(e){const t=e.attempt(this.parser.constructs.contentInitial,i,r);let n;return t;function i(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),oe(e,t,"linePrefix")}function r(l){return e.enter("paragraph"),u(l)}function u(l){const f=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Q(l)?(e.consume(l),e.exit("chunkText"),u):(e.consume(l),a)}}const YE={tokenize:zE},hu={tokenize:$E};function zE(e){const t=this,n=[];let i=0,r,u,a;return l;function l(k){if(i<n.length){const O=n[i];return t.containerState=O[1],e.attempt(O[0].continuation,f,c)(k)}return c(k)}function f(k){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&M();const O=t.events.length;let w=O,N;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){N=t.events[w][1].end;break}I(i);let q=O;for(;q<t.events.length;)t.events[q][1].end={...N},q++;return Le(t.events,w+1,0,t.events.slice(O)),t.events.length=q,c(k)}return l(k)}function c(k){if(i===n.length){if(!r)return m(k);if(r.currentConstruct&&r.currentConstruct.concrete)return E(k);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(hu,h,p)(k)}function h(k){return r&&M(),I(i),m(k)}function p(k){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,E(k)}function m(k){return t.containerState={},e.attempt(hu,g,E)(k)}function g(k){return i++,n.push([t.currentConstruct,t.containerState]),m(k)}function E(k){if(k===null){r&&M(),I(0),e.consume(k);return}return r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:u}),A(k)}function A(k){if(k===null){R(e.exit("chunkFlow"),!0),I(0),e.consume(k);return}return Q(k)?(e.consume(k),R(e.exit("chunkFlow")),i=0,t.interrupt=void 0,l):(e.consume(k),A)}function R(k,O){const w=t.sliceStream(k);if(O&&w.push(null),k.previous=u,u&&(u.next=k),u=k,r.defineSkip(k.start),r.write(w),t.parser.lazy[k.start.line]){let N=r.events.length;for(;N--;)if(r.events[N][1].start.offset<a&&(!r.events[N][1].end||r.events[N][1].end.offset>a))return;const q=t.events.length;let Z=q,G,x;for(;Z--;)if(t.events[Z][0]==="exit"&&t.events[Z][1].type==="chunkFlow"){if(G){x=t.events[Z][1].end;break}G=!0}for(I(i),N=q;N<t.events.length;)t.events[N][1].end={...x},N++;Le(t.events,Z+1,0,t.events.slice(q)),t.events.length=N}}function I(k){let O=n.length;for(;O-- >k;){const w=n[O];t.containerState=w[1],w[0].exit.call(t,e)}n.length=k}function M(){r.write([null]),u=void 0,r=void 0,t.containerState._closeFlow=void 0}}function $E(e,t,n){return oe(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rt(e){if(e===null||le(e)||ft(e))return 1;if(Wn(e))return 2}function Jn(e,t,n){const i=[];let r=-1;for(;++r<e.length;){const u=e[r].resolveAll;u&&!i.includes(u)&&(t=u(t,n),i.push(u))}return t}const Bi={name:"attention",resolveAll:WE,tokenize:JE};function WE(e,t){let n=-1,i,r,u,a,l,f,c,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;f=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[i][1].end},m={...e[n][1].start};pu(p,-f),pu(m,f),a={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...e[i][1].end}},l={type:f>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},u={type:f>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},r={type:f>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[i][1].end={...a.start},e[n][1].start={...l.end},c=[],e[i][1].end.offset-e[i][1].start.offset&&(c=Oe(c,[["enter",e[i][1],t],["exit",e[i][1],t]])),c=Oe(c,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",u,t]]),c=Oe(c,Jn(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),c=Oe(c,[["exit",u,t],["enter",l,t],["exit",l,t],["exit",r,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,c=Oe(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Le(e,i-1,n-i+3,c),n=i+c.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function JE(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Rt(i);let u;return a;function a(f){return u=f,e.enter("attentionSequence"),l(f)}function l(f){if(f===u)return e.consume(f),l;const c=e.exit("attentionSequence"),h=Rt(f),p=!h||h===2&&r||n.includes(f),m=!r||r===2&&h||n.includes(i);return c._open=!!(u===42?p:p&&(r||!m)),c._close=!!(u===42?m:m&&(h||!p)),t(f)}}function pu(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const KE={name:"autolink",tokenize:QE};function QE(e,t,n){let i=0;return r;function r(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),u}function u(g){return xe(g)?(e.consume(g),a):g===64?n(g):c(g)}function a(g){return g===43||g===45||g===46||Se(g)?(i=1,l(g)):c(g)}function l(g){return g===58?(e.consume(g),i=0,f):(g===43||g===45||g===46||Se(g))&&i++<32?(e.consume(g),l):(i=0,c(g))}function f(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||On(g)?n(g):(e.consume(g),f)}function c(g){return g===64?(e.consume(g),h):BE(g)?(e.consume(g),c):n(g)}function h(g){return Se(g)?p(g):n(g)}function p(g){return g===46?(e.consume(g),i=0,h):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||Se(g))&&i++<63){const E=g===45?m:p;return e.consume(g),E}return n(g)}}const mn={partial:!0,tokenize:XE};function XE(e,t,n){return i;function i(u){return ie(u)?oe(e,r,"linePrefix")(u):r(u)}function r(u){return u===null||Q(u)?t(u):n(u)}}const ta={continuation:{tokenize:jE},exit:e1,name:"blockQuote",tokenize:ZE};function ZE(e,t,n){const i=this;return r;function r(a){if(a===62){const l=i.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),u}return n(a)}function u(a){return ie(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function jE(e,t,n){const i=this;return r;function r(a){return ie(a)?oe(e,u,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):u(a)}function u(a){return e.attempt(ta,t,n)(a)}}function e1(e){e.exit("blockQuote")}const na={name:"characterEscape",tokenize:t1};function t1(e,t,n){return i;function i(u){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(u),e.exit("escapeMarker"),r}function r(u){return VE(u)?(e.enter("characterEscapeValue"),e.consume(u),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(u)}}const ia={name:"characterReference",tokenize:n1};function n1(e,t,n){const i=this;let r=0,u,a;return l;function l(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),f}function f(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),u=31,a=Se,h(p))}function c(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),u=6,a=HE,h):(e.enter("characterReferenceValue"),u=7,a=Ui,h(p))}function h(p){if(p===59&&r){const m=e.exit("characterReferenceValue");return a===Se&&!cr(i.sliceSerialize(m))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(p)&&r++<u?(e.consume(p),h):n(p)}}const mu={partial:!0,tokenize:r1},gu={concrete:!0,name:"codeFenced",tokenize:i1};function i1(e,t,n){const i=this,r={partial:!0,tokenize:w};let u=0,a=0,l;return f;function f(N){return c(N)}function c(N){const q=i.events[i.events.length-1];return u=q&&q[1].type==="linePrefix"?q[2].sliceSerialize(q[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(N)}function h(N){return N===l?(a++,e.consume(N),h):a<3?n(N):(e.exit("codeFencedFenceSequence"),ie(N)?oe(e,p,"whitespace")(N):p(N))}function p(N){return N===null||Q(N)?(e.exit("codeFencedFence"),i.interrupt?t(N):e.check(mu,A,O)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||Q(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(N)):ie(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),oe(e,g,"whitespace")(N)):N===96&&N===l?n(N):(e.consume(N),m)}function g(N){return N===null||Q(N)?p(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),E(N))}function E(N){return N===null||Q(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(N)):N===96&&N===l?n(N):(e.consume(N),E)}function A(N){return e.attempt(r,O,R)(N)}function R(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),I}function I(N){return u>0&&ie(N)?oe(e,M,"linePrefix",u+1)(N):M(N)}function M(N){return N===null||Q(N)?e.check(mu,A,O)(N):(e.enter("codeFlowValue"),k(N))}function k(N){return N===null||Q(N)?(e.exit("codeFlowValue"),M(N)):(e.consume(N),k)}function O(N){return e.exit("codeFenced"),t(N)}function w(N,q,Z){let G=0;return x;function x(W){return N.enter("lineEnding"),N.consume(W),N.exit("lineEnding"),F}function F(W){return N.enter("codeFencedFence"),ie(W)?oe(N,Y,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):Y(W)}function Y(W){return W===l?(N.enter("codeFencedFenceSequence"),$(W)):Z(W)}function $(W){return W===l?(G++,N.consume(W),$):G>=a?(N.exit("codeFencedFenceSequence"),ie(W)?oe(N,z,"whitespace")(W):z(W)):Z(W)}function z(W){return W===null||Q(W)?(N.exit("codeFencedFence"),q(W)):Z(W)}}}function r1(e,t,n){const i=this;return r;function r(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),u)}function u(a){return i.parser.lazy[i.now().line]?n(a):t(a)}}const si={name:"codeIndented",tokenize:u1},o1={partial:!0,tokenize:s1};function u1(e,t,n){const i=this;return r;function r(c){return e.enter("codeIndented"),oe(e,u,"linePrefix",5)(c)}function u(c){const h=i.events[i.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?a(c):n(c)}function a(c){return c===null?f(c):Q(c)?e.attempt(o1,a,f)(c):(e.enter("codeFlowValue"),l(c))}function l(c){return c===null||Q(c)?(e.exit("codeFlowValue"),a(c)):(e.consume(c),l)}function f(c){return e.exit("codeIndented"),t(c)}}function s1(e,t,n){const i=this;return r;function r(a){return i.parser.lazy[i.now().line]?n(a):Q(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r):oe(e,u,"linePrefix",5)(a)}function u(a){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):Q(a)?r(a):n(a)}}const a1={name:"codeText",previous:c1,resolve:l1,tokenize:f1};function l1(e){let t=e.length-4,n=3,i,r;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)r===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(r=i):(i===t||e[i][1].type==="lineEnding")&&(e[r][1].type="codeTextData",i!==r+2&&(e[r][1].end=e[i-1][1].end,e.splice(r+2,i-r-2),t-=i-r-2,i=r+2),r=void 0);return e}function c1(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function f1(e,t,n){let i=0,r,u;return a;function a(p){return e.enter("codeText"),e.enter("codeTextSequence"),l(p)}function l(p){return p===96?(e.consume(p),i++,l):(e.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),f):p===96?(u=e.enter("codeTextSequence"),r=0,h(p)):Q(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),f):(e.enter("codeTextData"),c(p))}function c(p){return p===null||p===32||p===96||Q(p)?(e.exit("codeTextData"),f(p)):(e.consume(p),c)}function h(p){return p===96?(e.consume(p),r++,h):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(u.type="codeTextData",c(p))}}class d1{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const r=n||0;this.setCursor(Math.trunc(t));const u=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Jt(this.left,i),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Jt(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Jt(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Jt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Jt(this.left,n.reverse())}}}function Jt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ra(e){const t={};let n=-1,i,r,u,a,l,f,c;const h=new d1(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(i=h.get(n),n&&i[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,h1(h,n)),n=t[n],c=!0);else if(i[1]._container){for(u=n,r=void 0;u--;)if(a=h.get(u),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(h.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=u);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(i[1].end={...h.get(r)[1].start},l=h.slice(r,n),l.unshift(i),h.splice(r,n-r+1,l))}}return Le(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!c}function h1(e,t){const n=e.get(t)[1],i=e.get(t)[2];let r=t-1;const u=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,f=[],c={};let h,p,m=-1,g=n,E=0,A=0;const R=[A];for(;g;){for(;e.get(++r)[1]!==g;);u.push(r),g._tokenizer||(h=i.sliceStream(g),g.next||h.push(null),p&&a.defineSkip(g.start),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(h),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(A=m+1,R.push(A),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(a.events=[],g?(g._tokenizer=void 0,g.previous=void 0):R.pop(),m=R.length;m--;){const I=l.slice(R[m],R[m+1]),M=u.pop();f.push([M,M+I.length-1]),e.splice(M,2,I)}for(f.reverse(),m=-1;++m<f.length;)c[E+f[m][0]]=E+f[m][1],E+=f[m][1]-f[m][0]-1;return c}const p1={resolve:g1,tokenize:T1},m1={partial:!0,tokenize:E1};function g1(e){return ra(e),e}function T1(e,t){let n;return i;function i(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?u(l):Q(l)?e.check(m1,a,u)(l):(e.consume(l),r)}function u(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function E1(e,t,n){const i=this;return r;function r(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),oe(e,u,"linePrefix")}function u(a){if(a===null||Q(a))return n(a);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(i.parser.constructs.flow,n,t)(a)}}function oa(e,t,n,i,r,u,a,l,f){const c=f||Number.POSITIVE_INFINITY;let h=0;return p;function p(I){return I===60?(e.enter(i),e.enter(r),e.enter(u),e.consume(I),e.exit(u),m):I===null||I===32||I===41||On(I)?n(I):(e.enter(i),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),A(I))}function m(I){return I===62?(e.enter(u),e.consume(I),e.exit(u),e.exit(r),e.exit(i),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),g(I))}function g(I){return I===62?(e.exit("chunkString"),e.exit(l),m(I)):I===null||I===60||Q(I)?n(I):(e.consume(I),I===92?E:g)}function E(I){return I===60||I===62||I===92?(e.consume(I),g):g(I)}function A(I){return!h&&(I===null||I===41||le(I))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(i),t(I)):h<c&&I===40?(e.consume(I),h++,A):I===41?(e.consume(I),h--,A):I===null||I===32||I===40||On(I)?n(I):(e.consume(I),I===92?R:A)}function R(I){return I===40||I===41||I===92?(e.consume(I),A):A(I)}}function ua(e,t,n,i,r,u){const a=this;let l=0,f;return c;function c(g){return e.enter(i),e.enter(r),e.consume(g),e.exit(r),e.enter(u),h}function h(g){return l>999||g===null||g===91||g===93&&!f||g===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(g):g===93?(e.exit(u),e.enter(r),e.consume(g),e.exit(r),e.exit(i),t):Q(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Q(g)||l++>999?(e.exit("chunkString"),h(g)):(e.consume(g),f||(f=!ie(g)),g===92?m:p)}function m(g){return g===91||g===92||g===93?(e.consume(g),l++,p):p(g)}}function sa(e,t,n,i,r,u){let a;return l;function l(m){return m===34||m===39||m===40?(e.enter(i),e.enter(r),e.consume(m),e.exit(r),a=m===40?41:m,f):n(m)}function f(m){return m===a?(e.enter(r),e.consume(m),e.exit(r),e.exit(i),t):(e.enter(u),c(m))}function c(m){return m===a?(e.exit(u),f(a)):m===null?n(m):Q(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),oe(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===a||m===null||Q(m)?(e.exit("chunkString"),c(m)):(e.consume(m),m===92?p:h)}function p(m){return m===a||m===92?(e.consume(m),h):h(m)}}function tn(e,t){let n;return i;function i(r){return Q(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,i):ie(r)?oe(e,i,n?"linePrefix":"lineSuffix")(r):t(r)}}const C1={name:"definition",tokenize:_1},y1={partial:!0,tokenize:A1};function _1(e,t,n){const i=this;let r;return u;function u(g){return e.enter("definition"),a(g)}function a(g){return ua.call(i,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function l(g){return r=Ve(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),f):n(g)}function f(g){return le(g)?tn(e,c)(g):c(g)}function c(g){return oa(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function h(g){return e.attempt(y1,p,p)(g)}function p(g){return ie(g)?oe(e,m,"whitespace")(g):m(g)}function m(g){return g===null||Q(g)?(e.exit("definition"),i.parser.defined.push(r),t(g)):n(g)}}function A1(e,t,n){return i;function i(l){return le(l)?tn(e,r)(l):n(l)}function r(l){return sa(e,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function u(l){return ie(l)?oe(e,a,"whitespace")(l):a(l)}function a(l){return l===null||Q(l)?t(l):n(l)}}const S1={name:"hardBreakEscape",tokenize:I1};function I1(e,t,n){return i;function i(u){return e.enter("hardBreakEscape"),e.consume(u),r}function r(u){return Q(u)?(e.exit("hardBreakEscape"),t(u)):n(u)}}const b1={name:"headingAtx",resolve:x1,tokenize:N1};function x1(e,t){let n=e.length-2,i=3,r,u;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},u={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Le(e,i,n-i+1,[["enter",r,t],["enter",u,t],["exit",u,t],["exit",r,t]])),e}function N1(e,t,n){let i=0;return r;function r(h){return e.enter("atxHeading"),u(h)}function u(h){return e.enter("atxHeadingSequence"),a(h)}function a(h){return h===35&&i++<6?(e.consume(h),a):h===null||le(h)?(e.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(e.enter("atxHeadingSequence"),f(h)):h===null||Q(h)?(e.exit("atxHeading"),t(h)):ie(h)?oe(e,l,"whitespace")(h):(e.enter("atxHeadingText"),c(h))}function f(h){return h===35?(e.consume(h),f):(e.exit("atxHeadingSequence"),l(h))}function c(h){return h===null||h===35||le(h)?(e.exit("atxHeadingText"),l(h)):(e.consume(h),c)}}const R1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Tu=["pre","script","style","textarea"],k1={concrete:!0,name:"htmlFlow",resolveTo:P1,tokenize:v1},M1={partial:!0,tokenize:w1},D1={partial:!0,tokenize:L1};function P1(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function v1(e,t,n){const i=this;let r,u,a,l,f;return c;function c(S){return h(S)}function h(S){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(S),p}function p(S){return S===33?(e.consume(S),m):S===47?(e.consume(S),u=!0,A):S===63?(e.consume(S),r=3,i.interrupt?t:_):xe(S)?(e.consume(S),a=String.fromCharCode(S),R):n(S)}function m(S){return S===45?(e.consume(S),r=2,g):S===91?(e.consume(S),r=5,l=0,E):xe(S)?(e.consume(S),r=4,i.interrupt?t:_):n(S)}function g(S){return S===45?(e.consume(S),i.interrupt?t:_):n(S)}function E(S){const Te="CDATA[";return S===Te.charCodeAt(l++)?(e.consume(S),l===Te.length?i.interrupt?t:Y:E):n(S)}function A(S){return xe(S)?(e.consume(S),a=String.fromCharCode(S),R):n(S)}function R(S){if(S===null||S===47||S===62||le(S)){const Te=S===47,we=a.toLowerCase();return!Te&&!u&&Tu.includes(we)?(r=1,i.interrupt?t(S):Y(S)):R1.includes(a.toLowerCase())?(r=6,Te?(e.consume(S),I):i.interrupt?t(S):Y(S)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(S):u?M(S):k(S))}return S===45||Se(S)?(e.consume(S),a+=String.fromCharCode(S),R):n(S)}function I(S){return S===62?(e.consume(S),i.interrupt?t:Y):n(S)}function M(S){return ie(S)?(e.consume(S),M):x(S)}function k(S){return S===47?(e.consume(S),x):S===58||S===95||xe(S)?(e.consume(S),O):ie(S)?(e.consume(S),k):x(S)}function O(S){return S===45||S===46||S===58||S===95||Se(S)?(e.consume(S),O):w(S)}function w(S){return S===61?(e.consume(S),N):ie(S)?(e.consume(S),w):k(S)}function N(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),f=S,q):ie(S)?(e.consume(S),N):Z(S)}function q(S){return S===f?(e.consume(S),f=null,G):S===null||Q(S)?n(S):(e.consume(S),q)}function Z(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||le(S)?w(S):(e.consume(S),Z)}function G(S){return S===47||S===62||ie(S)?k(S):n(S)}function x(S){return S===62?(e.consume(S),F):n(S)}function F(S){return S===null||Q(S)?Y(S):ie(S)?(e.consume(S),F):n(S)}function Y(S){return S===45&&r===2?(e.consume(S),H):S===60&&r===1?(e.consume(S),K):S===62&&r===4?(e.consume(S),_e):S===63&&r===3?(e.consume(S),_):S===93&&r===5?(e.consume(S),ue):Q(S)&&(r===6||r===7)?(e.exit("htmlFlowData"),e.check(M1,Ne,$)(S)):S===null||Q(S)?(e.exit("htmlFlowData"),$(S)):(e.consume(S),Y)}function $(S){return e.check(D1,z,Ne)(S)}function z(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),W}function W(S){return S===null||Q(S)?$(S):(e.enter("htmlFlowData"),Y(S))}function H(S){return S===45?(e.consume(S),_):Y(S)}function K(S){return S===47?(e.consume(S),a="",X):Y(S)}function X(S){if(S===62){const Te=a.toLowerCase();return Tu.includes(Te)?(e.consume(S),_e):Y(S)}return xe(S)&&a.length<8?(e.consume(S),a+=String.fromCharCode(S),X):Y(S)}function ue(S){return S===93?(e.consume(S),_):Y(S)}function _(S){return S===62?(e.consume(S),_e):S===45&&r===2?(e.consume(S),_):Y(S)}function _e(S){return S===null||Q(S)?(e.exit("htmlFlowData"),Ne(S)):(e.consume(S),_e)}function Ne(S){return e.exit("htmlFlow"),t(S)}}function L1(e,t,n){const i=this;return r;function r(a){return Q(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),u):n(a)}function u(a){return i.parser.lazy[i.now().line]?n(a):t(a)}}function w1(e,t,n){return i;function i(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(mn,t,n)}}const O1={name:"htmlText",tokenize:F1};function F1(e,t,n){const i=this;let r,u,a;return l;function l(_){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(_),f}function f(_){return _===33?(e.consume(_),c):_===47?(e.consume(_),w):_===63?(e.consume(_),k):xe(_)?(e.consume(_),Z):n(_)}function c(_){return _===45?(e.consume(_),h):_===91?(e.consume(_),u=0,E):xe(_)?(e.consume(_),M):n(_)}function h(_){return _===45?(e.consume(_),g):n(_)}function p(_){return _===null?n(_):_===45?(e.consume(_),m):Q(_)?(a=p,K(_)):(e.consume(_),p)}function m(_){return _===45?(e.consume(_),g):p(_)}function g(_){return _===62?H(_):_===45?m(_):p(_)}function E(_){const _e="CDATA[";return _===_e.charCodeAt(u++)?(e.consume(_),u===_e.length?A:E):n(_)}function A(_){return _===null?n(_):_===93?(e.consume(_),R):Q(_)?(a=A,K(_)):(e.consume(_),A)}function R(_){return _===93?(e.consume(_),I):A(_)}function I(_){return _===62?H(_):_===93?(e.consume(_),I):A(_)}function M(_){return _===null||_===62?H(_):Q(_)?(a=M,K(_)):(e.consume(_),M)}function k(_){return _===null?n(_):_===63?(e.consume(_),O):Q(_)?(a=k,K(_)):(e.consume(_),k)}function O(_){return _===62?H(_):k(_)}function w(_){return xe(_)?(e.consume(_),N):n(_)}function N(_){return _===45||Se(_)?(e.consume(_),N):q(_)}function q(_){return Q(_)?(a=q,K(_)):ie(_)?(e.consume(_),q):H(_)}function Z(_){return _===45||Se(_)?(e.consume(_),Z):_===47||_===62||le(_)?G(_):n(_)}function G(_){return _===47?(e.consume(_),H):_===58||_===95||xe(_)?(e.consume(_),x):Q(_)?(a=G,K(_)):ie(_)?(e.consume(_),G):H(_)}function x(_){return _===45||_===46||_===58||_===95||Se(_)?(e.consume(_),x):F(_)}function F(_){return _===61?(e.consume(_),Y):Q(_)?(a=F,K(_)):ie(_)?(e.consume(_),F):G(_)}function Y(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),r=_,$):Q(_)?(a=Y,K(_)):ie(_)?(e.consume(_),Y):(e.consume(_),z)}function $(_){return _===r?(e.consume(_),r=void 0,W):_===null?n(_):Q(_)?(a=$,K(_)):(e.consume(_),$)}function z(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||le(_)?G(_):(e.consume(_),z)}function W(_){return _===47||_===62||le(_)?G(_):n(_)}function H(_){return _===62?(e.consume(_),e.exit("htmlTextData"),e.exit("htmlText"),t):n(_)}function K(_){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),X}function X(_){return ie(_)?oe(e,ue,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):ue(_)}function ue(_){return e.enter("htmlTextData"),a(_)}}const fr={name:"labelEnd",resolveAll:V1,resolveTo:q1,tokenize:G1},U1={tokenize:Y1},B1={tokenize:z1},H1={tokenize:$1};function V1(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",t+=r}}return e.length!==n.length&&Le(e,0,e.length,n),e}function q1(e,t){let n=e.length,i=0,r,u,a,l;for(;n--;)if(r=e[n][1],u){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;e[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(u=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(a=n);const f={type:e[u][1].type==="labelLink"?"link":"image",start:{...e[u][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[u][1].start},end:{...e[a][1].end}},h={type:"labelText",start:{...e[u+i+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",f,t],["enter",c,t]],l=Oe(l,e.slice(u+1,u+i+3)),l=Oe(l,[["enter",h,t]]),l=Oe(l,Jn(t.parser.constructs.insideSpan.null,e.slice(u+i+4,a-3),t)),l=Oe(l,[["exit",h,t],e[a-2],e[a-1],["exit",c,t]]),l=Oe(l,e.slice(a+1)),l=Oe(l,[["exit",f,t]]),Le(e,u,e.length,l),e}function G1(e,t,n){const i=this;let r=i.events.length,u,a;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){u=i.events[r][1];break}return l;function l(m){return u?u._inactive?p(m):(a=i.parser.defined.includes(Ve(i.sliceSerialize({start:u.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),f):n(m)}function f(m){return m===40?e.attempt(U1,h,a?h:p)(m):m===91?e.attempt(B1,h,a?c:p)(m):a?h(m):p(m)}function c(m){return e.attempt(H1,h,p)(m)}function h(m){return t(m)}function p(m){return u._balanced=!0,n(m)}}function Y1(e,t,n){return i;function i(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),r}function r(p){return le(p)?tn(e,u)(p):u(p)}function u(p){return p===41?h(p):oa(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return le(p)?tn(e,f)(p):h(p)}function l(p){return n(p)}function f(p){return p===34||p===39||p===40?sa(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function c(p){return le(p)?tn(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function z1(e,t,n){const i=this;return r;function r(l){return ua.call(i,e,u,a,"reference","referenceMarker","referenceString")(l)}function u(l){return i.parser.defined.includes(Ve(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function $1(e,t,n){return i;function i(u){return e.enter("reference"),e.enter("referenceMarker"),e.consume(u),e.exit("referenceMarker"),r}function r(u){return u===93?(e.enter("referenceMarker"),e.consume(u),e.exit("referenceMarker"),e.exit("reference"),t):n(u)}}const W1={name:"labelStartImage",resolveAll:fr.resolveAll,tokenize:J1};function J1(e,t,n){const i=this;return r;function r(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),u}function u(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):t(l)}}const K1={name:"labelStartLink",resolveAll:fr.resolveAll,tokenize:Q1};function Q1(e,t,n){const i=this;return r;function r(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),u}function u(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):t(a)}}const ai={name:"lineEnding",tokenize:X1};function X1(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),oe(e,t,"linePrefix")}}const Dn={name:"thematicBreak",tokenize:Z1};function Z1(e,t,n){let i=0,r;return u;function u(c){return e.enter("thematicBreak"),a(c)}function a(c){return r=c,l(c)}function l(c){return c===r?(e.enter("thematicBreakSequence"),f(c)):i>=3&&(c===null||Q(c))?(e.exit("thematicBreak"),t(c)):n(c)}function f(c){return c===r?(e.consume(c),i++,f):(e.exit("thematicBreakSequence"),ie(c)?oe(e,l,"whitespace")(c):l(c))}}const ke={continuation:{tokenize:nC},exit:rC,name:"list",tokenize:tC},j1={partial:!0,tokenize:oC},eC={partial:!0,tokenize:iC};function tC(e,t,n){const i=this,r=i.events[i.events.length-1];let u=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return l;function l(g){const E=i.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!i.containerState.marker||g===i.containerState.marker:Ui(g)){if(i.containerState.type||(i.containerState.type=E,e.enter(E,{_container:!0})),E==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(Dn,n,c)(g):c(g);if(!i.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),f(g)}return n(g)}function f(g){return Ui(g)&&++a<10?(e.consume(g),f):(!i.interrupt||a<2)&&(i.containerState.marker?g===i.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),c(g)):n(g)}function c(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||g,e.check(mn,i.interrupt?n:h,e.attempt(j1,m,p))}function h(g){return i.containerState.initialBlankLine=!0,u++,m(g)}function p(g){return ie(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return i.containerState.size=u+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function nC(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(mn,r,u);function r(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,oe(e,t,"listItemIndent",i.containerState.size+1)(l)}function u(l){return i.containerState.furtherBlankLines||!ie(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(eC,t,a)(l))}function a(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,oe(e,e.attempt(ke,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function iC(e,t,n){const i=this;return oe(e,r,"listItemIndent",i.containerState.size+1);function r(u){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?t(u):n(u)}}function rC(e){e.exit(this.containerState.type)}function oC(e,t,n){const i=this;return oe(e,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(u){const a=i.events[i.events.length-1];return!ie(u)&&a&&a[1].type==="listItemPrefixWhitespace"?t(u):n(u)}}const Eu={name:"setextUnderline",resolveTo:uC,tokenize:sC};function uC(e,t){let n=e.length,i,r,u;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(r=n)}else e[n][1].type==="content"&&e.splice(n,1),!u&&e[n][1].type==="definition"&&(u=n);const a={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[r][1].type="setextHeadingText",u?(e.splice(r,0,["enter",a,t]),e.splice(u+1,0,["exit",e[i][1],t]),e[i][1].end={...e[u][1].end}):e[i][1]=a,e.push(["exit",a,t]),e}function sC(e,t,n){const i=this;let r;return u;function u(c){let h=i.events.length,p;for(;h--;)if(i.events[h][1].type!=="lineEnding"&&i.events[h][1].type!=="linePrefix"&&i.events[h][1].type!=="content"){p=i.events[h][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(e.enter("setextHeadingLine"),r=c,a(c)):n(c)}function a(c){return e.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===r?(e.consume(c),l):(e.exit("setextHeadingLineSequence"),ie(c)?oe(e,f,"lineSuffix")(c):f(c))}function f(c){return c===null||Q(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const aC={tokenize:lC};function lC(e){const t=this,n=e.attempt(mn,i,e.attempt(this.parser.constructs.flowInitial,r,oe(e,e.attempt(this.parser.constructs.flow,r,e.attempt(p1,r)),"linePrefix")));return n;function i(u){if(u===null){e.consume(u);return}return e.enter("lineEndingBlank"),e.consume(u),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const cC={resolveAll:la()},fC=aa("string"),dC=aa("text");function aa(e){return{resolveAll:la(e==="text"?hC:void 0),tokenize:t};function t(n){const i=this,r=this.parser.constructs[e],u=n.attempt(r,a,l);return a;function a(h){return c(h)?u(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),f}function f(h){return c(h)?(n.exit("data"),u(h)):(n.consume(h),f)}function c(h){if(h===null)return!0;const p=r[h];let m=-1;if(p)for(;++m<p.length;){const g=p[m];if(!g.previous||g.previous.call(i,i.previous))return!0}return!1}}}function la(e){return t;function t(n,i){let r=-1,u;for(;++r<=n.length;)u===void 0?n[r]&&n[r][1].type==="data"&&(u=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==u+2&&(n[u][1].end=n[r-1][1].end,n.splice(u+2,r-u-2),r=u+2),u=void 0);return e?e(n,i):n}}function hC(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],r=t.sliceStream(i);let u=r.length,a=-1,l=0,f;for(;u--;){const c=r[u];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(c===-2)f=!0,l++;else if(c!==-1){u++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const c={type:n===e.length||f||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?a:i.start._bufferIndex+a,_index:i.start._index+u,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...c.start},i.start.offset===i.end.offset?Object.assign(i,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const pC={42:ke,43:ke,45:ke,48:ke,49:ke,50:ke,51:ke,52:ke,53:ke,54:ke,55:ke,56:ke,57:ke,62:ta},mC={91:C1},gC={[-2]:si,[-1]:si,32:si},TC={35:b1,42:Dn,45:[Eu,Dn],60:k1,61:Eu,95:Dn,96:gu,126:gu},EC={38:ia,92:na},CC={[-5]:ai,[-4]:ai,[-3]:ai,33:W1,38:ia,42:Bi,60:[KE,O1],91:K1,92:[S1,na],93:fr,95:Bi,96:a1},yC={null:[Bi,cC]},_C={null:[42,95]},AC={null:[]},SC=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:_C,contentInitial:mC,disable:AC,document:pC,flow:TC,flowInitial:gC,insideSpan:yC,string:EC,text:CC},Symbol.toStringTag,{value:"Module"}));function IC(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},u=[];let a=[],l=[];const f={attempt:q(w),check:q(N),consume:M,enter:k,exit:O,interrupt:q(N,{interrupt:!0})},c={code:null,containerState:{},defineSkip:A,events:[],now:E,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:p};let h=t.tokenize.call(c,f);return t.resolveAll&&u.push(t),c;function p(F){return a=Oe(a,F),R(),a[a.length-1]!==null?[]:(Z(t,0),c.events=Jn(u,c.events,c),c.events)}function m(F,Y){return xC(g(F),Y)}function g(F){return bC(a,F)}function E(){const{_bufferIndex:F,_index:Y,line:$,column:z,offset:W}=i;return{_bufferIndex:F,_index:Y,line:$,column:z,offset:W}}function A(F){r[F.line]=F.column,x()}function R(){let F;for(;i._index<a.length;){const Y=a[i._index];if(typeof Y=="string")for(F=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===F&&i._bufferIndex<Y.length;)I(Y.charCodeAt(i._bufferIndex));else I(Y)}}function I(F){h=h(F)}function M(F){Q(F)?(i.line++,i.column=1,i.offset+=F===-3?2:1,x()):F!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),c.previous=F}function k(F,Y){const $=Y||{};return $.type=F,$.start=E(),c.events.push(["enter",$,c]),l.push($),$}function O(F){const Y=l.pop();return Y.end=E(),c.events.push(["exit",Y,c]),Y}function w(F,Y){Z(F,Y.from)}function N(F,Y){Y.restore()}function q(F,Y){return $;function $(z,W,H){let K,X,ue,_;return Array.isArray(z)?Ne(z):"tokenize"in z?Ne([z]):_e(z);function _e(ye){return qt;function qt(je){const gt=je!==null&&ye[je],Tt=je!==null&&ye.null,yn=[...Array.isArray(gt)?gt:gt?[gt]:[],...Array.isArray(Tt)?Tt:Tt?[Tt]:[]];return Ne(yn)(je)}}function Ne(ye){return K=ye,X=0,ye.length===0?H:S(ye[X])}function S(ye){return qt;function qt(je){return _=G(),ue=ye,ye.partial||(c.currentConstruct=ye),ye.name&&c.parser.constructs.disable.null.includes(ye.name)?we():ye.tokenize.call(Y?Object.assign(Object.create(c),Y):c,f,Te,we)(je)}}function Te(ye){return F(ue,_),W}function we(ye){return _.restore(),++X<K.length?S(K[X]):H}}}function Z(F,Y){F.resolveAll&&!u.includes(F)&&u.push(F),F.resolve&&Le(c.events,Y,c.events.length-Y,F.resolve(c.events.slice(Y),c)),F.resolveTo&&(c.events=F.resolveTo(c.events,c))}function G(){const F=E(),Y=c.previous,$=c.currentConstruct,z=c.events.length,W=Array.from(l);return{from:z,restore:H};function H(){i=F,c.previous=Y,c.currentConstruct=$,c.events.length=z,l=W,x()}}function x(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function bC(e,t){const n=t.start._index,i=t.start._bufferIndex,r=t.end._index,u=t.end._bufferIndex;let a;if(n===r)a=[e[n].slice(i,u)];else{if(a=e.slice(n,r),i>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(i):a.shift()}u>0&&a.push(e[r].slice(0,u))}return a}function xC(e,t){let n=-1;const i=[];let r;for(;++n<e.length;){const u=e[n];let a;if(typeof u=="string")a=u;else switch(u){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&r)continue;a=" ";break}default:a=String.fromCharCode(u)}r=u===-2,i.push(a)}return i.join("")}function NC(e){const i={constructs:js([SC,...(e||{}).extensions||[]]),content:r(qE),defined:[],document:r(YE),flow:r(aC),lazy:{},string:r(fC),text:r(dC)};return i;function r(u){return a;function a(l){return IC(i,u,l)}}}function RC(e){for(;!ra(e););return e}const Cu=/[\0\t\n\r]/g;function kC(){let e=1,t="",n=!0,i;return r;function r(u,a,l){const f=[];let c,h,p,m,g;for(u=t+(typeof u=="string"?u.toString():new TextDecoder(a||void 0).decode(u)),p=0,t="",n&&(u.charCodeAt(0)===65279&&p++,n=void 0);p<u.length;){if(Cu.lastIndex=p,c=Cu.exec(u),m=c&&c.index!==void 0?c.index:u.length,g=u.charCodeAt(m),!c){t=u.slice(p);break}if(g===10&&p===m&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),p<m&&(f.push(u.slice(p,m)),e+=m-p),g){case 0:{f.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,f.push(-2);e++<h;)f.push(-1);break}case 10:{f.push(-4),e=1;break}default:i=!0,e=1}p=m+1}return l&&(i&&f.push(-5),t&&f.push(t),f.push(null)),f}}const MC=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function DC(e){return e.replace(MC,PC)}function PC(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),u=r===120||r===88;return ea(n.slice(u?2:1),u?16:10)}return cr(n)||e}const ca={}.hasOwnProperty;function vC(e,t,n){return typeof t!="string"&&(n=t,t=void 0),LC(n)(RC(NC(n).document().write(kC()(e,t,!0))))}function LC(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(Dr),autolinkProtocol:G,autolinkEmail:G,atxHeading:u(Rr),blockQuote:u(Tt),characterEscape:G,characterReference:G,codeFenced:u(yn),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:u(yn,a),codeText:u(vl,a),codeTextData:G,data:G,codeFlowValue:G,definition:u(Ll),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:u(wl),hardBreakEscape:u(kr),hardBreakTrailing:u(kr),htmlFlow:u(Mr,a),htmlFlowData:G,htmlText:u(Mr,a),htmlTextData:G,image:u(Ol),label:a,link:u(Dr),listItem:u(Fl),listItemValue:m,listOrdered:u(Pr,p),listUnordered:u(Pr),paragraph:u(Ul),reference:S,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:u(Rr),strong:u(Bl),thematicBreak:u(Vl)},exit:{atxHeading:f(),atxHeadingSequence:w,autolink:f(),autolinkEmail:gt,autolinkProtocol:je,blockQuote:f(),characterEscapeValue:x,characterReferenceMarkerHexadecimal:we,characterReferenceMarkerNumeric:we,characterReferenceValue:ye,characterReference:qt,codeFenced:f(R),codeFencedFence:A,codeFencedFenceInfo:g,codeFencedFenceMeta:E,codeFlowValue:x,codeIndented:f(I),codeText:f(W),codeTextData:x,data:x,definition:f(),definitionDestinationString:O,definitionLabelString:M,definitionTitleString:k,emphasis:f(),hardBreakEscape:f(Y),hardBreakTrailing:f(Y),htmlFlow:f($),htmlFlowData:x,htmlText:f(z),htmlTextData:x,image:f(K),label:ue,labelText:X,lineEnding:F,link:f(H),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:Te,resourceDestinationString:_,resourceTitleString:_e,resource:Ne,setextHeading:f(Z),setextHeadingLineSequence:q,setextHeadingText:N,strong:f(),thematicBreak:f()}};fa(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(P){let V={type:"root",children:[]};const j={stack:[V],tokenStack:[],config:t,enter:l,exit:c,buffer:a,resume:h,data:n},re=[];let ae=-1;for(;++ae<P.length;)if(P[ae][1].type==="listOrdered"||P[ae][1].type==="listUnordered")if(P[ae][0]==="enter")re.push(ae);else{const He=re.pop();ae=r(P,He,ae)}for(ae=-1;++ae<P.length;){const He=t[P[ae][0]];ca.call(He,P[ae][1].type)&&He[P[ae][1].type].call(Object.assign({sliceSerialize:P[ae][2].sliceSerialize},j),P[ae][1])}if(j.tokenStack.length>0){const He=j.tokenStack[j.tokenStack.length-1];(He[1]||yu).call(j,void 0,He[0])}for(V.position={start:et(P.length>0?P[0][1].start:{line:1,column:1,offset:0}),end:et(P.length>0?P[P.length-2][1].end:{line:1,column:1,offset:0})},ae=-1;++ae<t.transforms.length;)V=t.transforms[ae](V)||V;return V}function r(P,V,j){let re=V-1,ae=-1,He=!1,ut,We,Gt,Yt;for(;++re<=j;){const De=P[re];switch(De[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{De[0]==="enter"?ae++:ae--,Yt=void 0;break}case"lineEndingBlank":{De[0]==="enter"&&(ut&&!Yt&&!ae&&!Gt&&(Gt=re),Yt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Yt=void 0}if(!ae&&De[0]==="enter"&&De[1].type==="listItemPrefix"||ae===-1&&De[0]==="exit"&&(De[1].type==="listUnordered"||De[1].type==="listOrdered")){if(ut){let Et=re;for(We=void 0;Et--;){const Je=P[Et];if(Je[1].type==="lineEnding"||Je[1].type==="lineEndingBlank"){if(Je[0]==="exit")continue;We&&(P[We][1].type="lineEndingBlank",He=!0),Je[1].type="lineEnding",We=Et}else if(!(Je[1].type==="linePrefix"||Je[1].type==="blockQuotePrefix"||Je[1].type==="blockQuotePrefixWhitespace"||Je[1].type==="blockQuoteMarker"||Je[1].type==="listItemIndent"))break}Gt&&(!We||Gt<We)&&(ut._spread=!0),ut.end=Object.assign({},We?P[We][1].start:De[1].end),P.splice(We||re,0,["exit",ut,De[2]]),re++,j++}if(De[1].type==="listItemPrefix"){const Et={type:"listItem",_spread:!1,start:Object.assign({},De[1].start),end:void 0};ut=Et,P.splice(re,0,["enter",Et,De[2]]),re++,j++,Gt=void 0,Yt=!0}}}return P[V][1]._spread=He,j}function u(P,V){return j;function j(re){l.call(this,P(re),re),V&&V.call(this,re)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(P,V,j){this.stack[this.stack.length-1].children.push(P),this.stack.push(P),this.tokenStack.push([V,j||void 0]),P.position={start:et(V.start),end:void 0}}function f(P){return V;function V(j){P&&P.call(this,j),c.call(this,j)}}function c(P,V){const j=this.stack.pop(),re=this.tokenStack.pop();if(re)re[0].type!==P.type&&(V?V.call(this,P,re[0]):(re[1]||yu).call(this,P,re[0]));else throw new Error("Cannot close `"+P.type+"` ("+en({start:P.start,end:P.end})+"): its not open");j.position.end=et(P.end)}function h(){return lr(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function m(P){if(this.data.expectingFirstListItemValue){const V=this.stack[this.stack.length-2];V.start=Number.parseInt(this.sliceSerialize(P),10),this.data.expectingFirstListItemValue=void 0}}function g(){const P=this.resume(),V=this.stack[this.stack.length-1];V.lang=P}function E(){const P=this.resume(),V=this.stack[this.stack.length-1];V.meta=P}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const P=this.resume(),V=this.stack[this.stack.length-1];V.value=P.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function I(){const P=this.resume(),V=this.stack[this.stack.length-1];V.value=P.replace(/(\r?\n|\r)$/g,"")}function M(P){const V=this.resume(),j=this.stack[this.stack.length-1];j.label=V,j.identifier=Ve(this.sliceSerialize(P)).toLowerCase()}function k(){const P=this.resume(),V=this.stack[this.stack.length-1];V.title=P}function O(){const P=this.resume(),V=this.stack[this.stack.length-1];V.url=P}function w(P){const V=this.stack[this.stack.length-1];if(!V.depth){const j=this.sliceSerialize(P).length;V.depth=j}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function q(P){const V=this.stack[this.stack.length-1];V.depth=this.sliceSerialize(P).codePointAt(0)===61?1:2}function Z(){this.data.setextHeadingSlurpLineEnding=void 0}function G(P){const j=this.stack[this.stack.length-1].children;let re=j[j.length-1];(!re||re.type!=="text")&&(re=Hl(),re.position={start:et(P.start),end:void 0},j.push(re)),this.stack.push(re)}function x(P){const V=this.stack.pop();V.value+=this.sliceSerialize(P),V.position.end=et(P.end)}function F(P){const V=this.stack[this.stack.length-1];if(this.data.atHardBreak){const j=V.children[V.children.length-1];j.position.end=et(P.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(V.type)&&(G.call(this,P),x.call(this,P))}function Y(){this.data.atHardBreak=!0}function $(){const P=this.resume(),V=this.stack[this.stack.length-1];V.value=P}function z(){const P=this.resume(),V=this.stack[this.stack.length-1];V.value=P}function W(){const P=this.resume(),V=this.stack[this.stack.length-1];V.value=P}function H(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const V=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=V,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function K(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const V=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=V,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function X(P){const V=this.sliceSerialize(P),j=this.stack[this.stack.length-2];j.label=DC(V),j.identifier=Ve(V).toLowerCase()}function ue(){const P=this.stack[this.stack.length-1],V=this.resume(),j=this.stack[this.stack.length-1];if(this.data.inReference=!0,j.type==="link"){const re=P.children;j.children=re}else j.alt=V}function _(){const P=this.resume(),V=this.stack[this.stack.length-1];V.url=P}function _e(){const P=this.resume(),V=this.stack[this.stack.length-1];V.title=P}function Ne(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function Te(P){const V=this.resume(),j=this.stack[this.stack.length-1];j.label=V,j.identifier=Ve(this.sliceSerialize(P)).toLowerCase(),this.data.referenceType="full"}function we(P){this.data.characterReferenceType=P.type}function ye(P){const V=this.sliceSerialize(P),j=this.data.characterReferenceType;let re;j?(re=ea(V,j==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):re=cr(V);const ae=this.stack[this.stack.length-1];ae.value+=re}function qt(P){const V=this.stack.pop();V.position.end=et(P.end)}function je(P){x.call(this,P);const V=this.stack[this.stack.length-1];V.url=this.sliceSerialize(P)}function gt(P){x.call(this,P);const V=this.stack[this.stack.length-1];V.url="mailto:"+this.sliceSerialize(P)}function Tt(){return{type:"blockquote",children:[]}}function yn(){return{type:"code",lang:null,meta:null,value:""}}function vl(){return{type:"inlineCode",value:""}}function Ll(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function wl(){return{type:"emphasis",children:[]}}function Rr(){return{type:"heading",depth:0,children:[]}}function kr(){return{type:"break"}}function Mr(){return{type:"html",value:""}}function Ol(){return{type:"image",title:null,url:"",alt:null}}function Dr(){return{type:"link",title:null,url:"",children:[]}}function Pr(P){return{type:"list",ordered:P.type==="listOrdered",start:null,spread:P._spread,children:[]}}function Fl(P){return{type:"listItem",spread:P._spread,checked:null,children:[]}}function Ul(){return{type:"paragraph",children:[]}}function Bl(){return{type:"strong",children:[]}}function Hl(){return{type:"text",value:""}}function Vl(){return{type:"thematicBreak"}}}function et(e){return{line:e.line,column:e.column,offset:e.offset}}function fa(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?fa(e,i):wC(e,i)}}function wC(e,t){let n;for(n in t)if(ca.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function yu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+en({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+en({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+en({start:t.start,end:t.end})+") is still open")}function L2(e){const t=this;t.parser=n;function n(i){return vC(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function OC(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function FC(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function UC(e,t){const n=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r}function BC(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function HC(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function VC(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),r=Ft(i.toLowerCase()),u=e.footnoteOrder.indexOf(i);let a,l=e.footnoteCounts.get(i);l===void 0?(l=0,e.footnoteOrder.push(i),a=e.footnoteOrder.length):a=u+1,l+=1,e.footnoteCounts.set(i,l);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,f);const c={type:"element",tagName:"sup",properties:{},children:[f]};return e.patch(t,c),e.applyData(t,c)}function qC(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function GC(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function da(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const r=e.all(t),u=r[0];u&&u.type==="text"?u.value="["+u.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=i:r.push({type:"text",value:i}),r}function YC(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return da(e,t);const r={src:Ft(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const u={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,u),e.applyData(t,u)}function zC(e,t){const n={src:Ft(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function $C(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function WC(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return da(e,t);const r={href:Ft(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const u={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,u),e.applyData(t,u)}function JC(e,t){const n={href:Ft(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function KC(e,t,n){const i=e.all(t),r=n?QC(n):ha(t),u={},a=[];if(typeof t.checked=="boolean"){const h=i[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),u.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const h=i[l];(r||l!==0||h.type!=="element"||h.tagName!=="p")&&a.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!r?a.push(...h.children):a.push(h)}const f=i[i.length-1];f&&(r||f.type!=="element"||f.tagName!=="p")&&a.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:u,children:a};return e.patch(t,c),e.applyData(t,c)}function QC(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=ha(n[i])}return t}function ha(e){const t=e.spread;return t??e.children.length>1}function XC(e,t){const n={},i=e.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++r<i.length;){const a=i[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const u={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,u),e.applyData(t,u)}function ZC(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jC(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ey(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ty(e,t){const n=e.all(t),i=n.shift(),r=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=ze(t.children[1]),f=$n(t.children[t.children.length-1]);l&&f&&(a.position={start:l,end:f}),r.push(a)}const u={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,u),e.applyData(t,u)}function ny(e,t,n){const i=n?n.children:void 0,u=(i?i.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let f=-1;const c=[];for(;++f<l;){const p=t.children[f],m={},g=a?a[f]:void 0;g&&(m.align=g);let E={type:"element",tagName:u,properties:m,children:[]};p&&(E.children=e.all(p),e.patch(p,E),E=e.applyData(p,E)),c.push(E)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,h),e.applyData(t,h)}function iy(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const _u=9,Au=32;function ry(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),r=0;const u=[];for(;i;)u.push(Su(t.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(t);return u.push(Su(t.slice(r),r>0,!1)),u.join("")}function Su(e,t,n){let i=0,r=e.length;if(t){let u=e.codePointAt(i);for(;u===_u||u===Au;)i++,u=e.codePointAt(i)}if(n){let u=e.codePointAt(r-1);for(;u===_u||u===Au;)r--,u=e.codePointAt(r-1)}return r>i?e.slice(i,r):""}function oy(e,t){const n={type:"text",value:ry(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function uy(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const sy={blockquote:OC,break:FC,code:UC,delete:BC,emphasis:HC,footnoteReference:VC,heading:qC,html:GC,imageReference:YC,image:zC,inlineCode:$C,linkReference:WC,link:JC,listItem:KC,list:XC,paragraph:ZC,root:jC,strong:ey,table:ty,tableCell:iy,tableRow:ny,text:oy,thematicBreak:uy,toml:Sn,yaml:Sn,definition:Sn,footnoteDefinition:Sn};function Sn(){}const pa=-1,Kn=0,nn=1,Fn=2,dr=3,hr=4,pr=5,mr=6,ma=7,ga=8,Iu=typeof self=="object"?self:globalThis,ay=(e,t)=>{const n=(r,u)=>(e.set(u,r),r),i=r=>{if(e.has(r))return e.get(r);const[u,a]=t[r];switch(u){case Kn:case pa:return n(a,r);case nn:{const l=n([],r);for(const f of a)l.push(i(f));return l}case Fn:{const l=n({},r);for(const[f,c]of a)l[i(f)]=i(c);return l}case dr:return n(new Date(a),r);case hr:{const{source:l,flags:f}=a;return n(new RegExp(l,f),r)}case pr:{const l=n(new Map,r);for(const[f,c]of a)l.set(i(f),i(c));return l}case mr:{const l=n(new Set,r);for(const f of a)l.add(i(f));return l}case ma:{const{name:l,message:f}=a;return n(new Iu[l](f),r)}case ga:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new Iu[u](a),r)};return i},bu=e=>ay(new Map,e)(0),yt="",{toString:ly}={},{keys:cy}=Object,Kt=e=>{const t=typeof e;if(t!=="object"||!e)return[Kn,t];const n=ly.call(e).slice(8,-1);switch(n){case"Array":return[nn,yt];case"Object":return[Fn,yt];case"Date":return[dr,yt];case"RegExp":return[hr,yt];case"Map":return[pr,yt];case"Set":return[mr,yt];case"DataView":return[nn,n]}return n.includes("Array")?[nn,n]:n.includes("Error")?[ma,n]:[Fn,n]},In=([e,t])=>e===Kn&&(t==="function"||t==="symbol"),fy=(e,t,n,i)=>{const r=(a,l)=>{const f=i.push(a)-1;return n.set(l,f),f},u=a=>{if(n.has(a))return n.get(a);let[l,f]=Kt(a);switch(l){case Kn:{let h=a;switch(f){case"bigint":l=ga,h=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+f);h=null;break;case"undefined":return r([pa],a)}return r([l,h],a)}case nn:{if(f){let m=a;return f==="DataView"?m=new Uint8Array(a.buffer):f==="ArrayBuffer"&&(m=new Uint8Array(a)),r([f,[...m]],a)}const h=[],p=r([l,h],a);for(const m of a)h.push(u(m));return p}case Fn:{if(f)switch(f){case"BigInt":return r([f,a.toString()],a);case"Boolean":case"Number":case"String":return r([f,a.valueOf()],a)}if(t&&"toJSON"in a)return u(a.toJSON());const h=[],p=r([l,h],a);for(const m of cy(a))(e||!In(Kt(a[m])))&&h.push([u(m),u(a[m])]);return p}case dr:return r([l,a.toISOString()],a);case hr:{const{source:h,flags:p}=a;return r([l,{source:h,flags:p}],a)}case pr:{const h=[],p=r([l,h],a);for(const[m,g]of a)(e||!(In(Kt(m))||In(Kt(g))))&&h.push([u(m),u(g)]);return p}case mr:{const h=[],p=r([l,h],a);for(const m of a)(e||!In(Kt(m)))&&h.push(u(m));return p}}const{message:c}=a;return r([l,{name:f,message:c}],a)};return u},xu=(e,{json:t,lossy:n}={})=>{const i=[];return fy(!(t||n),!!t,new Map,i)(e),i},kt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?bu(xu(e,t)):structuredClone(e):(e,t)=>bu(xu(e,t));function dy(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hy(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function py(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||dy,i=e.options.footnoteBackLabel||hy,r=e.options.footnoteLabel||"Footnotes",u=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let f=-1;for(;++f<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[f]);if(!c)continue;const h=e.all(c),p=String(c.identifier).toUpperCase(),m=Ft(p.toLowerCase());let g=0;const E=[],A=e.footnoteCounts.get(p);for(;A!==void 0&&++g<=A;){E.length>0&&E.push({type:"text",value:" "});let M=typeof n=="string"?n:n(f,g);typeof M=="string"&&(M={type:"text",value:M}),E.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(f,g),className:["data-footnote-backref"]},children:Array.isArray(M)?M:[M]})}const R=h[h.length-1];if(R&&R.type==="element"&&R.tagName==="p"){const M=R.children[R.children.length-1];M&&M.type==="text"?M.value+=" ":R.children.push({type:"text",value:" "}),R.children.push(...E)}else h.push(...E);const I={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(h,!0)};e.patch(c,I),l.push(I)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:u,properties:{...kt(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Qn=function(e){if(e==null)return Ey;if(typeof e=="function")return Xn(e);if(typeof e=="object")return Array.isArray(e)?my(e):gy(e);if(typeof e=="string")return Ty(e);throw new Error("Expected function, string, or object as test")};function my(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Qn(e[n]);return Xn(i);function i(...r){let u=-1;for(;++u<t.length;)if(t[u].apply(this,r))return!0;return!1}}function gy(e){const t=e;return Xn(n);function n(i){const r=i;let u;for(u in e)if(r[u]!==t[u])return!1;return!0}}function Ty(e){return Xn(t);function t(n){return n&&n.type===e}}function Xn(e){return t;function t(n,i,r){return!!(Cy(n)&&e.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function Ey(){return!0}function Cy(e){return e!==null&&typeof e=="object"&&"type"in e}const Ta=[],yy=!0,Hi=!1,_y="skip";function Ea(e,t,n,i){let r;typeof t=="function"&&typeof n!="function"?(i=n,n=t):r=t;const u=Qn(r),a=i?-1:1;l(e,void 0,[])();function l(f,c,h){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Ta,E,A,R;if((!t||u(f,c,h[h.length-1]||void 0))&&(g=Ay(n(f,h)),g[0]===Hi))return g;if("children"in f&&f.children){const I=f;if(I.children&&g[0]!==_y)for(A=(i?I.children.length:-1)+a,R=h.concat(I);A>-1&&A<I.children.length;){const M=I.children[A];if(E=l(M,A,R)(),E[0]===Hi)return E;A=typeof E[1]=="number"?E[1]:A+a}}return g}}}function Ay(e){return Array.isArray(e)?e:typeof e=="number"?[yy,e]:e==null?Ta:[e]}function gr(e,t,n,i){let r,u,a;typeof t=="function"&&typeof n!="function"?(u=void 0,a=t,r=n):(u=t,a=n,r=i),Ea(e,u,l,r);function l(f,c){const h=c[c.length-1],p=h?h.children.indexOf(f):void 0;return a(f,p,h)}}const Vi={}.hasOwnProperty,Sy={};function Iy(e,t){const n=t||Sy,i=new Map,r=new Map,u=new Map,a={...sy,...n.handlers},l={all:c,applyData:xy,definitionById:i,footnoteById:r,footnoteCounts:u,footnoteOrder:[],handlers:a,one:f,options:n,patch:by,wrap:Ry};return gr(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?i:r,m=String(h.identifier).toUpperCase();p.has(m)||p.set(m,h)}}),l;function f(h,p){const m=h.type,g=l.handlers[m];if(Vi.call(l.handlers,m)&&g)return g(l,h,p);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in h){const{children:A,...R}=h,I=kt(R);return I.children=l.all(h),I}return kt(h)}return(l.options.unknownHandler||Ny)(l,h,p)}function c(h){const p=[];if("children"in h){const m=h.children;let g=-1;for(;++g<m.length;){const E=l.one(m[g],h);if(E){if(g&&m[g-1].type==="break"&&(!Array.isArray(E)&&E.type==="text"&&(E.value=Nu(E.value)),!Array.isArray(E)&&E.type==="element")){const A=E.children[0];A&&A.type==="text"&&(A.value=Nu(A.value))}Array.isArray(E)?p.push(...E):p.push(E)}}}return p}}function by(e,t){e.position&&(t.position=mE(e))}function xy(e,t){let n=t;if(e&&e.data){const i=e.data.hName,r=e.data.hChildren,u=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&u&&Object.assign(n.properties,kt(u)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function Ny(e,t){const n=t.data||{},i="value"in t&&!(Vi.call(n,"hProperties")||Vi.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Ry(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Nu(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ru(e,t){const n=Iy(e,t),i=n.one(e,void 0),r=py(n),u=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&u.children.push({type:"text",value:`
`},r),u}function w2(e,t){return e&&"run"in e?async function(n,i){const r=Ru(n,{file:i,...t});await e.run(r,i)}:function(n,i){return Ru(n,{file:i,...e||t})}}function ku(e){if(e)throw e}var li,Mu;function ky(){if(Mu)return li;Mu=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},u=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var h=e.call(c,"constructor"),p=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!h&&!p)return!1;var m;for(m in c);return typeof m>"u"||e.call(c,m)},a=function(c,h){n&&h.name==="__proto__"?n(c,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):c[h.name]=h.newValue},l=function(c,h){if(h==="__proto__")if(e.call(c,h)){if(i)return i(c,h).value}else return;return c[h]};return li=function f(){var c,h,p,m,g,E,A=arguments[0],R=1,I=arguments.length,M=!1;for(typeof A=="boolean"&&(M=A,A=arguments[1]||{},R=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});R<I;++R)if(c=arguments[R],c!=null)for(h in c)p=l(A,h),m=l(c,h),A!==m&&(M&&m&&(u(m)||(g=r(m)))?(g?(g=!1,E=p&&r(p)?p:[]):E=p&&u(p)?p:{},a(A,{name:h,newValue:f(M,E,m)})):typeof m<"u"&&a(A,{name:h,newValue:m}));return A},li}var My=ky();const ci=ss(My);function qi(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Dy(){const e=[],t={run:n,use:i};return t;function n(...r){let u=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...r);function l(f,...c){const h=e[++u];let p=-1;if(f){a(f);return}for(;++p<r.length;)(c[p]===null||c[p]===void 0)&&(c[p]=r[p]);r=c,h?Py(h,l)(...c):a(null,...c)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}}function Py(e,t){let n;return i;function i(...a){const l=e.length>a.length;let f;l&&a.push(r);try{f=e.apply(this,a)}catch(c){const h=c;if(l&&n)throw h;return r(h)}l||(f&&f.then&&typeof f.then=="function"?f.then(u,r):f instanceof Error?r(f):u(f))}function r(a,...l){n||(n=!0,t(a,...l))}function u(a){r(null,a)}}const Ge={basename:vy,dirname:Ly,extname:wy,join:Oy,sep:"/"};function vy(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');gn(e);let n=0,i=-1,r=e.length,u;if(t===void 0||t.length===0||t.length>e.length){for(;r--;)if(e.codePointAt(r)===47){if(u){n=r+1;break}}else i<0&&(u=!0,i=r+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let a=-1,l=t.length-1;for(;r--;)if(e.codePointAt(r)===47){if(u){n=r+1;break}}else a<0&&(u=!0,a=r+1),l>-1&&(e.codePointAt(r)===t.codePointAt(l--)?l<0&&(i=r):(l=-1,i=a));return n===i?i=a:i<0&&(i=e.length),e.slice(n,i)}function Ly(e){if(gn(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function wy(e){gn(e);let t=e.length,n=-1,i=0,r=-1,u=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){i=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?r<0?r=t:u!==1&&(u=1):r>-1&&(u=-1)}return r<0||n<0||u===0||u===1&&r===n-1&&r===i+1?"":e.slice(r,n)}function Oy(...e){let t=-1,n;for(;++t<e.length;)gn(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Fy(n)}function Fy(e){gn(e);const t=e.codePointAt(0)===47;let n=Uy(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Uy(e,t){let n="",i=0,r=-1,u=0,a=-1,l,f;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(r===a-1||u===1))if(r!==a-1&&u===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",i=0):(n=n.slice(0,f),i=n.length-1-n.lastIndexOf("/")),r=a,u=0;continue}}else if(n.length>0){n="",i=0,r=a,u=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(r+1,a):n=e.slice(r+1,a),i=a-r-1;r=a,u=0}else l===46&&u>-1?u++:u=-1}return n}function gn(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const By={cwd:Hy};function Hy(){return"/"}function Gi(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Vy(e){if(typeof e=="string")e=new URL(e);else if(!Gi(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return qy(e)}function qy(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const fi=["history","path","basename","stem","extname","dirname"];class Gy{constructor(t){let n;t?Gi(t)?n={path:t}:typeof t=="string"||Yy(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":By.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<fi.length;){const u=fi[i];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let r;for(r in n)fi.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Ge.basename(this.path):void 0}set basename(t){hi(t,"basename"),di(t,"basename"),this.path=Ge.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ge.dirname(this.path):void 0}set dirname(t){Du(this.basename,"dirname"),this.path=Ge.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ge.extname(this.path):void 0}set extname(t){if(di(t,"extname"),Du(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ge.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Gi(t)&&(t=Vy(t)),hi(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ge.basename(this.path,this.extname):void 0}set stem(t){hi(t,"stem"),di(t,"stem"),this.path=Ge.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const r=this.message(t,n,i);throw r.fatal=!0,r}info(t,n,i){const r=this.message(t,n,i);return r.fatal=void 0,r}message(t,n,i){const r=new Ie(t,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function di(e,t){if(e&&e.includes(Ge.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ge.sep+"`")}function hi(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Du(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Yy(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zy=function(e){const i=this.constructor.prototype,r=i[e],u=function(){return r.apply(u,arguments)};return Object.setPrototypeOf(u,i),u},$y={}.hasOwnProperty;class Tr extends zy{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Dy()}copy(){const t=new Tr;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(ci(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(gi("data",this.frozen),this.namespace[t]=n,this):$y.call(this.namespace,t)&&this.namespace[t]||void 0:t?(gi("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(t,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=bn(t),i=this.parser||this.Parser;return pi("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),pi("process",this.parser||this.Parser),mi("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(u,a){const l=bn(t),f=i.parse(l);i.run(f,l,function(h,p,m){if(h||!p||!m)return c(h);const g=p,E=i.stringify(g,m);Jy(E)?m.value=E:m.result=E,c(h,m)});function c(h,p){h||!p?a(h):u?u(p):n(void 0,p)}}}processSync(t){let n=!1,i;return this.freeze(),pi("processSync",this.parser||this.Parser),mi("processSync",this.compiler||this.Compiler),this.process(t,r),vu("processSync","process",n),i;function r(u,a){n=!0,ku(u),i=a}}run(t,n,i){Pu(t),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?u(void 0,i):new Promise(u);function u(a,l){const f=bn(n);r.run(t,f,c);function c(h,p,m){const g=p||t;h?l(h):a?a(g):i(void 0,g,m)}}}runSync(t,n){let i=!1,r;return this.run(t,n,u),vu("runSync","run",i),r;function u(a,l){ku(a),r=l,i=!0}}stringify(t,n){this.freeze();const i=bn(n),r=this.compiler||this.Compiler;return mi("stringify",r),Pu(t),r(t,i)}use(t,...n){const i=this.attachers,r=this.namespace;if(gi("use",this.frozen),t!=null)if(typeof t=="function")f(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function u(c){if(typeof c=="function")f(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[h,...p]=c;f(h,p)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(r.settings=ci(!0,r.settings,c.settings))}function l(c){let h=-1;if(c!=null)if(Array.isArray(c))for(;++h<c.length;){const p=c[h];u(p)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function f(c,h){let p=-1,m=-1;for(;++p<i.length;)if(i[p][0]===c){m=p;break}if(m===-1)i.push([c,...h]);else if(h.length>0){let[g,...E]=h;const A=i[m][1];qi(A)&&qi(g)&&(g=ci(!0,A,g)),i[m]=[c,g,...E]}}}}const O2=new Tr().freeze();function pi(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function mi(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function gi(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Pu(e){if(!qi(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function vu(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function bn(e){return Wy(e)?e:new Gy(e)}function Wy(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Jy(e){return typeof e=="string"||Ky(e)}function Ky(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function Lu(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(t);for(;r!==-1;)i++,r=n.indexOf(t,r+t.length);return i}function Qy(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Xy(e,t,n){const r=Qn((n||{}).ignore||[]),u=Zy(t);let a=-1;for(;++a<u.length;)Ea(e,"text",l);function l(c,h){let p=-1,m;for(;++p<h.length;){const g=h[p],E=m?m.children:void 0;if(r(g,E?E.indexOf(g):void 0,m))return;m=g}if(m)return f(c,h)}function f(c,h){const p=h[h.length-1],m=u[a][0],g=u[a][1];let E=0;const R=p.children.indexOf(c);let I=!1,M=[];m.lastIndex=0;let k=m.exec(c.value);for(;k;){const O=k.index,w={index:k.index,input:k.input,stack:[...h,c]};let N=g(...k,w);if(typeof N=="string"&&(N=N.length>0?{type:"text",value:N}:void 0),N===!1?m.lastIndex=O+1:(E!==O&&M.push({type:"text",value:c.value.slice(E,O)}),Array.isArray(N)?M.push(...N):N&&M.push(N),E=O+k[0].length,I=!0),!m.global)break;k=m.exec(c.value)}return I?(E<c.value.length&&M.push({type:"text",value:c.value.slice(E)}),p.children.splice(R,1,...M)):M=[c],R+M.length}}function Zy(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const r=n[i];t.push([jy(r[0]),e_(r[1])])}return t}function jy(e){return typeof e=="string"?new RegExp(Qy(e),"g"):e}function e_(e){return typeof e=="function"?e:function(){return e}}const Ti="phrasing",Ei=["autolink","link","image","label"];function t_(){return{transforms:[a_],enter:{literalAutolink:i_,literalAutolinkEmail:Ci,literalAutolinkHttp:Ci,literalAutolinkWww:Ci},exit:{literalAutolink:s_,literalAutolinkEmail:u_,literalAutolinkHttp:r_,literalAutolinkWww:o_}}}function n_(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ti,notInConstruct:Ei},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ti,notInConstruct:Ei},{character:":",before:"[ps]",after:"\\/",inConstruct:Ti,notInConstruct:Ei}]}}function i_(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ci(e){this.config.enter.autolinkProtocol.call(this,e)}function r_(e){this.config.exit.autolinkProtocol.call(this,e)}function o_(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function u_(e){this.config.exit.autolinkEmail.call(this,e)}function s_(e){this.exit(e)}function a_(e){Xy(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,l_],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),c_]],{ignore:["link","linkReference"]})}function l_(e,t,n,i,r){let u="";if(!Ca(r)||(/^w/i.test(t)&&(n=t+n,t="",u="http://"),!f_(n)))return!1;const a=d_(n+i);if(!a[0])return!1;const l={type:"link",title:null,url:u+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function c_(e,t,n,i){return!Ca(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function f_(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function d_(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const r=Lu(e,"(");let u=Lu(e,")");for(;i!==-1&&r>u;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),u++;return[e,n]}function Ca(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ft(n)||Wn(n))&&(!t||n!==47)}ya.peek=__;function h_(){this.buffer()}function p_(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function m_(){this.buffer()}function g_(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function T_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ve(this.sliceSerialize(e)).toLowerCase(),n.label=t}function E_(e){this.exit(e)}function C_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ve(this.sliceSerialize(e)).toLowerCase(),n.label=t}function y_(e){this.exit(e)}function __(){return"["}function ya(e,t,n,i){const r=n.createTracker(i);let u=r.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return u+=r.move(n.safe(n.associationId(e),{after:"]",before:u})),l(),a(),u+=r.move("]"),u}function A_(){return{enter:{gfmFootnoteCallString:h_,gfmFootnoteCall:p_,gfmFootnoteDefinitionLabelString:m_,gfmFootnoteDefinition:g_},exit:{gfmFootnoteCallString:T_,gfmFootnoteCall:E_,gfmFootnoteDefinitionLabelString:C_,gfmFootnoteDefinition:y_}}}function S_(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:ya},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,u,a){const l=u.createTracker(a);let f=l.move("[^");const c=u.enter("footnoteDefinition"),h=u.enter("label");return f+=l.move(u.safe(u.associationId(i),{before:f,after:"]"})),h(),f+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),f+=l.move((t?`
`:" ")+u.indentLines(u.containerFlow(i,l.current()),t?_a:I_))),c(),f}}function I_(e,t,n){return t===0?e:_a(e,t,n)}function _a(e,t,n){return(n?"":"    ")+e}const b_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Aa.peek=M_;function x_(){return{canContainEols:["delete"],enter:{strikethrough:R_},exit:{strikethrough:k_}}}function N_(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:b_}],handlers:{delete:Aa}}}function R_(e){this.enter({type:"delete",children:[]},e)}function k_(e){this.exit(e)}function Aa(e,t,n,i){const r=n.createTracker(i),u=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(e,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),u(),a}function M_(){return"~"}function D_(e){return e.length}function P_(e,t){const n=t||{},i=(n.align||[]).concat(),r=n.stringLength||D_,u=[],a=[],l=[],f=[];let c=0,h=-1;for(;++h<e.length;){const A=[],R=[];let I=-1;for(e[h].length>c&&(c=e[h].length);++I<e[h].length;){const M=v_(e[h][I]);if(n.alignDelimiters!==!1){const k=r(M);R[I]=k,(f[I]===void 0||k>f[I])&&(f[I]=k)}A.push(M)}a[h]=A,l[h]=R}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<c;)u[p]=wu(i[p]);else{const A=wu(i);for(;++p<c;)u[p]=A}p=-1;const m=[],g=[];for(;++p<c;){const A=u[p];let R="",I="";A===99?(R=":",I=":"):A===108?R=":":A===114&&(I=":");let M=n.alignDelimiters===!1?1:Math.max(1,f[p]-R.length-I.length);const k=R+"-".repeat(M)+I;n.alignDelimiters!==!1&&(M=R.length+M+I.length,M>f[p]&&(f[p]=M),g[p]=M),m[p]=k}a.splice(1,0,m),l.splice(1,0,g),h=-1;const E=[];for(;++h<a.length;){const A=a[h],R=l[h];p=-1;const I=[];for(;++p<c;){const M=A[p]||"";let k="",O="";if(n.alignDelimiters!==!1){const w=f[p]-(R[p]||0),N=u[p];N===114?k=" ".repeat(w):N===99?w%2?(k=" ".repeat(w/2+.5),O=" ".repeat(w/2-.5)):(k=" ".repeat(w/2),O=k):O=" ".repeat(w)}n.delimiterStart!==!1&&!p&&I.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&M==="")&&(n.delimiterStart!==!1||p)&&I.push(" "),n.alignDelimiters!==!1&&I.push(k),I.push(M),n.alignDelimiters!==!1&&I.push(O),n.padding!==!1&&I.push(" "),(n.delimiterEnd!==!1||p!==c-1)&&I.push("|")}E.push(n.delimiterEnd===!1?I.join("").replace(/ +$/,""):I.join(""))}return E.join(`
`)}function v_(e){return e==null?"":String(e)}function wu(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const Ou={}.hasOwnProperty;function Sa(e,t){const n=t||{};function i(r,...u){let a=i.invalid;const l=i.handlers;if(r&&Ou.call(r,e)){const f=String(r[e]);a=Ou.call(l,f)?l[f]:i.unknown}if(a)return a.call(this,r,...u)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}function L_(e,t,n,i){const r=n.enter("blockquote"),u=n.createTracker(i);u.move("> "),u.shift(2);const a=n.indentLines(n.containerFlow(e,u.current()),w_);return r(),a}function w_(e,t,n){return">"+(n?"":" ")+e}function O_(e,t){return Fu(e,t.inConstruct,!0)&&!Fu(e,t.notInConstruct,!1)}function Fu(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Uu(e,t,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&O_(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function F_(e,t){const n=String(e);let i=n.indexOf(t),r=i,u=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++u>a&&(a=u):u=1,r=i+t.length,i=n.indexOf(t,r);return a}function U_(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function B_(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function H_(e,t,n,i){const r=B_(n),u=e.value||"",a=r==="`"?"GraveAccent":"Tilde";if(U_(e,n)){const p=n.enter("codeIndented"),m=n.indentLines(u,V_);return p(),m}const l=n.createTracker(i),f=r.repeat(Math.max(F_(u,r)+1,3)),c=n.enter("codeFenced");let h=l.move(f);if(e.lang){const p=n.enter(`codeFencedLang${a}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${a}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...l.current()})),p()}return h+=l.move(`
`),u&&(h+=l.move(u+`
`)),h+=l.move(f),c(),h}function V_(e,t,n){return(n?"":"    ")+e}function Er(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function q_(e,t,n,i){const r=Er(n),u=r==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const f=n.createTracker(i);let c=f.move("[");return c+=f.move(n.safe(n.associationId(e),{before:c,after:"]",...f.current()})),c+=f.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=f.move("<"),c+=f.move(n.safe(e.url,{before:c,after:">",...f.current()})),c+=f.move(">")):(l=n.enter("destinationRaw"),c+=f.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...f.current()}))),l(),e.title&&(l=n.enter(`title${u}`),c+=f.move(" "+r),c+=f.move(n.safe(e.title,{before:c,after:r,...f.current()})),c+=f.move(r),l()),a(),c}function G_(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function fn(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Un(e,t,n){const i=Rt(e),r=Rt(t);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Ia.peek=Y_;function Ia(e,t,n,i){const r=G_(n),u=n.enter("emphasis"),a=n.createTracker(i),l=a.move(r);let f=a.move(n.containerPhrasing(e,{after:r,before:l,...a.current()}));const c=f.charCodeAt(0),h=Un(i.before.charCodeAt(i.before.length-1),c,r);h.inside&&(f=fn(c)+f.slice(1));const p=f.charCodeAt(f.length-1),m=Un(i.after.charCodeAt(0),p,r);m.inside&&(f=f.slice(0,-1)+fn(p));const g=a.move(r);return u(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+f+g}function Y_(e,t,n){return n.options.emphasis||"*"}function z_(e,t){let n=!1;return gr(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,Hi}),!!((!e.depth||e.depth<3)&&lr(e)&&(t.options.setext||n))}function $_(e,t,n,i){const r=Math.max(Math.min(6,e.depth||1),1),u=n.createTracker(i);if(z_(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),m=n.containerPhrasing(e,{...u.current(),before:`
`,after:`
`});return p(),h(),m+`
`+(r===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const a="#".repeat(r),l=n.enter("headingAtx"),f=n.enter("phrasing");u.move(a+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(c)&&(c=fn(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),f(),l(),c}ba.peek=W_;function ba(e){return e.value||""}function W_(){return"<"}xa.peek=J_;function xa(e,t,n,i){const r=Er(n),u=r==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const f=n.createTracker(i);let c=f.move("![");return c+=f.move(n.safe(e.alt,{before:c,after:"]",...f.current()})),c+=f.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=f.move("<"),c+=f.move(n.safe(e.url,{before:c,after:">",...f.current()})),c+=f.move(">")):(l=n.enter("destinationRaw"),c+=f.move(n.safe(e.url,{before:c,after:e.title?" ":")",...f.current()}))),l(),e.title&&(l=n.enter(`title${u}`),c+=f.move(" "+r),c+=f.move(n.safe(e.title,{before:c,after:r,...f.current()})),c+=f.move(r),l()),c+=f.move(")"),a(),c}function J_(){return"!"}Na.peek=K_;function Na(e,t,n,i){const r=e.referenceType,u=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(i);let f=l.move("![");const c=n.safe(e.alt,{before:f,after:"]",...l.current()});f+=l.move(c+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(e),{before:f,after:"]",...l.current()});return a(),n.stack=h,u(),r==="full"||!c||c!==p?f+=l.move(p+"]"):r==="shortcut"?f=f.slice(0,-1):f+=l.move("]"),f}function K_(){return"!"}Ra.peek=Q_;function Ra(e,t,n){let i=e.value||"",r="`",u=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++u<n.unsafe.length;){const a=n.unsafe[u],l=n.compilePattern(a);let f;if(a.atBreak)for(;f=l.exec(i);){let c=f.index;i.charCodeAt(c)===10&&i.charCodeAt(c-1)===13&&c--,i=i.slice(0,c)+" "+i.slice(f.index+1)}}return r+i+r}function Q_(){return"`"}function ka(e,t){const n=lr(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Ma.peek=X_;function Ma(e,t,n,i){const r=Er(n),u=r==='"'?"Quote":"Apostrophe",a=n.createTracker(i);let l,f;if(ka(e,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(e,{before:p,after:">",...a.current()})),p+=a.move(">"),l(),n.stack=h,p}l=n.enter("link"),f=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,{before:c,after:"](",...a.current()})),c+=a.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(f=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,{before:c,after:e.title?" ":")",...a.current()}))),f(),e.title&&(f=n.enter(`title${u}`),c+=a.move(" "+r),c+=a.move(n.safe(e.title,{before:c,after:r,...a.current()})),c+=a.move(r),f()),c+=a.move(")"),l(),c}function X_(e,t,n){return ka(e,n)?"<":"["}Da.peek=Z_;function Da(e,t,n,i){const r=e.referenceType,u=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(i);let f=l.move("[");const c=n.containerPhrasing(e,{before:f,after:"]",...l.current()});f+=l.move(c+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(e),{before:f,after:"]",...l.current()});return a(),n.stack=h,u(),r==="full"||!c||c!==p?f+=l.move(p+"]"):r==="shortcut"?f=f.slice(0,-1):f+=l.move("]"),f}function Z_(){return"["}function Cr(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function j_(e){const t=Cr(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function eA(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Pa(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function tA(e,t,n,i){const r=n.enter("list"),u=n.bulletCurrent;let a=e.ordered?eA(n):Cr(n);const l=e.ordered?a==="."?")":".":j_(n);let f=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),Pa(n)===a&&h){let p=-1;for(;++p<e.children.length;){const m=e.children[p];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(a=l),n.bulletCurrent=a;const c=n.containerFlow(e,i);return n.bulletLastUsed=a,n.bulletCurrent=u,r(),c}function nA(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function iA(e,t,n,i){const r=nA(n);let u=n.bulletCurrent||Cr(n);t&&t.type==="list"&&t.ordered&&(u=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+u);let a=u.length+1;(r==="tab"||r==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(i);l.move(u+" ".repeat(a-u.length)),l.shift(a);const f=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,l.current()),h);return f(),c;function h(p,m,g){return m?(g?"":" ".repeat(a))+p:(g?u:u+" ".repeat(a-u.length))+p}}function rA(e,t,n,i){const r=n.enter("paragraph"),u=n.enter("phrasing"),a=n.containerPhrasing(e,i);return u(),r(),a}const oA=Qn(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function uA(e,t,n,i){return(e.children.some(function(a){return oA(a)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function sA(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}va.peek=aA;function va(e,t,n,i){const r=sA(n),u=n.enter("strong"),a=n.createTracker(i),l=a.move(r+r);let f=a.move(n.containerPhrasing(e,{after:r,before:l,...a.current()}));const c=f.charCodeAt(0),h=Un(i.before.charCodeAt(i.before.length-1),c,r);h.inside&&(f=fn(c)+f.slice(1));const p=f.charCodeAt(f.length-1),m=Un(i.after.charCodeAt(0),p,r);m.inside&&(f=f.slice(0,-1)+fn(p));const g=a.move(r+r);return u(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+f+g}function aA(e,t,n){return n.options.strong||"*"}function lA(e,t,n,i){return n.safe(e.value,i)}function cA(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function fA(e,t,n){const i=(Pa(n)+(n.options.ruleSpaces?" ":"")).repeat(cA(n));return n.options.ruleSpaces?i.slice(0,-1):i}const La={blockquote:L_,break:Uu,code:H_,definition:q_,emphasis:Ia,hardBreak:Uu,heading:$_,html:ba,image:xa,imageReference:Na,inlineCode:Ra,link:Ma,linkReference:Da,list:tA,listItem:iA,paragraph:rA,root:uA,strong:va,text:lA,thematicBreak:fA};function dA(){return{enter:{table:hA,tableData:Bu,tableHeader:Bu,tableRow:mA},exit:{codeText:gA,table:pA,tableData:yi,tableHeader:yi,tableRow:yi}}}function hA(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function pA(e){this.exit(e),this.data.inTable=void 0}function mA(e){this.enter({type:"tableRow",children:[]},e)}function yi(e){this.exit(e)}function Bu(e){this.enter({type:"tableCell",children:[]},e)}function gA(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,TA));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function TA(e,t){return t==="|"?t:e}function EA(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,r=t.stringLength,u=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:a,tableCell:f,tableRow:l}};function a(g,E,A,R){return c(h(g,A,R),g.align)}function l(g,E,A,R){const I=p(g,A,R),M=c([I]);return M.slice(0,M.indexOf(`
`))}function f(g,E,A,R){const I=A.enter("tableCell"),M=A.enter("phrasing"),k=A.containerPhrasing(g,{...R,before:u,after:u});return M(),I(),k}function c(g,E){return P_(g,{align:E,alignDelimiters:i,padding:n,stringLength:r})}function h(g,E,A){const R=g.children;let I=-1;const M=[],k=E.enter("table");for(;++I<R.length;)M[I]=p(R[I],E,A);return k(),M}function p(g,E,A){const R=g.children;let I=-1;const M=[],k=E.enter("tableRow");for(;++I<R.length;)M[I]=f(R[I],g,E,A);return k(),M}function m(g,E,A){let R=La.inlineCode(g,E,A);return A.stack.includes("tableCell")&&(R=R.replace(/\|/g,"\\$&")),R}}function CA(){return{exit:{taskListCheckValueChecked:Hu,taskListCheckValueUnchecked:Hu,paragraph:_A}}}function yA(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:AA}}}function Hu(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function _A(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=t.children;let u=-1,a;for(;++u<r.length;){const l=r[u];if(l.type==="paragraph"){a=l;break}}a===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function AA(e,t,n,i){const r=e.children[0],u=typeof e.checked=="boolean"&&r&&r.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(i);u&&l.move(a);let f=La.listItem(e,t,n,{...i,...l.current()});return u&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),f;function c(h){return h+a}}function SA(){return[t_(),A_(),x_(),dA(),CA()]}function IA(e){return{extensions:[n_(),S_(e),N_(),EA(e),yA()]}}const bA={tokenize:DA,partial:!0},wa={tokenize:PA,partial:!0},Oa={tokenize:vA,partial:!0},Fa={tokenize:LA,partial:!0},xA={tokenize:wA,partial:!0},Ua={name:"wwwAutolink",tokenize:kA,previous:Ha},Ba={name:"protocolAutolink",tokenize:MA,previous:Va},Ze={name:"emailAutolink",tokenize:RA,previous:qa},$e={};function NA(){return{text:$e}}let st=48;for(;st<123;)$e[st]=Ze,st++,st===58?st=65:st===91&&(st=97);$e[43]=Ze;$e[45]=Ze;$e[46]=Ze;$e[95]=Ze;$e[72]=[Ze,Ba];$e[104]=[Ze,Ba];$e[87]=[Ze,Ua];$e[119]=[Ze,Ua];function RA(e,t,n){const i=this;let r,u;return a;function a(p){return!Yi(p)||!qa.call(i,i.previous)||yr(i.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(p))}function l(p){return Yi(p)?(e.consume(p),l):p===64?(e.consume(p),f):n(p)}function f(p){return p===46?e.check(xA,h,c)(p):p===45||p===95||Se(p)?(u=!0,e.consume(p),f):h(p)}function c(p){return e.consume(p),r=!0,f}function h(p){return u&&r&&xe(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function kA(e,t,n){const i=this;return r;function r(a){return a!==87&&a!==119||!Ha.call(i,i.previous)||yr(i.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(bA,e.attempt(wa,e.attempt(Oa,u),n),n)(a))}function u(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function MA(e,t,n){const i=this;let r="",u=!1;return a;function a(p){return(p===72||p===104)&&Va.call(i,i.previous)&&!yr(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),r+=String.fromCodePoint(p),e.consume(p),l):n(p)}function l(p){if(xe(p)&&r.length<5)return r+=String.fromCodePoint(p),e.consume(p),l;if(p===58){const m=r.toLowerCase();if(m==="http"||m==="https")return e.consume(p),f}return n(p)}function f(p){return p===47?(e.consume(p),u?c:(u=!0,f)):n(p)}function c(p){return p===null||On(p)||le(p)||ft(p)||Wn(p)?n(p):e.attempt(wa,e.attempt(Oa,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function DA(e,t,n){let i=0;return r;function r(a){return(a===87||a===119)&&i<3?(i++,e.consume(a),r):a===46&&i===3?(e.consume(a),u):n(a)}function u(a){return a===null?n(a):t(a)}}function PA(e,t,n){let i,r,u;return a;function a(c){return c===46||c===95?e.check(Fa,f,l)(c):c===null||le(c)||ft(c)||c!==45&&Wn(c)?f(c):(u=!0,e.consume(c),a)}function l(c){return c===95?i=!0:(r=i,i=void 0),e.consume(c),a}function f(c){return r||i||!u?n(c):t(c)}}function vA(e,t){let n=0,i=0;return r;function r(a){return a===40?(n++,e.consume(a),r):a===41&&i<n?u(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(Fa,t,u)(a):a===null||le(a)||ft(a)?t(a):(e.consume(a),r)}function u(a){return a===41&&i++,e.consume(a),r}}function LA(e,t,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),i):l===38?(e.consume(l),u):l===93?(e.consume(l),r):l===60||l===null||le(l)||ft(l)?t(l):n(l)}function r(l){return l===null||l===40||l===91||le(l)||ft(l)?t(l):i(l)}function u(l){return xe(l)?a(l):n(l)}function a(l){return l===59?(e.consume(l),i):xe(l)?(e.consume(l),a):n(l)}}function wA(e,t,n){return i;function i(u){return e.consume(u),r}function r(u){return Se(u)?n(u):t(u)}}function Ha(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||le(e)}function Va(e){return!xe(e)}function qa(e){return!(e===47||Yi(e))}function Yi(e){return e===43||e===45||e===46||e===95||Se(e)}function yr(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const OA={tokenize:YA,partial:!0};function FA(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:VA,continuation:{tokenize:qA},exit:GA}},text:{91:{name:"gfmFootnoteCall",tokenize:HA},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:UA,resolveTo:BA}}}}function UA(e,t,n){const i=this;let r=i.events.length;const u=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;r--;){const f=i.events[r][1];if(f.type==="labelImage"){a=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return l;function l(f){if(!a||!a._balanced)return n(f);const c=Ve(i.sliceSerialize({start:a.end,end:i.now()}));return c.codePointAt(0)!==94||!u.includes(c.slice(1))?n(f):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),t(f))}}function BA(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const u={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},u.start),end:Object.assign({},u.end)},l=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",r,t],["exit",r,t],["enter",u,t],["enter",a,t],["exit",a,t],["exit",u,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...l),e}function HA(e,t,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let u=0,a;return l;function l(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(p){if(u>999||p===93&&!a||p===null||p===91||le(p))return n(p);if(p===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return r.includes(Ve(i.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return le(p)||(a=!0),u++,e.consume(p),p===92?h:c}function h(p){return p===91||p===92||p===93?(e.consume(p),u++,c):c(p)}}function VA(e,t,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let u,a=0,l;return f;function f(E){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(E),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(E){return E===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(E),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(E)}function h(E){if(a>999||E===93&&!l||E===null||E===91||le(E))return n(E);if(E===93){e.exit("chunkString");const A=e.exit("gfmFootnoteDefinitionLabelString");return u=Ve(i.sliceSerialize(A)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(E),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return le(E)||(l=!0),a++,e.consume(E),E===92?p:h}function p(E){return E===91||E===92||E===93?(e.consume(E),a++,h):h(E)}function m(E){return E===58?(e.enter("definitionMarker"),e.consume(E),e.exit("definitionMarker"),r.includes(u)||r.push(u),oe(e,g,"gfmFootnoteDefinitionWhitespace")):n(E)}function g(E){return t(E)}}function qA(e,t,n){return e.check(mn,t,e.attempt(OA,t,n))}function GA(e){e.exit("gfmFootnoteDefinition")}function YA(e,t,n){const i=this;return oe(e,r,"gfmFootnoteDefinitionIndent",5);function r(u){const a=i.events[i.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(u):n(u)}}function zA(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:u,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(a,l){let f=-1;for(;++f<a.length;)if(a[f][0]==="enter"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._close){let c=f;for(;c--;)if(a[c][0]==="exit"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._open&&a[f][1].end.offset-a[f][1].start.offset===a[c][1].end.offset-a[c][1].start.offset){a[f][1].type="strikethroughSequence",a[c][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},a[c][1].start),end:Object.assign({},a[f][1].end)},p={type:"strikethroughText",start:Object.assign({},a[c][1].end),end:Object.assign({},a[f][1].start)},m=[["enter",h,l],["enter",a[c][1],l],["exit",a[c][1],l],["enter",p,l]],g=l.parser.constructs.insideSpan.null;g&&Le(m,m.length,0,Jn(g,a.slice(c+1,f),l)),Le(m,m.length,0,[["exit",p,l],["enter",a[f][1],l],["exit",a[f][1],l],["exit",h,l]]),Le(a,c-1,f-c+3,m),f=c+m.length-2;break}}for(f=-1;++f<a.length;)a[f][1].type==="strikethroughSequenceTemporary"&&(a[f][1].type="data");return a}function u(a,l,f){const c=this.previous,h=this.events;let p=0;return m;function m(E){return c===126&&h[h.length-1][1].type!=="characterEscape"?f(E):(a.enter("strikethroughSequenceTemporary"),g(E))}function g(E){const A=Rt(c);if(E===126)return p>1?f(E):(a.consume(E),p++,g);if(p<2&&!n)return f(E);const R=a.exit("strikethroughSequenceTemporary"),I=Rt(E);return R._open=!I||I===2&&!!A,R._close=!A||A===2&&!!I,l(E)}}}class $A{constructor(){this.map=[]}add(t,n,i){WA(this,t,n,i)}consume(t){if(this.map.sort(function(u,a){return u[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let r=i.pop();for(;r;){for(const u of r)t.push(u);r=i.pop()}this.map.length=0}}function WA(e,t,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<e.map.length;){if(e.map[r][0]===t){e.map[r][1]+=n,e.map[r][2].push(...i);return}r+=1}e.map.push([t,n,i])}}function JA(e,t){let n=!1;const i=[];for(;t<e.length;){const r=e[t];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const u=i.length-1;i[u]=i[u]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function KA(){return{flow:{null:{name:"table",tokenize:QA,resolveAll:XA}}}}function QA(e,t,n){const i=this;let r=0,u=0,a;return l;function l(x){let F=i.events.length-1;for(;F>-1;){const z=i.events[F][1].type;if(z==="lineEnding"||z==="linePrefix")F--;else break}const Y=F>-1?i.events[F][1].type:null,$=Y==="tableHead"||Y==="tableRow"?N:f;return $===N&&i.parser.lazy[i.now().line]?n(x):$(x)}function f(x){return e.enter("tableHead"),e.enter("tableRow"),c(x)}function c(x){return x===124||(a=!0,u+=1),h(x)}function h(x){return x===null?n(x):Q(x)?u>1?(u=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),g):n(x):ie(x)?oe(e,h,"whitespace")(x):(u+=1,a&&(a=!1,r+=1),x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),a=!0,h):(e.enter("data"),p(x)))}function p(x){return x===null||x===124||le(x)?(e.exit("data"),h(x)):(e.consume(x),x===92?m:p)}function m(x){return x===92||x===124?(e.consume(x),p):p(x)}function g(x){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(x):(e.enter("tableDelimiterRow"),a=!1,ie(x)?oe(e,E,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):E(x))}function E(x){return x===45||x===58?R(x):x===124?(a=!0,e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),A):w(x)}function A(x){return ie(x)?oe(e,R,"whitespace")(x):R(x)}function R(x){return x===58?(u+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),I):x===45?(u+=1,I(x)):x===null||Q(x)?O(x):w(x)}function I(x){return x===45?(e.enter("tableDelimiterFiller"),M(x)):w(x)}function M(x){return x===45?(e.consume(x),M):x===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),k):(e.exit("tableDelimiterFiller"),k(x))}function k(x){return ie(x)?oe(e,O,"whitespace")(x):O(x)}function O(x){return x===124?E(x):x===null||Q(x)?!a||r!==u?w(x):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(x)):w(x)}function w(x){return n(x)}function N(x){return e.enter("tableRow"),q(x)}function q(x){return x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),q):x===null||Q(x)?(e.exit("tableRow"),t(x)):ie(x)?oe(e,q,"whitespace")(x):(e.enter("data"),Z(x))}function Z(x){return x===null||x===124||le(x)?(e.exit("data"),q(x)):(e.consume(x),x===92?G:Z)}function G(x){return x===92||x===124?(e.consume(x),Z):Z(x)}}function XA(e,t){let n=-1,i=!0,r=0,u=[0,0,0,0],a=[0,0,0,0],l=!1,f=0,c,h,p;const m=new $A;for(;++n<e.length;){const g=e[n],E=g[1];g[0]==="enter"?E.type==="tableHead"?(l=!1,f!==0&&(Vu(m,t,f,c,h),h=void 0,f=0),c={type:"table",start:Object.assign({},E.start),end:Object.assign({},E.end)},m.add(n,0,[["enter",c,t]])):E.type==="tableRow"||E.type==="tableDelimiterRow"?(i=!0,p=void 0,u=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},E.start),end:Object.assign({},E.end)},m.add(n,0,[["enter",h,t]])),r=E.type==="tableDelimiterRow"?2:h?3:1):r&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")?(i=!1,a[2]===0&&(u[1]!==0&&(a[0]=a[1],p=xn(m,t,u,r,void 0,p),u=[0,0,0,0]),a[2]=n)):E.type==="tableCellDivider"&&(i?i=!1:(u[1]!==0&&(a[0]=a[1],p=xn(m,t,u,r,void 0,p)),u=a,a=[u[1],n,0,0])):E.type==="tableHead"?(l=!0,f=n):E.type==="tableRow"||E.type==="tableDelimiterRow"?(f=n,u[1]!==0?(a[0]=a[1],p=xn(m,t,u,r,n,p)):a[1]!==0&&(p=xn(m,t,a,r,n,p)),r=0):r&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")&&(a[3]=n)}for(f!==0&&Vu(m,t,f,c,h),m.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=JA(t.events,n))}return e}function xn(e,t,n,i,r,u){const a=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(u.end=Object.assign({},_t(t.events,n[0])),e.add(n[0],0,[["exit",u,t]]));const f=_t(t.events,n[1]);if(u={type:a,start:Object.assign({},f),end:Object.assign({},f)},e.add(n[1],0,[["enter",u,t]]),n[2]!==0){const c=_t(t.events,n[2]),h=_t(t.events,n[3]),p={type:l,start:Object.assign({},c),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),i!==2){const m=t.events[n[2]],g=t.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const E=n[2]+1,A=n[3]-n[2]-1;e.add(E,A,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return r!==void 0&&(u.end=Object.assign({},_t(t.events,r)),e.add(r,0,[["exit",u,t]]),u=void 0),u}function Vu(e,t,n,i,r){const u=[],a=_t(t.events,n);r&&(r.end=Object.assign({},a),u.push(["exit",r,t])),i.end=Object.assign({},a),u.push(["exit",i,t]),e.add(n+1,0,u)}function _t(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const ZA={name:"tasklistCheck",tokenize:eS};function jA(){return{text:{91:ZA}}}function eS(e,t,n){const i=this;return r;function r(f){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(f):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),u)}function u(f){return le(f)?(e.enter("taskListCheckValueUnchecked"),e.consume(f),e.exit("taskListCheckValueUnchecked"),a):f===88||f===120?(e.enter("taskListCheckValueChecked"),e.consume(f),e.exit("taskListCheckValueChecked"),a):n(f)}function a(f){return f===93?(e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(f)}function l(f){return Q(f)?t(f):ie(f)?e.check({tokenize:tS},t,n)(f):n(f)}}function tS(e,t,n){return oe(e,i,"whitespace");function i(r){return r===null?n(r):t(r)}}function nS(e){return js([NA(),FA(),zA(e),KA(),jA()])}const iS={};function F2(e){const t=this,n=e||iS,i=t.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),u=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(nS(n)),u.push(SA()),a.push(IA(n))}const qu=/[#.]/g;function rS(e,t){const n=e||"",i={};let r=0,u,a;for(;r<n.length;){qu.lastIndex=r;const l=qu.exec(n),f=n.slice(r,l?l.index:n.length);f&&(u?u==="#"?i.id=f:Array.isArray(i.className)?i.className.push(f):i.className=[f]:a=f,r+=f.length),l&&(u=l[0],r++)}return{type:"element",tagName:a||t||"div",properties:i,children:[]}}function Ga(e,t,n){const i=n?aS(n):void 0;function r(u,a,...l){let f;if(u==null){f={type:"root",children:[]};const c=a;l.unshift(c)}else{f=rS(u,t);const c=f.tagName.toLowerCase(),h=i?i.get(c):void 0;if(f.tagName=h||c,oS(a))l.unshift(a);else for(const[p,m]of Object.entries(a))uS(e,f.properties,p,m)}for(const c of l)zi(f.children,c);return f.type==="element"&&f.tagName==="template"&&(f.content={type:"root",children:f.children},f.children=[]),f}return r}function oS(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const i of n){const r=t[i];if(r&&typeof r=="object"){if(!Array.isArray(r))return!0;const u=r;for(const a of u)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function uS(e,t,n,i){const r=or(e,n);let u;if(i!=null){if(typeof i=="number"){if(Number.isNaN(i))return;u=i}else typeof i=="boolean"?u=i:typeof i=="string"?r.spaceSeparated?u=iu(i):r.commaSeparated?u=Zo(i):r.commaOrSpaceSeparated?u=iu(Zo(i).join(" ")):u=Gu(r,r.property,i):Array.isArray(i)?u=[...i]:u=r.property==="style"?sS(i):String(i);if(Array.isArray(u)){const a=[];for(const l of u)a.push(Gu(r,r.property,l));u=a}r.property==="className"&&Array.isArray(t.className)&&(u=t.className.concat(u)),t[r.property]=u}}function zi(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)zi(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?zi(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Gu(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ln(n)===ln(t)))return!0}return n}function sS(e){const t=[];for(const[n,i]of Object.entries(e))t.push([n,i].join(": "));return t.join("; ")}function aS(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const lS=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],cS=Ga(zn,"div"),fS=Ga(Ot,"g",lS);function dS(e){const t=String(e),n=[];return{toOffset:r,toPoint:i};function i(u){if(typeof u=="number"&&u>-1&&u<=t.length){let a=0;for(;;){let l=n[a];if(l===void 0){const f=Yu(t,n[a-1]);l=f===-1?t.length+1:f+1,n[a]=l}if(l>u)return{line:a+1,column:u-(a>0?n[a-1]:0)+1,offset:u};a++}}}function r(u){if(u&&typeof u.line=="number"&&typeof u.column=="number"&&!Number.isNaN(u.line)&&!Number.isNaN(u.column)){for(;n.length<u.line;){const l=n[n.length-1],f=Yu(t,l),c=f===-1?t.length+1:f+1;if(l===c)break;n.push(c)}const a=(u.line>1?n[u.line-2]:0)+u.column-1;if(a<n[u.line-1])return a}}}function Yu(e,t){const n=e.indexOf("\r",t),i=e.indexOf(`
`,t);return i===-1?n:n===-1||n+1===i?i:n<i?n:i}const at={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ya={}.hasOwnProperty,hS=Object.prototype;function pS(e,t){const n=t||{};return _r({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ot:zn,verbose:n.verbose||!1},e)}function _r(e,t){let n;switch(t.nodeName){case"#comment":{const i=t;return n={type:"comment",value:i.data},Pn(e,i,n),n}case"#document":case"#document-fragment":{const i=t,r="mode"in i?i.mode==="quirks"||i.mode==="limited-quirks":!1;if(n={type:"root",children:za(e,t.childNodes),data:{quirksMode:r}},e.file&&e.location){const u=String(e.file),a=dS(u),l=a.toPoint(0),f=a.toPoint(u.length);n.position={start:l,end:f}}return n}case"#documentType":{const i=t;return n={type:"doctype"},Pn(e,i,n),n}case"#text":{const i=t;return n={type:"text",value:i.value},Pn(e,i,n),n}default:return n=mS(e,t),n}}function za(e,t){let n=-1;const i=[];for(;++n<t.length;){const r=_r(e,t[n]);i.push(r)}return i}function mS(e,t){const n=e.schema;e.schema=t.namespaceURI===at.svg?Ot:zn;let i=-1;const r={};for(;++i<t.attrs.length;){const l=t.attrs[i],f=(l.prefix?l.prefix+":":"")+l.name;Ya.call(hS,f)||(r[f]=l.value)}const a=(e.schema.space==="svg"?fS:cS)(t.tagName,r,za(e,t.childNodes));if(Pn(e,t,a),a.tagName==="template"){const l=t,f=l.sourceCodeLocation,c=f&&f.startTag&&St(f.startTag),h=f&&f.endTag&&St(f.endTag),p=_r(e,l.content);c&&h&&e.file&&(p.position={start:c.end,end:h.start}),a.content=p}return e.schema=n,a}function Pn(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const i=gS(e,n,t.sourceCodeLocation);i&&(e.location=!0,n.position=i)}}function gS(e,t,n){const i=St(n);if(t.type==="element"){const r=t.children[t.children.length-1];if(i&&!n.endTag&&r&&r.position&&r.position.end&&(i.end=Object.assign({},r.position.end)),e.verbose){const u={};let a;if(n.attrs)for(a in n.attrs)Ya.call(n.attrs,a)&&(u[or(e.schema,a).property]=St(n.attrs[a]));n.startTag;const l=St(n.startTag),f=n.endTag?St(n.endTag):void 0,c={opening:l};f&&(c.closing=f),c.properties=u,t.data={position:c}}}return i}function St(e){const t=zu({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=zu({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function zu(e){return e.line&&e.column?e:void 0}class Tn{constructor(t,n,i){this.property=t,this.normal=n,i&&(this.space=i)}}Tn.prototype.property={};Tn.prototype.normal={};Tn.prototype.space=null;function $a(e,t){const n={},i={};let r=-1;for(;++r<e.length;)Object.assign(n,e[r].property),Object.assign(i,e[r].normal);return new Tn(n,i,t)}function $i(e){return e.toLowerCase()}class Be{constructor(t,n){this.property=t,this.attribute=n}}Be.prototype.space=null;Be.prototype.boolean=!1;Be.prototype.booleanish=!1;Be.prototype.overloadedBoolean=!1;Be.prototype.number=!1;Be.prototype.commaSeparated=!1;Be.prototype.spaceSeparated=!1;Be.prototype.commaOrSpaceSeparated=!1;Be.prototype.mustUseProperty=!1;Be.prototype.defined=!1;let TS=0;const ee=pt(),ge=pt(),Wa=pt(),B=pt(),fe=pt(),Nt=pt(),ve=pt();function pt(){return 2**++TS}const Wi=Object.freeze(Object.defineProperty({__proto__:null,boolean:ee,booleanish:ge,commaOrSpaceSeparated:ve,commaSeparated:Nt,number:B,overloadedBoolean:Wa,spaceSeparated:fe},Symbol.toStringTag,{value:"Module"})),_i=Object.keys(Wi);class Ar extends Be{constructor(t,n,i,r){let u=-1;if(super(t,n),$u(this,"space",r),typeof i=="number")for(;++u<_i.length;){const a=_i[u];$u(this,_i[u],(i&Wi[a])===Wi[a])}}}Ar.prototype.defined=!0;function $u(e,t,n){n&&(e[t]=n)}const ES={}.hasOwnProperty;function Ut(e){const t={},n={};let i;for(i in e.properties)if(ES.call(e.properties,i)){const r=e.properties[i],u=new Ar(i,e.transform(e.attributes||{},i),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(u.mustUseProperty=!0),t[i]=u,n[$i(i)]=i,n[$i(u.attribute)]=i}return new Tn(t,n,e.space)}const Ja=Ut({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Ka=Ut({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Qa(e,t){return t in e?e[t]:t}function Xa(e,t){return Qa(e,t.toLowerCase())}const Za=Ut({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Xa,properties:{xmlns:null,xmlnsXLink:null}}),ja=Ut({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ge,ariaAutoComplete:null,ariaBusy:ge,ariaChecked:ge,ariaColCount:B,ariaColIndex:B,ariaColSpan:B,ariaControls:fe,ariaCurrent:null,ariaDescribedBy:fe,ariaDetails:null,ariaDisabled:ge,ariaDropEffect:fe,ariaErrorMessage:null,ariaExpanded:ge,ariaFlowTo:fe,ariaGrabbed:ge,ariaHasPopup:null,ariaHidden:ge,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fe,ariaLevel:B,ariaLive:null,ariaModal:ge,ariaMultiLine:ge,ariaMultiSelectable:ge,ariaOrientation:null,ariaOwns:fe,ariaPlaceholder:null,ariaPosInSet:B,ariaPressed:ge,ariaReadOnly:ge,ariaRelevant:null,ariaRequired:ge,ariaRoleDescription:fe,ariaRowCount:B,ariaRowIndex:B,ariaRowSpan:B,ariaSelected:ge,ariaSetSize:B,ariaSort:null,ariaValueMax:B,ariaValueMin:B,ariaValueNow:B,ariaValueText:null,role:null}}),CS=Ut({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Xa,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Nt,acceptCharset:fe,accessKey:fe,action:null,allow:null,allowFullScreen:ee,allowPaymentRequest:ee,allowUserMedia:ee,alt:null,as:null,async:ee,autoCapitalize:null,autoComplete:fe,autoFocus:ee,autoPlay:ee,blocking:fe,capture:null,charSet:null,checked:ee,cite:null,className:fe,cols:B,colSpan:null,content:null,contentEditable:ge,controls:ee,controlsList:fe,coords:B|Nt,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ee,defer:ee,dir:null,dirName:null,disabled:ee,download:Wa,draggable:ge,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ee,formTarget:null,headers:fe,height:B,hidden:ee,high:B,href:null,hrefLang:null,htmlFor:fe,httpEquiv:fe,id:null,imageSizes:null,imageSrcSet:null,inert:ee,inputMode:null,integrity:null,is:null,isMap:ee,itemId:null,itemProp:fe,itemRef:fe,itemScope:ee,itemType:fe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ee,low:B,manifest:null,max:null,maxLength:B,media:null,method:null,min:null,minLength:B,multiple:ee,muted:ee,name:null,nonce:null,noModule:ee,noValidate:ee,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ee,optimum:B,pattern:null,ping:fe,placeholder:null,playsInline:ee,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ee,referrerPolicy:null,rel:fe,required:ee,reversed:ee,rows:B,rowSpan:B,sandbox:fe,scope:null,scoped:ee,seamless:ee,selected:ee,shadowRootClonable:ee,shadowRootDelegatesFocus:ee,shadowRootMode:null,shape:null,size:B,sizes:null,slot:null,span:B,spellCheck:ge,src:null,srcDoc:null,srcLang:null,srcSet:null,start:B,step:null,style:null,tabIndex:B,target:null,title:null,translate:null,type:null,typeMustMatch:ee,useMap:null,value:ge,width:B,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fe,axis:null,background:null,bgColor:null,border:B,borderColor:null,bottomMargin:B,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ee,declare:ee,event:null,face:null,frame:null,frameBorder:null,hSpace:B,leftMargin:B,link:null,longDesc:null,lowSrc:null,marginHeight:B,marginWidth:B,noResize:ee,noHref:ee,noShade:ee,noWrap:ee,object:null,profile:null,prompt:null,rev:null,rightMargin:B,rules:null,scheme:null,scrolling:ge,standby:null,summary:null,text:null,topMargin:B,valueType:null,version:null,vAlign:null,vLink:null,vSpace:B,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ee,disableRemotePlayback:ee,prefix:null,property:null,results:B,security:null,unselectable:null}}),yS=Ut({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Qa,properties:{about:ve,accentHeight:B,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:B,amplitude:B,arabicForm:null,ascent:B,attributeName:null,attributeType:null,azimuth:B,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:B,by:null,calcMode:null,capHeight:B,className:fe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:B,diffuseConstant:B,direction:null,display:null,dur:null,divisor:B,dominantBaseline:null,download:ee,dx:null,dy:null,edgeMode:null,editable:null,elevation:B,enableBackground:null,end:null,event:null,exponent:B,externalResourcesRequired:null,fill:null,fillOpacity:B,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Nt,g2:Nt,glyphName:Nt,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:B,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:B,horizOriginX:B,horizOriginY:B,id:null,ideographic:B,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:B,k:B,k1:B,k2:B,k3:B,k4:B,kernelMatrix:ve,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:B,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:B,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:B,overlineThickness:B,paintOrder:null,panose1:null,path:null,pathLength:B,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:B,pointsAtY:B,pointsAtZ:B,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ve,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ve,rev:ve,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ve,requiredFeatures:ve,requiredFonts:ve,requiredFormats:ve,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:B,specularExponent:B,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:B,strikethroughThickness:B,string:null,stroke:null,strokeDashArray:ve,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:B,strokeOpacity:B,strokeWidth:null,style:null,surfaceScale:B,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ve,tabIndex:B,tableValues:null,target:null,targetX:B,targetY:B,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ve,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:B,underlineThickness:B,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:B,values:null,vAlphabetic:B,vMathematical:B,vectorEffect:null,vHanging:B,vIdeographic:B,version:null,vertAdvY:B,vertOriginX:B,vertOriginY:B,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:B,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),_S=/^data[-\w.:]+$/i,Wu=/-[a-z]/g,AS=/[A-Z]/g;function SS(e,t){const n=$i(t);let i=t,r=Be;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_S.test(t)){if(t.charAt(4)==="-"){const u=t.slice(5).replace(Wu,bS);i="data"+u.charAt(0).toUpperCase()+u.slice(1)}else{const u=t.slice(4);if(!Wu.test(u)){let a=u.replace(AS,IS);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}r=Ar}return new r(i,t)}function IS(e){return"-"+e.toLowerCase()}function bS(e){return e.charAt(1).toUpperCase()}const xS=$a([Ka,Ja,Za,ja,CS],"html"),el=$a([Ka,Ja,Za,ja,yS],"svg"),NS={},RS={}.hasOwnProperty,tl=Sa("type",{handlers:{root:MS,element:wS,text:vS,comment:LS,doctype:PS}});function kS(e,t){const i=(t||NS).space;return tl(e,i==="svg"?el:xS)}function MS(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Sr(e.children,n,t),Bt(e,n),n}function DS(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Sr(e.children,n,t),Bt(e,n),n}function PS(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Bt(e,t),t}function vS(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Bt(e,t),t}function LS(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Bt(e,t),t}function wS(e,t){const n=t;let i=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=el);const r=[];let u;if(e.properties){for(u in e.properties)if(u!=="children"&&RS.call(e.properties,u)){const f=OS(i,u,e.properties[u]);f&&r.push(f)}}const a=i.space,l={nodeName:e.tagName,tagName:e.tagName,attrs:r,namespaceURI:at[a],childNodes:[],parentNode:null};return l.childNodes=Sr(e.children,l,i),Bt(e,l),e.tagName==="template"&&e.content&&(l.content=DS(e.content,i)),l}function OS(e,t,n){const i=SS(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&i.boolean)return;Array.isArray(n)&&(n=i.commaSeparated?Us(n):$s(n));const r={name:i.attribute,value:n===!0?"":String(n)};if(i.space&&i.space!=="html"&&i.space!=="svg"){const u=r.name.indexOf(":");u<0?r.prefix="":(r.name=r.name.slice(u+1),r.prefix=i.attribute.slice(0,u)),r.namespace=at[i.space]}return r}function Sr(e,t,n){let i=-1;const r=[];if(e)for(;++i<e.length;){const u=tl(e[i],n);u.parentNode=t,r.push(u)}return r}function Bt(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const FS=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],US=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),he="";var T;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(T||(T={}));const Re={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function nl(e){return e>=55296&&e<=57343}function BS(e){return e>=56320&&e<=57343}function HS(e,t){return(e-55296)*1024+9216+t}function il(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function rl(e){return e>=64976&&e<=65007||US.has(e)}var D;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(D||(D={}));const VS=65536;class qS{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=VS,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:i,col:r,offset:u}=this,a=r+n,l=u+n;return{code:t,startLine:i,endLine:i,startCol:a,endCol:a,startOffset:l,endOffset:l}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(BS(n))return this.pos++,this._addGap(),HS(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,T.EOF;return this._err(D.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let i=0;i<t.length;i++)if((this.html.charCodeAt(this.pos+i)|32)!==t.charCodeAt(i))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,T.EOF;const i=this.html.charCodeAt(n);return i===T.CARRIAGE_RETURN?T.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,T.EOF;let t=this.html.charCodeAt(this.pos);return t===T.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,T.LINE_FEED):t===T.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,nl(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===T.LINE_FEED||t===T.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){il(t)?this._err(D.controlCharacterInInputStream):rl(t)&&this._err(D.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ne;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(ne||(ne={}));function ol(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const GS=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),YS=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function zS(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=YS.get(e))!==null&&t!==void 0?t:e}var Ce;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ce||(Ce={}));const $S=32;var rt;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(rt||(rt={}));function Ji(e){return e>=Ce.ZERO&&e<=Ce.NINE}function WS(e){return e>=Ce.UPPER_A&&e<=Ce.UPPER_F||e>=Ce.LOWER_A&&e<=Ce.LOWER_F}function JS(e){return e>=Ce.UPPER_A&&e<=Ce.UPPER_Z||e>=Ce.LOWER_A&&e<=Ce.LOWER_Z||Ji(e)}function KS(e){return e===Ce.EQUALS||JS(e)}var Ee;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ee||(Ee={}));var Ke;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ke||(Ke={}));class QS{constructor(t,n,i){this.decodeTree=t,this.emitCodePoint=n,this.errors=i,this.state=Ee.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ke.Strict}startEntity(t){this.decodeMode=t,this.state=Ee.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ee.EntityStart:return t.charCodeAt(n)===Ce.NUM?(this.state=Ee.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ee.NamedEntity,this.stateNamedEntity(t,n));case Ee.NumericStart:return this.stateNumericStart(t,n);case Ee.NumericDecimal:return this.stateNumericDecimal(t,n);case Ee.NumericHex:return this.stateNumericHex(t,n);case Ee.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|$S)===Ce.LOWER_X?(this.state=Ee.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ee.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,i,r){if(n!==i){const u=i-n;this.result=this.result*Math.pow(r,u)+Number.parseInt(t.substr(n,u),r),this.consumed+=u}}stateNumericHex(t,n){const i=n;for(;n<t.length;){const r=t.charCodeAt(n);if(Ji(r)||WS(r))n+=1;else return this.addToNumericResult(t,i,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(t,i,n,16),-1}stateNumericDecimal(t,n){const i=n;for(;n<t.length;){const r=t.charCodeAt(n);if(Ji(r))n+=1;else return this.addToNumericResult(t,i,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(t,i,n,10),-1}emitNumericEntity(t,n){var i;if(this.consumed<=n)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ce.SEMI)this.consumed+=1;else if(this.decodeMode===Ke.Strict)return 0;return this.emitCodePoint(zS(this.result),this.consumed),this.errors&&(t!==Ce.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:i}=this;let r=i[this.treeIndex],u=(r&rt.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=XS(i,r,this.treeIndex+Math.max(1,u),a),this.treeIndex<0)return this.result===0||this.decodeMode===Ke.Attribute&&(u===0||KS(a))?0:this.emitNotTerminatedNamedEntity();if(r=i[this.treeIndex],u=(r&rt.VALUE_LENGTH)>>14,u!==0){if(a===Ce.SEMI)return this.emitNamedEntityData(this.treeIndex,u,this.consumed+this.excess);this.decodeMode!==Ke.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:i}=this,r=(i[n]&rt.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,i){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[t]&~rt.VALUE_LENGTH:r[t+1],i),n===3&&this.emitCodePoint(r[t+2],i),i}end(){var t;switch(this.state){case Ee.NamedEntity:return this.result!==0&&(this.decodeMode!==Ke.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ee.NumericDecimal:return this.emitNumericEntity(0,2);case Ee.NumericHex:return this.emitNumericEntity(0,3);case Ee.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ee.EntityStart:return 0}}}function XS(e,t,n,i){const r=(t&rt.BRANCH_LENGTH)>>7,u=t&rt.JUMP_TABLE;if(r===0)return u!==0&&i===u?n:-1;if(u){const f=i-u;return f<0||f>=r?-1:e[n+f]-1}let a=n,l=a+r-1;for(;a<=l;){const f=a+l>>>1,c=e[f];if(c<i)a=f+1;else if(c>i)l=f-1;else return e[f+r]}return-1}var v;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(v||(v={}));var lt;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(lt||(lt={}));var Fe;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Fe||(Fe={}));var b;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(b||(b={}));var d;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(d||(d={}));const ZS=new Map([[b.A,d.A],[b.ADDRESS,d.ADDRESS],[b.ANNOTATION_XML,d.ANNOTATION_XML],[b.APPLET,d.APPLET],[b.AREA,d.AREA],[b.ARTICLE,d.ARTICLE],[b.ASIDE,d.ASIDE],[b.B,d.B],[b.BASE,d.BASE],[b.BASEFONT,d.BASEFONT],[b.BGSOUND,d.BGSOUND],[b.BIG,d.BIG],[b.BLOCKQUOTE,d.BLOCKQUOTE],[b.BODY,d.BODY],[b.BR,d.BR],[b.BUTTON,d.BUTTON],[b.CAPTION,d.CAPTION],[b.CENTER,d.CENTER],[b.CODE,d.CODE],[b.COL,d.COL],[b.COLGROUP,d.COLGROUP],[b.DD,d.DD],[b.DESC,d.DESC],[b.DETAILS,d.DETAILS],[b.DIALOG,d.DIALOG],[b.DIR,d.DIR],[b.DIV,d.DIV],[b.DL,d.DL],[b.DT,d.DT],[b.EM,d.EM],[b.EMBED,d.EMBED],[b.FIELDSET,d.FIELDSET],[b.FIGCAPTION,d.FIGCAPTION],[b.FIGURE,d.FIGURE],[b.FONT,d.FONT],[b.FOOTER,d.FOOTER],[b.FOREIGN_OBJECT,d.FOREIGN_OBJECT],[b.FORM,d.FORM],[b.FRAME,d.FRAME],[b.FRAMESET,d.FRAMESET],[b.H1,d.H1],[b.H2,d.H2],[b.H3,d.H3],[b.H4,d.H4],[b.H5,d.H5],[b.H6,d.H6],[b.HEAD,d.HEAD],[b.HEADER,d.HEADER],[b.HGROUP,d.HGROUP],[b.HR,d.HR],[b.HTML,d.HTML],[b.I,d.I],[b.IMG,d.IMG],[b.IMAGE,d.IMAGE],[b.INPUT,d.INPUT],[b.IFRAME,d.IFRAME],[b.KEYGEN,d.KEYGEN],[b.LABEL,d.LABEL],[b.LI,d.LI],[b.LINK,d.LINK],[b.LISTING,d.LISTING],[b.MAIN,d.MAIN],[b.MALIGNMARK,d.MALIGNMARK],[b.MARQUEE,d.MARQUEE],[b.MATH,d.MATH],[b.MENU,d.MENU],[b.META,d.META],[b.MGLYPH,d.MGLYPH],[b.MI,d.MI],[b.MO,d.MO],[b.MN,d.MN],[b.MS,d.MS],[b.MTEXT,d.MTEXT],[b.NAV,d.NAV],[b.NOBR,d.NOBR],[b.NOFRAMES,d.NOFRAMES],[b.NOEMBED,d.NOEMBED],[b.NOSCRIPT,d.NOSCRIPT],[b.OBJECT,d.OBJECT],[b.OL,d.OL],[b.OPTGROUP,d.OPTGROUP],[b.OPTION,d.OPTION],[b.P,d.P],[b.PARAM,d.PARAM],[b.PLAINTEXT,d.PLAINTEXT],[b.PRE,d.PRE],[b.RB,d.RB],[b.RP,d.RP],[b.RT,d.RT],[b.RTC,d.RTC],[b.RUBY,d.RUBY],[b.S,d.S],[b.SCRIPT,d.SCRIPT],[b.SEARCH,d.SEARCH],[b.SECTION,d.SECTION],[b.SELECT,d.SELECT],[b.SOURCE,d.SOURCE],[b.SMALL,d.SMALL],[b.SPAN,d.SPAN],[b.STRIKE,d.STRIKE],[b.STRONG,d.STRONG],[b.STYLE,d.STYLE],[b.SUB,d.SUB],[b.SUMMARY,d.SUMMARY],[b.SUP,d.SUP],[b.TABLE,d.TABLE],[b.TBODY,d.TBODY],[b.TEMPLATE,d.TEMPLATE],[b.TEXTAREA,d.TEXTAREA],[b.TFOOT,d.TFOOT],[b.TD,d.TD],[b.TH,d.TH],[b.THEAD,d.THEAD],[b.TITLE,d.TITLE],[b.TR,d.TR],[b.TRACK,d.TRACK],[b.TT,d.TT],[b.U,d.U],[b.UL,d.UL],[b.SVG,d.SVG],[b.VAR,d.VAR],[b.WBR,d.WBR],[b.XMP,d.XMP]]);function Ht(e){var t;return(t=ZS.get(e))!==null&&t!==void 0?t:d.UNKNOWN}const L=d,jS={[v.HTML]:new Set([L.ADDRESS,L.APPLET,L.AREA,L.ARTICLE,L.ASIDE,L.BASE,L.BASEFONT,L.BGSOUND,L.BLOCKQUOTE,L.BODY,L.BR,L.BUTTON,L.CAPTION,L.CENTER,L.COL,L.COLGROUP,L.DD,L.DETAILS,L.DIR,L.DIV,L.DL,L.DT,L.EMBED,L.FIELDSET,L.FIGCAPTION,L.FIGURE,L.FOOTER,L.FORM,L.FRAME,L.FRAMESET,L.H1,L.H2,L.H3,L.H4,L.H5,L.H6,L.HEAD,L.HEADER,L.HGROUP,L.HR,L.HTML,L.IFRAME,L.IMG,L.INPUT,L.LI,L.LINK,L.LISTING,L.MAIN,L.MARQUEE,L.MENU,L.META,L.NAV,L.NOEMBED,L.NOFRAMES,L.NOSCRIPT,L.OBJECT,L.OL,L.P,L.PARAM,L.PLAINTEXT,L.PRE,L.SCRIPT,L.SECTION,L.SELECT,L.SOURCE,L.STYLE,L.SUMMARY,L.TABLE,L.TBODY,L.TD,L.TEMPLATE,L.TEXTAREA,L.TFOOT,L.TH,L.THEAD,L.TITLE,L.TR,L.TRACK,L.UL,L.WBR,L.XMP]),[v.MATHML]:new Set([L.MI,L.MO,L.MN,L.MS,L.MTEXT,L.ANNOTATION_XML]),[v.SVG]:new Set([L.TITLE,L.FOREIGN_OBJECT,L.DESC]),[v.XLINK]:new Set,[v.XML]:new Set,[v.XMLNS]:new Set},Ki=new Set([L.H1,L.H2,L.H3,L.H4,L.H5,L.H6]);b.STYLE,b.SCRIPT,b.XMP,b.IFRAME,b.NOEMBED,b.NOFRAMES,b.PLAINTEXT;var C;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(C||(C={}));const pe={DATA:C.DATA,RCDATA:C.RCDATA,RAWTEXT:C.RAWTEXT,SCRIPT_DATA:C.SCRIPT_DATA,PLAINTEXT:C.PLAINTEXT,CDATA_SECTION:C.CDATA_SECTION};function eI(e){return e>=T.DIGIT_0&&e<=T.DIGIT_9}function Zt(e){return e>=T.LATIN_CAPITAL_A&&e<=T.LATIN_CAPITAL_Z}function tI(e){return e>=T.LATIN_SMALL_A&&e<=T.LATIN_SMALL_Z}function tt(e){return tI(e)||Zt(e)}function Ju(e){return tt(e)||eI(e)}function Nn(e){return e+32}function ul(e){return e===T.SPACE||e===T.LINE_FEED||e===T.TABULATION||e===T.FORM_FEED}function Ku(e){return ul(e)||e===T.SOLIDUS||e===T.GREATER_THAN_SIGN}function nI(e){return e===T.NULL?D.nullCharacterReference:e>1114111?D.characterReferenceOutsideUnicodeRange:nl(e)?D.surrogateCharacterReference:rl(e)?D.noncharacterCharacterReference:il(e)||e===T.CARRIAGE_RETURN?D.controlCharacterReference:null}class iI{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=C.DATA,this.returnState=C.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new qS(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new QS(GS,(i,r)=>{this.preprocessor.pos=this.entityStartPos+r-1,this._flushCodePointConsumedAsCharacterReference(i)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(D.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:i=>{this._err(D.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+i)},validateNumericCharacterReference:i=>{const r=nI(i);r&&this._err(r,1)}}:void 0)}_err(t,n=0){var i,r;(r=(i=this.handler).onParseError)===null||r===void 0||r.call(i,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,i){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||i==null||i()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ne.START_TAG,tagName:"",tagID:d.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ne.END_TAG,tagName:"",tagID:d.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:ne.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:ne.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const i=this.currentToken;if(ol(i,this.currentAttr.name)===null){if(i.attrs.push(this.currentAttr),i.location&&this.currentLocation){const r=(t=(n=i.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);r[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(D.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Ht(t.tagName),t.type===ne.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(D.endTagWithAttributes),t.selfClosing&&this._err(D.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case ne.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ne.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ne.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:ne.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=ul(t)?ne.WHITESPACE_CHARACTER:t===T.NULL?ne.NULL_CHARACTER:ne.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(ne.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=C.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ke.Attribute:Ke.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===C.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===C.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===C.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case C.DATA:{this._stateData(t);break}case C.RCDATA:{this._stateRcdata(t);break}case C.RAWTEXT:{this._stateRawtext(t);break}case C.SCRIPT_DATA:{this._stateScriptData(t);break}case C.PLAINTEXT:{this._statePlaintext(t);break}case C.TAG_OPEN:{this._stateTagOpen(t);break}case C.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case C.TAG_NAME:{this._stateTagName(t);break}case C.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case C.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case C.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case C.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case C.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case C.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case C.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case C.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case C.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case C.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case C.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case C.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case C.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case C.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case C.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case C.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case C.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case C.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case C.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case C.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case C.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case C.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case C.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case C.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case C.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case C.BOGUS_COMMENT:{this._stateBogusComment(t);break}case C.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case C.COMMENT_START:{this._stateCommentStart(t);break}case C.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case C.COMMENT:{this._stateComment(t);break}case C.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case C.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case C.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case C.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case C.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case C.COMMENT_END:{this._stateCommentEnd(t);break}case C.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case C.DOCTYPE:{this._stateDoctype(t);break}case C.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case C.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case C.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case C.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case C.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case C.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case C.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case C.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case C.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case C.CDATA_SECTION:{this._stateCdataSection(t);break}case C.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case C.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case C.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case C.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case T.LESS_THAN_SIGN:{this.state=C.TAG_OPEN;break}case T.AMPERSAND:{this._startCharacterReference();break}case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitCodePoint(t);break}case T.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case T.AMPERSAND:{this._startCharacterReference();break}case T.LESS_THAN_SIGN:{this.state=C.RCDATA_LESS_THAN_SIGN;break}case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitChars(he);break}case T.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case T.LESS_THAN_SIGN:{this.state=C.RAWTEXT_LESS_THAN_SIGN;break}case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitChars(he);break}case T.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_LESS_THAN_SIGN;break}case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitChars(he);break}case T.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitChars(he);break}case T.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(tt(t))this._createStartTagToken(),this.state=C.TAG_NAME,this._stateTagName(t);else switch(t){case T.EXCLAMATION_MARK:{this.state=C.MARKUP_DECLARATION_OPEN;break}case T.SOLIDUS:{this.state=C.END_TAG_OPEN;break}case T.QUESTION_MARK:{this._err(D.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=C.BOGUS_COMMENT,this._stateBogusComment(t);break}case T.EOF:{this._err(D.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(D.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=C.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(tt(t))this._createEndTagToken(),this.state=C.TAG_NAME,this._stateTagName(t);else switch(t){case T.GREATER_THAN_SIGN:{this._err(D.missingEndTagName),this.state=C.DATA;break}case T.EOF:{this._err(D.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(D.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=C.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this.state=C.BEFORE_ATTRIBUTE_NAME;break}case T.SOLIDUS:{this.state=C.SELF_CLOSING_START_TAG;break}case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentTagToken();break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.tagName+=he;break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Zt(t)?Nn(t):t)}}_stateRcdataLessThanSign(t){t===T.SOLIDUS?this.state=C.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=C.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){tt(t)?(this.state=C.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=C.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=C.BEFORE_ATTRIBUTE_NAME,!1;case T.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=C.SELF_CLOSING_START_TAG,!1;case T.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=C.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===T.SOLIDUS?this.state=C.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=C.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){tt(t)?(this.state=C.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=C.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case T.SOLIDUS:{this.state=C.SCRIPT_DATA_END_TAG_OPEN;break}case T.EXCLAMATION_MARK:{this.state=C.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=C.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){tt(t)?(this.state=C.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===T.HYPHEN_MINUS?(this.state=C.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===T.HYPHEN_MINUS?(this.state=C.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case T.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitChars(he);break}case T.EOF:{this._err(D.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case T.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_ESCAPED,this._emitChars(he);break}case T.EOF:{this._err(D.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case T.HYPHEN_MINUS:{this._emitChars("-");break}case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case T.GREATER_THAN_SIGN:{this.state=C.SCRIPT_DATA,this._emitChars(">");break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_ESCAPED,this._emitChars(he);break}case T.EOF:{this._err(D.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===T.SOLIDUS?this.state=C.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:tt(t)?(this._emitChars("<"),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){tt(t)?(this.state=C.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Re.SCRIPT,!1)&&Ku(this.preprocessor.peek(Re.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Re.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case T.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case T.NULL:{this._err(D.unexpectedNullCharacter),this._emitChars(he);break}case T.EOF:{this._err(D.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case T.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(he);break}case T.EOF:{this._err(D.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case T.HYPHEN_MINUS:{this._emitChars("-");break}case T.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case T.GREATER_THAN_SIGN:{this.state=C.SCRIPT_DATA,this._emitChars(">");break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(he);break}case T.EOF:{this._err(D.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===T.SOLIDUS?(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Re.SCRIPT,!1)&&Ku(this.preprocessor.peek(Re.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Re.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=C.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.SOLIDUS:case T.GREATER_THAN_SIGN:case T.EOF:{this.state=C.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case T.EQUALS_SIGN:{this._err(D.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=C.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=C.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:case T.SOLIDUS:case T.GREATER_THAN_SIGN:case T.EOF:{this._leaveAttrName(),this.state=C.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case T.EQUALS_SIGN:{this._leaveAttrName(),this.state=C.BEFORE_ATTRIBUTE_VALUE;break}case T.QUOTATION_MARK:case T.APOSTROPHE:case T.LESS_THAN_SIGN:{this._err(D.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.currentAttr.name+=he;break}default:this.currentAttr.name+=String.fromCodePoint(Zt(t)?Nn(t):t)}}_stateAfterAttributeName(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.SOLIDUS:{this.state=C.SELF_CLOSING_START_TAG;break}case T.EQUALS_SIGN:{this.state=C.BEFORE_ATTRIBUTE_VALUE;break}case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentTagToken();break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=C.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.QUOTATION_MARK:{this.state=C.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case T.APOSTROPHE:{this.state=C.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case T.GREATER_THAN_SIGN:{this._err(D.missingAttributeValue),this.state=C.DATA,this.emitCurrentTagToken();break}default:this.state=C.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case T.QUOTATION_MARK:{this.state=C.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case T.AMPERSAND:{this._startCharacterReference();break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.currentAttr.value+=he;break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case T.APOSTROPHE:{this.state=C.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case T.AMPERSAND:{this._startCharacterReference();break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.currentAttr.value+=he;break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this._leaveAttrValue(),this.state=C.BEFORE_ATTRIBUTE_NAME;break}case T.AMPERSAND:{this._startCharacterReference();break}case T.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=C.DATA,this.emitCurrentTagToken();break}case T.NULL:{this._err(D.unexpectedNullCharacter),this.currentAttr.value+=he;break}case T.QUOTATION_MARK:case T.APOSTROPHE:case T.LESS_THAN_SIGN:case T.EQUALS_SIGN:case T.GRAVE_ACCENT:{this._err(D.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this._leaveAttrValue(),this.state=C.BEFORE_ATTRIBUTE_NAME;break}case T.SOLIDUS:{this._leaveAttrValue(),this.state=C.SELF_CLOSING_START_TAG;break}case T.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=C.DATA,this.emitCurrentTagToken();break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:this._err(D.missingWhitespaceBetweenAttributes),this.state=C.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case T.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=C.DATA,this.emitCurrentTagToken();break}case T.EOF:{this._err(D.eofInTag),this._emitEOFToken();break}default:this._err(D.unexpectedSolidusInTag),this.state=C.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentComment(n);break}case T.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.data+=he;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Re.DASH_DASH,!0)?(this._createCommentToken(Re.DASH_DASH.length+1),this.state=C.COMMENT_START):this._consumeSequenceIfMatch(Re.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Re.DOCTYPE.length+1),this.state=C.DOCTYPE):this._consumeSequenceIfMatch(Re.CDATA_START,!0)?this.inForeignNode?this.state=C.CDATA_SECTION:(this._err(D.cdataInHtmlContent),this._createCommentToken(Re.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=C.BOGUS_COMMENT):this._ensureHibernation()||(this._err(D.incorrectlyOpenedComment),this._createCommentToken(2),this.state=C.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case T.HYPHEN_MINUS:{this.state=C.COMMENT_START_DASH;break}case T.GREATER_THAN_SIGN:{this._err(D.abruptClosingOfEmptyComment),this.state=C.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=C.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case T.HYPHEN_MINUS:{this.state=C.COMMENT_END;break}case T.GREATER_THAN_SIGN:{this._err(D.abruptClosingOfEmptyComment),this.state=C.DATA,this.emitCurrentComment(n);break}case T.EOF:{this._err(D.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=C.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case T.HYPHEN_MINUS:{this.state=C.COMMENT_END_DASH;break}case T.LESS_THAN_SIGN:{n.data+="<",this.state=C.COMMENT_LESS_THAN_SIGN;break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.data+=he;break}case T.EOF:{this._err(D.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case T.EXCLAMATION_MARK:{n.data+="!",this.state=C.COMMENT_LESS_THAN_SIGN_BANG;break}case T.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=C.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===T.HYPHEN_MINUS?this.state=C.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=C.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===T.HYPHEN_MINUS?this.state=C.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=C.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==T.GREATER_THAN_SIGN&&t!==T.EOF&&this._err(D.nestedComment),this.state=C.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case T.HYPHEN_MINUS:{this.state=C.COMMENT_END;break}case T.EOF:{this._err(D.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=C.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentComment(n);break}case T.EXCLAMATION_MARK:{this.state=C.COMMENT_END_BANG;break}case T.HYPHEN_MINUS:{n.data+="-";break}case T.EOF:{this._err(D.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=C.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case T.HYPHEN_MINUS:{n.data+="--!",this.state=C.COMMENT_END_DASH;break}case T.GREATER_THAN_SIGN:{this._err(D.incorrectlyClosedComment),this.state=C.DATA,this.emitCurrentComment(n);break}case T.EOF:{this._err(D.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=C.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this.state=C.BEFORE_DOCTYPE_NAME;break}case T.GREATER_THAN_SIGN:{this.state=C.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case T.EOF:{this._err(D.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingWhitespaceBeforeDoctypeName),this.state=C.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Zt(t))this._createDoctypeToken(String.fromCharCode(Nn(t))),this.state=C.DOCTYPE_NAME;else switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.NULL:{this._err(D.unexpectedNullCharacter),this._createDoctypeToken(he),this.state=C.DOCTYPE_NAME;break}case T.GREATER_THAN_SIGN:{this._err(D.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.EOF:{this._err(D.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=C.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this.state=C.AFTER_DOCTYPE_NAME;break}case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.name+=he;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Zt(t)?Nn(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Re.PUBLIC,!1)?this.state=C.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Re.SYSTEM,!1)?this.state=C.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(D.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this.state=C.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case T.QUOTATION_MARK:{this._err(D.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case T.APOSTROPHE:{this._err(D.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case T.GREATER_THAN_SIGN:{this._err(D.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.QUOTATION_MARK:{n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case T.APOSTROPHE:{n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case T.GREATER_THAN_SIGN:{this._err(D.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case T.QUOTATION_MARK:{this.state=C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.publicId+=he;break}case T.GREATER_THAN_SIGN:{this._err(D.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case T.APOSTROPHE:{this.state=C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.publicId+=he;break}case T.GREATER_THAN_SIGN:{this._err(D.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this.state=C.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case T.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.QUOTATION_MARK:{this._err(D.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case T.APOSTROPHE:{this._err(D.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.QUOTATION_MARK:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case T.APOSTROPHE:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:{this.state=C.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case T.QUOTATION_MARK:{this._err(D.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case T.APOSTROPHE:{this._err(D.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case T.GREATER_THAN_SIGN:{this._err(D.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.QUOTATION_MARK:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case T.APOSTROPHE:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case T.GREATER_THAN_SIGN:{this._err(D.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case T.QUOTATION_MARK:{this.state=C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.systemId+=he;break}case T.GREATER_THAN_SIGN:{this._err(D.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case T.APOSTROPHE:{this.state=C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case T.NULL:{this._err(D.unexpectedNullCharacter),n.systemId+=he;break}case T.GREATER_THAN_SIGN:{this._err(D.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case T.SPACE:case T.LINE_FEED:case T.TABULATION:case T.FORM_FEED:break;case T.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.EOF:{this._err(D.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(D.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case T.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=C.DATA;break}case T.NULL:{this._err(D.unexpectedNullCharacter);break}case T.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case T.RIGHT_SQUARE_BRACKET:{this.state=C.CDATA_SECTION_BRACKET;break}case T.EOF:{this._err(D.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===T.RIGHT_SQUARE_BRACKET?this.state=C.CDATA_SECTION_END:(this._emitChars("]"),this.state=C.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case T.GREATER_THAN_SIGN:{this.state=C.DATA;break}case T.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=C.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(T.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Ju(this.preprocessor.peek(1))?C.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){Ju(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===T.SEMICOLON&&this._err(D.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const sl=new Set([d.DD,d.DT,d.LI,d.OPTGROUP,d.OPTION,d.P,d.RB,d.RP,d.RT,d.RTC]),Qu=new Set([...sl,d.CAPTION,d.COLGROUP,d.TBODY,d.TD,d.TFOOT,d.TH,d.THEAD,d.TR]),Bn=new Set([d.APPLET,d.CAPTION,d.HTML,d.MARQUEE,d.OBJECT,d.TABLE,d.TD,d.TEMPLATE,d.TH]),rI=new Set([...Bn,d.OL,d.UL]),oI=new Set([...Bn,d.BUTTON]),Xu=new Set([d.ANNOTATION_XML,d.MI,d.MN,d.MO,d.MS,d.MTEXT]),Zu=new Set([d.DESC,d.FOREIGN_OBJECT,d.TITLE]),uI=new Set([d.TR,d.TEMPLATE,d.HTML]),sI=new Set([d.TBODY,d.TFOOT,d.THEAD,d.TEMPLATE,d.HTML]),aI=new Set([d.TABLE,d.TEMPLATE,d.HTML]),lI=new Set([d.TD,d.TH]);class cI{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,i){this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=d.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===d.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===v.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const i=this._indexOf(t);this.items[i]=n,i===this.stackTop&&(this.current=n)}insertAfter(t,n,i){const r=this._indexOf(t)+1;this.items.splice(r,0,n),this.tagIDs.splice(r,0,i),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==v.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const i=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(i,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ki,v.HTML)}popUntilTableCellPopped(){this.popUntilPopped(lI,v.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let i=this.stackTop;i>=0;i--)if(t.has(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===n)return i;return-1}clearBackTo(t,n){const i=this._indexOfTagNames(t,n);this.shortenToLength(i+1)}clearBackToTableContext(){this.clearBackTo(aI,v.HTML)}clearBackToTableBodyContext(){this.clearBackTo(sI,v.HTML)}clearBackToTableRowContext(){this.clearBackTo(uI,v.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===d.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===d.HTML}hasInDynamicScope(t,n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case v.HTML:{if(r===t)return!0;if(n.has(r))return!1;break}case v.SVG:{if(Zu.has(r))return!1;break}case v.MATHML:{if(Xu.has(r))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Bn)}hasInListItemScope(t){return this.hasInDynamicScope(t,rI)}hasInButtonScope(t){return this.hasInDynamicScope(t,oI)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case v.HTML:{if(Ki.has(n))return!0;if(Bn.has(n))return!1;break}case v.SVG:{if(Zu.has(n))return!1;break}case v.MATHML:{if(Xu.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===v.HTML)switch(this.tagIDs[n]){case t:return!0;case d.TABLE:case d.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===v.HTML)switch(this.tagIDs[t]){case d.TBODY:case d.THEAD:case d.TFOOT:return!0;case d.TABLE:case d.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===v.HTML)switch(this.tagIDs[n]){case t:return!0;case d.OPTION:case d.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&sl.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Qu.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&Qu.has(this.currentTagId);)this.pop()}}const Ai=3;var Ye;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Ye||(Ye={}));const ju={type:Ye.Marker};class fI{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const i=[],r=n.length,u=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let l=0;l<this.entries.length;l++){const f=this.entries[l];if(f.type===Ye.Marker)break;const{element:c}=f;if(this.treeAdapter.getTagName(c)===u&&this.treeAdapter.getNamespaceURI(c)===a){const h=this.treeAdapter.getAttrList(c);h.length===r&&i.push({idx:l,attrs:h})}}return i}_ensureNoahArkCondition(t){if(this.entries.length<Ai)return;const n=this.treeAdapter.getAttrList(t),i=this._getNoahArkConditionCandidates(t,n);if(i.length<Ai)return;const r=new Map(n.map(a=>[a.name,a.value]));let u=0;for(let a=0;a<i.length;a++){const l=i[a];l.attrs.every(f=>r.get(f.name)===f.value)&&(u+=1,u>=Ai&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(ju)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Ye.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:Ye.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(ju);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(i=>i.type===Ye.Marker||this.treeAdapter.getTagName(i.element)===t);return n&&n.type===Ye.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Ye.Element&&n.element===t)}}const nt={createDocument(){return{nodeName:"#document",mode:Fe.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const i=e.childNodes.indexOf(n);e.childNodes.splice(i,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,i){const r=e.childNodes.find(u=>u.nodeName==="#documentType");if(r)r.name=t,r.publicId=n,r.systemId=i;else{const u={nodeName:"#documentType",name:t,publicId:n,systemId:i,parentNode:null};nt.appendChild(e,u)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(nt.isTextNode(n)){n.value+=t;return}}nt.appendChild(e,nt.createTextNode(t))},insertTextBefore(e,t,n){const i=e.childNodes[e.childNodes.indexOf(n)-1];i&&nt.isTextNode(i)?i.value+=t:nt.insertBefore(e,nt.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(i=>i.name));for(let i=0;i<t.length;i++)n.has(t[i].name)||e.attrs.push(t[i])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},al="html",dI="about:legacy-compat",hI="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",ll=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],pI=[...ll,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],mI=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),cl=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],gI=[...cl,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function es(e,t){return t.some(n=>e.startsWith(n))}function TI(e){return e.name===al&&e.publicId===null&&(e.systemId===null||e.systemId===dI)}function EI(e){if(e.name!==al)return Fe.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===hI)return Fe.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),mI.has(n))return Fe.QUIRKS;let i=t===null?pI:ll;if(es(n,i))return Fe.QUIRKS;if(i=t===null?cl:gI,es(n,i))return Fe.LIMITED_QUIRKS}return Fe.NO_QUIRKS}const ts={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},CI="definitionurl",yI="definitionURL",_I=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),AI=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:v.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:v.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:v.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:v.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:v.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:v.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:v.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:v.XML}],["xml:space",{prefix:"xml",name:"space",namespace:v.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:v.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:v.XMLNS}]]),SI=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),II=new Set([d.B,d.BIG,d.BLOCKQUOTE,d.BODY,d.BR,d.CENTER,d.CODE,d.DD,d.DIV,d.DL,d.DT,d.EM,d.EMBED,d.H1,d.H2,d.H3,d.H4,d.H5,d.H6,d.HEAD,d.HR,d.I,d.IMG,d.LI,d.LISTING,d.MENU,d.META,d.NOBR,d.OL,d.P,d.PRE,d.RUBY,d.S,d.SMALL,d.SPAN,d.STRONG,d.STRIKE,d.SUB,d.SUP,d.TABLE,d.TT,d.U,d.UL,d.VAR]);function bI(e){const t=e.tagID;return t===d.FONT&&e.attrs.some(({name:i})=>i===lt.COLOR||i===lt.SIZE||i===lt.FACE)||II.has(t)}function fl(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===CI){e.attrs[t].name=yI;break}}function dl(e){for(let t=0;t<e.attrs.length;t++){const n=_I.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Ir(e){for(let t=0;t<e.attrs.length;t++){const n=AI.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function xI(e){const t=SI.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Ht(e.tagName))}function NI(e,t){return t===v.MATHML&&(e===d.MI||e===d.MO||e===d.MN||e===d.MS||e===d.MTEXT)}function RI(e,t,n){if(t===v.MATHML&&e===d.ANNOTATION_XML){for(let i=0;i<n.length;i++)if(n[i].name===lt.ENCODING){const r=n[i].value.toLowerCase();return r===ts.TEXT_HTML||r===ts.APPLICATION_XML}}return t===v.SVG&&(e===d.FOREIGN_OBJECT||e===d.DESC||e===d.TITLE)}function kI(e,t,n,i){return(!i||i===v.HTML)&&RI(e,t,n)||(!i||i===v.MATHML)&&NI(e,t)}const MI="hidden",DI=8,PI=3;var y;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(y||(y={}));const vI={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},hl=new Set([d.TABLE,d.TBODY,d.TFOOT,d.THEAD,d.TR]),ns={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:nt,onParseError:null};class is{constructor(t,n,i=null,r=null){this.fragmentContext=i,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=y.INITIAL,this.originalInsertionMode=y.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...ns,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new iI(this.options,this),this.activeFormattingElements=new fI(this.treeAdapter),this.fragmentContextID=i?Ht(this.treeAdapter.getTagName(i)):d.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new cI(this.document,this.treeAdapter,this)}static parse(t,n){const i=new this(n);return i.tokenizer.write(t,!0),i.document}static getFragmentParser(t,n){const i={...ns,...n};t??(t=i.treeAdapter.createElement(b.TEMPLATE,v.HTML,[]));const r=i.treeAdapter.createElement("documentmock",v.HTML,[]),u=new this(i,r,t);return u.fragmentContextID===d.TEMPLATE&&u.tmplInsertionModeStack.unshift(y.IN_TEMPLATE),u._initTokenizerForFragmentParsing(),u._insertFakeRootElement(),u._resetInsertionMode(),u._findFormInFragmentContext(),u}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,i){var r;if(!this.onParseError)return;const u=(r=t.location)!==null&&r!==void 0?r:vI,a={code:n,startLine:u.startLine,startCol:u.startCol,startOffset:u.startOffset,endLine:i?u.startLine:u.endLine,endCol:i?u.startCol:u.endCol,endOffset:i?u.startOffset:u.endOffset};this.onParseError(a)}onItemPush(t,n,i){var r,u;(u=(r=this.treeAdapter).onItemPush)===null||u===void 0||u.call(r,t),i&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var i,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(r=(i=this.treeAdapter).onItemPop)===null||r===void 0||r.call(i,t,this.openElements.current),n){let u,a;this.openElements.stackTop===0&&this.fragmentContext?(u=this.fragmentContext,a=this.fragmentContextID):{current:u,currentTagId:a}=this.openElements,this._setContextModes(u,a)}}_setContextModes(t,n){const i=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===v.HTML;this.currentNotInHTML=!i,this.tokenizer.inForeignNode=!i&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,v.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=y.TEXT}switchToPlaintextParsing(){this.insertionMode=y.TEXT,this.originalInsertionMode=y.IN_BODY,this.tokenizer.state=pe.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===b.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==v.HTML))switch(this.fragmentContextID){case d.TITLE:case d.TEXTAREA:{this.tokenizer.state=pe.RCDATA;break}case d.STYLE:case d.XMP:case d.IFRAME:case d.NOEMBED:case d.NOFRAMES:case d.NOSCRIPT:{this.tokenizer.state=pe.RAWTEXT;break}case d.SCRIPT:{this.tokenizer.state=pe.SCRIPT_DATA;break}case d.PLAINTEXT:{this.tokenizer.state=pe.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",i=t.publicId||"",r=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,i,r),t.location){const a=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));a&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const i=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,i)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const i=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(i??this.document,t)}}_appendElement(t,n){const i=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(i,t.location)}_insertElement(t,n){const i=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(i,t.location),this.openElements.push(i,t.tagID)}_insertFakeElement(t,n){const i=this.treeAdapter.createElement(t,v.HTML,[]);this._attachElementToTree(i,null),this.openElements.push(i,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,v.HTML,t.attrs),i=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,i),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(b.HTML,v.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,d.HTML)}_appendCommentNode(t,n){const i=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,i),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_insertCharacters(t){let n,i;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:i}=this._findFosterParentingLocation(),i?this.treeAdapter.insertTextBefore(n,t.chars,i):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const r=this.treeAdapter.getChildNodes(n),u=i?r.lastIndexOf(i):r.length,a=r[u-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:f,endCol:c,endOffset:h}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:f,endCol:c,endOffset:h})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}_adoptNodes(t,n){for(let i=this.treeAdapter.getFirstChild(t);i;i=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(i),this.treeAdapter.appendChild(n,i)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const i=n.location,r=this.treeAdapter.getTagName(t),u=n.type===ne.END_TAG&&r===n.tagName?{endTag:{...i},endLine:i.endLine,endCol:i.endCol,endOffset:i.endOffset}:{endLine:i.startLine,endCol:i.startCol,endOffset:i.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,u)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,i;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,i=this.fragmentContextID):{current:n,currentTagId:i}=this.openElements,t.tagID===d.SVG&&this.treeAdapter.getTagName(n)===b.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===v.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===d.MGLYPH||t.tagID===d.MALIGNMARK)&&i!==void 0&&!this._isIntegrationPoint(i,n,v.HTML)}_processToken(t){switch(t.type){case ne.CHARACTER:{this.onCharacter(t);break}case ne.NULL_CHARACTER:{this.onNullCharacter(t);break}case ne.COMMENT:{this.onComment(t);break}case ne.DOCTYPE:{this.onDoctype(t);break}case ne.START_TAG:{this._processStartTag(t);break}case ne.END_TAG:{this.onEndTag(t);break}case ne.EOF:{this.onEof(t);break}case ne.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,i){const r=this.treeAdapter.getNamespaceURI(n),u=this.treeAdapter.getAttrList(n);return kI(t,r,u,i)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(r=>r.type===Ye.Marker||this.openElements.contains(r.element)),i=n===-1?t-1:n-1;for(let r=i;r>=0;r--){const u=this.activeFormattingElements.entries[r];this._insertElement(u.token,this.treeAdapter.getNamespaceURI(u.element)),u.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=y.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(d.P),this.openElements.popUntilTagNamePopped(d.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case d.TR:{this.insertionMode=y.IN_ROW;return}case d.TBODY:case d.THEAD:case d.TFOOT:{this.insertionMode=y.IN_TABLE_BODY;return}case d.CAPTION:{this.insertionMode=y.IN_CAPTION;return}case d.COLGROUP:{this.insertionMode=y.IN_COLUMN_GROUP;return}case d.TABLE:{this.insertionMode=y.IN_TABLE;return}case d.BODY:{this.insertionMode=y.IN_BODY;return}case d.FRAMESET:{this.insertionMode=y.IN_FRAMESET;return}case d.SELECT:{this._resetInsertionModeForSelect(t);return}case d.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case d.HTML:{this.insertionMode=this.headElement?y.AFTER_HEAD:y.BEFORE_HEAD;return}case d.TD:case d.TH:{if(t>0){this.insertionMode=y.IN_CELL;return}break}case d.HEAD:{if(t>0){this.insertionMode=y.IN_HEAD;return}break}}this.insertionMode=y.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const i=this.openElements.tagIDs[n];if(i===d.TEMPLATE)break;if(i===d.TABLE){this.insertionMode=y.IN_SELECT_IN_TABLE;return}}this.insertionMode=y.IN_SELECT}_isElementCausesFosterParenting(t){return hl.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case d.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===v.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case d.TABLE:{const i=this.treeAdapter.getParentNode(n);return i?{parent:i,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const i=this.treeAdapter.getNamespaceURI(t);return jS[i].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){l2(this,t);return}switch(this.insertionMode){case y.INITIAL:{Qt(this,t);break}case y.BEFORE_HTML:{rn(this,t);break}case y.BEFORE_HEAD:{on(this,t);break}case y.IN_HEAD:{un(this,t);break}case y.IN_HEAD_NO_SCRIPT:{sn(this,t);break}case y.AFTER_HEAD:{an(this,t);break}case y.IN_BODY:case y.IN_CAPTION:case y.IN_CELL:case y.IN_TEMPLATE:{ml(this,t);break}case y.TEXT:case y.IN_SELECT:case y.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case y.IN_TABLE:case y.IN_TABLE_BODY:case y.IN_ROW:{Si(this,t);break}case y.IN_TABLE_TEXT:{_l(this,t);break}case y.IN_COLUMN_GROUP:{Hn(this,t);break}case y.AFTER_BODY:{Vn(this,t);break}case y.AFTER_AFTER_BODY:{vn(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){a2(this,t);return}switch(this.insertionMode){case y.INITIAL:{Qt(this,t);break}case y.BEFORE_HTML:{rn(this,t);break}case y.BEFORE_HEAD:{on(this,t);break}case y.IN_HEAD:{un(this,t);break}case y.IN_HEAD_NO_SCRIPT:{sn(this,t);break}case y.AFTER_HEAD:{an(this,t);break}case y.TEXT:{this._insertCharacters(t);break}case y.IN_TABLE:case y.IN_TABLE_BODY:case y.IN_ROW:{Si(this,t);break}case y.IN_COLUMN_GROUP:{Hn(this,t);break}case y.AFTER_BODY:{Vn(this,t);break}case y.AFTER_AFTER_BODY:{vn(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Qi(this,t);return}switch(this.insertionMode){case y.INITIAL:case y.BEFORE_HTML:case y.BEFORE_HEAD:case y.IN_HEAD:case y.IN_HEAD_NO_SCRIPT:case y.AFTER_HEAD:case y.IN_BODY:case y.IN_TABLE:case y.IN_CAPTION:case y.IN_COLUMN_GROUP:case y.IN_TABLE_BODY:case y.IN_ROW:case y.IN_CELL:case y.IN_SELECT:case y.IN_SELECT_IN_TABLE:case y.IN_TEMPLATE:case y.IN_FRAMESET:case y.AFTER_FRAMESET:{Qi(this,t);break}case y.IN_TABLE_TEXT:{Xt(this,t);break}case y.AFTER_BODY:{HI(this,t);break}case y.AFTER_AFTER_BODY:case y.AFTER_AFTER_FRAMESET:{VI(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case y.INITIAL:{qI(this,t);break}case y.BEFORE_HEAD:case y.IN_HEAD:case y.IN_HEAD_NO_SCRIPT:case y.AFTER_HEAD:{this._err(t,D.misplacedDoctype);break}case y.IN_TABLE_TEXT:{Xt(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,D.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?c2(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case y.INITIAL:{Qt(this,t);break}case y.BEFORE_HTML:{GI(this,t);break}case y.BEFORE_HEAD:{zI(this,t);break}case y.IN_HEAD:{qe(this,t);break}case y.IN_HEAD_NO_SCRIPT:{JI(this,t);break}case y.AFTER_HEAD:{QI(this,t);break}case y.IN_BODY:{be(this,t);break}case y.IN_TABLE:{Mt(this,t);break}case y.IN_TABLE_TEXT:{Xt(this,t);break}case y.IN_CAPTION:{$b(this,t);break}case y.IN_COLUMN_GROUP:{Nr(this,t);break}case y.IN_TABLE_BODY:{ei(this,t);break}case y.IN_ROW:{ti(this,t);break}case y.IN_CELL:{Kb(this,t);break}case y.IN_SELECT:{Il(this,t);break}case y.IN_SELECT_IN_TABLE:{Xb(this,t);break}case y.IN_TEMPLATE:{jb(this,t);break}case y.AFTER_BODY:{t2(this,t);break}case y.IN_FRAMESET:{n2(this,t);break}case y.AFTER_FRAMESET:{r2(this,t);break}case y.AFTER_AFTER_BODY:{u2(this,t);break}case y.AFTER_AFTER_FRAMESET:{s2(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?f2(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case y.INITIAL:{Qt(this,t);break}case y.BEFORE_HTML:{YI(this,t);break}case y.BEFORE_HEAD:{$I(this,t);break}case y.IN_HEAD:{WI(this,t);break}case y.IN_HEAD_NO_SCRIPT:{KI(this,t);break}case y.AFTER_HEAD:{XI(this,t);break}case y.IN_BODY:{jn(this,t);break}case y.TEXT:{Ob(this,t);break}case y.IN_TABLE:{dn(this,t);break}case y.IN_TABLE_TEXT:{Xt(this,t);break}case y.IN_CAPTION:{Wb(this,t);break}case y.IN_COLUMN_GROUP:{Jb(this,t);break}case y.IN_TABLE_BODY:{Xi(this,t);break}case y.IN_ROW:{Sl(this,t);break}case y.IN_CELL:{Qb(this,t);break}case y.IN_SELECT:{bl(this,t);break}case y.IN_SELECT_IN_TABLE:{Zb(this,t);break}case y.IN_TEMPLATE:{e2(this,t);break}case y.AFTER_BODY:{Nl(this,t);break}case y.IN_FRAMESET:{i2(this,t);break}case y.AFTER_FRAMESET:{o2(this,t);break}case y.AFTER_AFTER_BODY:{vn(this,t);break}}}onEof(t){switch(this.insertionMode){case y.INITIAL:{Qt(this,t);break}case y.BEFORE_HTML:{rn(this,t);break}case y.BEFORE_HEAD:{on(this,t);break}case y.IN_HEAD:{un(this,t);break}case y.IN_HEAD_NO_SCRIPT:{sn(this,t);break}case y.AFTER_HEAD:{an(this,t);break}case y.IN_BODY:case y.IN_TABLE:case y.IN_CAPTION:case y.IN_COLUMN_GROUP:case y.IN_TABLE_BODY:case y.IN_ROW:case y.IN_CELL:case y.IN_SELECT:case y.IN_SELECT_IN_TABLE:{Cl(this,t);break}case y.TEXT:{Fb(this,t);break}case y.IN_TABLE_TEXT:{Xt(this,t);break}case y.IN_TEMPLATE:{xl(this,t);break}case y.AFTER_BODY:case y.IN_FRAMESET:case y.AFTER_FRAMESET:case y.AFTER_AFTER_BODY:case y.AFTER_AFTER_FRAMESET:{xr(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===T.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case y.IN_HEAD:case y.IN_HEAD_NO_SCRIPT:case y.AFTER_HEAD:case y.TEXT:case y.IN_COLUMN_GROUP:case y.IN_SELECT:case y.IN_SELECT_IN_TABLE:case y.IN_FRAMESET:case y.AFTER_FRAMESET:{this._insertCharacters(t);break}case y.IN_BODY:case y.IN_CAPTION:case y.IN_CELL:case y.IN_TEMPLATE:case y.AFTER_BODY:case y.AFTER_AFTER_BODY:case y.AFTER_AFTER_FRAMESET:{pl(this,t);break}case y.IN_TABLE:case y.IN_TABLE_BODY:case y.IN_ROW:{Si(this,t);break}case y.IN_TABLE_TEXT:{yl(this,t);break}}}}function LI(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):El(e,t),n}function wI(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){const r=e.openElements.items[i];if(r===t.element)break;e._isSpecialElement(r,e.openElements.tagIDs[i])&&(n=r)}return n||(e.openElements.shortenToLength(Math.max(i,0)),e.activeFormattingElements.removeEntry(t)),n}function OI(e,t,n){let i=t,r=e.openElements.getCommonAncestor(t);for(let u=0,a=r;a!==n;u++,a=r){r=e.openElements.getCommonAncestor(a);const l=e.activeFormattingElements.getElementEntry(a),f=l&&u>=PI;!l||f?(f&&e.activeFormattingElements.removeEntry(l),e.openElements.remove(a)):(a=FI(e,l),i===t&&(e.activeFormattingElements.bookmark=l),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(a,i),i=a)}return i}function FI(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function UI(e,t,n){const i=e.treeAdapter.getTagName(t),r=Ht(i);if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const u=e.treeAdapter.getNamespaceURI(t);r===d.TEMPLATE&&u===v.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function BI(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),{token:r}=n,u=e.treeAdapter.createElement(r.tagName,i,r.attrs);e._adoptNodes(t,u),e.treeAdapter.appendChild(t,u),e.activeFormattingElements.insertElementAfterBookmark(u,r),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,u,r.tagID)}function br(e,t){for(let n=0;n<DI;n++){const i=LI(e,t);if(!i)break;const r=wI(e,i);if(!r)break;e.activeFormattingElements.bookmark=i;const u=OI(e,r,i.element),a=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(u),a&&UI(e,a,u),BI(e,r,i)}}function Qi(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function HI(e,t){e._appendCommentNode(t,e.openElements.items[0])}function VI(e,t){e._appendCommentNode(t,e.document)}function xr(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(i);if(r&&!r.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const u=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(u);a&&!a.endTag&&e._setEndLocation(u,t)}}}}function qI(e,t){e._setDocumentType(t);const n=t.forceQuirks?Fe.QUIRKS:EI(t);TI(t)||e._err(t,D.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=y.BEFORE_HTML}function Qt(e,t){e._err(t,D.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Fe.QUIRKS),e.insertionMode=y.BEFORE_HTML,e._processToken(t)}function GI(e,t){t.tagID===d.HTML?(e._insertElement(t,v.HTML),e.insertionMode=y.BEFORE_HEAD):rn(e,t)}function YI(e,t){const n=t.tagID;(n===d.HTML||n===d.HEAD||n===d.BODY||n===d.BR)&&rn(e,t)}function rn(e,t){e._insertFakeRootElement(),e.insertionMode=y.BEFORE_HEAD,e._processToken(t)}function zI(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.HEAD:{e._insertElement(t,v.HTML),e.headElement=e.openElements.current,e.insertionMode=y.IN_HEAD;break}default:on(e,t)}}function $I(e,t){const n=t.tagID;n===d.HEAD||n===d.BODY||n===d.HTML||n===d.BR?on(e,t):e._err(t,D.endTagWithoutMatchingOpenElement)}function on(e,t){e._insertFakeElement(b.HEAD,d.HEAD),e.headElement=e.openElements.current,e.insertionMode=y.IN_HEAD,e._processToken(t)}function qe(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.BASE:case d.BASEFONT:case d.BGSOUND:case d.LINK:case d.META:{e._appendElement(t,v.HTML),t.ackSelfClosing=!0;break}case d.TITLE:{e._switchToTextParsing(t,pe.RCDATA);break}case d.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,pe.RAWTEXT):(e._insertElement(t,v.HTML),e.insertionMode=y.IN_HEAD_NO_SCRIPT);break}case d.NOFRAMES:case d.STYLE:{e._switchToTextParsing(t,pe.RAWTEXT);break}case d.SCRIPT:{e._switchToTextParsing(t,pe.SCRIPT_DATA);break}case d.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=y.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(y.IN_TEMPLATE);break}case d.HEAD:{e._err(t,D.misplacedStartTagForHeadElement);break}default:un(e,t)}}function WI(e,t){switch(t.tagID){case d.HEAD:{e.openElements.pop(),e.insertionMode=y.AFTER_HEAD;break}case d.BODY:case d.BR:case d.HTML:{un(e,t);break}case d.TEMPLATE:{mt(e,t);break}default:e._err(t,D.endTagWithoutMatchingOpenElement)}}function mt(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==d.TEMPLATE&&e._err(t,D.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(d.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,D.endTagWithoutMatchingOpenElement)}function un(e,t){e.openElements.pop(),e.insertionMode=y.AFTER_HEAD,e._processToken(t)}function JI(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.BASEFONT:case d.BGSOUND:case d.HEAD:case d.LINK:case d.META:case d.NOFRAMES:case d.STYLE:{qe(e,t);break}case d.NOSCRIPT:{e._err(t,D.nestedNoscriptInHead);break}default:sn(e,t)}}function KI(e,t){switch(t.tagID){case d.NOSCRIPT:{e.openElements.pop(),e.insertionMode=y.IN_HEAD;break}case d.BR:{sn(e,t);break}default:e._err(t,D.endTagWithoutMatchingOpenElement)}}function sn(e,t){const n=t.type===ne.EOF?D.openElementsLeftAfterEof:D.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=y.IN_HEAD,e._processToken(t)}function QI(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.BODY:{e._insertElement(t,v.HTML),e.framesetOk=!1,e.insertionMode=y.IN_BODY;break}case d.FRAMESET:{e._insertElement(t,v.HTML),e.insertionMode=y.IN_FRAMESET;break}case d.BASE:case d.BASEFONT:case d.BGSOUND:case d.LINK:case d.META:case d.NOFRAMES:case d.SCRIPT:case d.STYLE:case d.TEMPLATE:case d.TITLE:{e._err(t,D.abandonedHeadElementChild),e.openElements.push(e.headElement,d.HEAD),qe(e,t),e.openElements.remove(e.headElement);break}case d.HEAD:{e._err(t,D.misplacedStartTagForHeadElement);break}default:an(e,t)}}function XI(e,t){switch(t.tagID){case d.BODY:case d.HTML:case d.BR:{an(e,t);break}case d.TEMPLATE:{mt(e,t);break}default:e._err(t,D.endTagWithoutMatchingOpenElement)}}function an(e,t){e._insertFakeElement(b.BODY,d.BODY),e.insertionMode=y.IN_BODY,Zn(e,t)}function Zn(e,t){switch(t.type){case ne.CHARACTER:{ml(e,t);break}case ne.WHITESPACE_CHARACTER:{pl(e,t);break}case ne.COMMENT:{Qi(e,t);break}case ne.START_TAG:{be(e,t);break}case ne.END_TAG:{jn(e,t);break}case ne.EOF:{Cl(e,t);break}}}function pl(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function ml(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function ZI(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function jI(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function eb(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,v.HTML),e.insertionMode=y.IN_FRAMESET)}function tb(e,t){e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._insertElement(t,v.HTML)}function nb(e,t){e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&Ki.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,v.HTML)}function ib(e,t){e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._insertElement(t,v.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function rb(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._insertElement(t,v.HTML),n||(e.formElement=e.openElements.current))}function ob(e,t){e.framesetOk=!1;const n=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const r=e.openElements.tagIDs[i];if(n===d.LI&&r===d.LI||(n===d.DD||n===d.DT)&&(r===d.DD||r===d.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==d.ADDRESS&&r!==d.DIV&&r!==d.P&&e._isSpecialElement(e.openElements.items[i],r))break}e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._insertElement(t,v.HTML)}function ub(e,t){e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._insertElement(t,v.HTML),e.tokenizer.state=pe.PLAINTEXT}function sb(e,t){e.openElements.hasInScope(d.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(d.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.framesetOk=!1}function ab(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(b.A);n&&(br(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function lb(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function cb(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(d.NOBR)&&(br(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,v.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function fb(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function db(e,t){e.treeAdapter.getDocumentMode(e.document)!==Fe.QUIRKS&&e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._insertElement(t,v.HTML),e.framesetOk=!1,e.insertionMode=y.IN_TABLE}function gl(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,v.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Tl(e){const t=ol(e,lt.TYPE);return t!=null&&t.toLowerCase()===MI}function hb(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,v.HTML),Tl(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function pb(e,t){e._appendElement(t,v.HTML),t.ackSelfClosing=!0}function mb(e,t){e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._appendElement(t,v.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function gb(e,t){t.tagName=b.IMG,t.tagID=d.IMG,gl(e,t)}function Tb(e,t){e._insertElement(t,v.HTML),e.skipNextNewLine=!0,e.tokenizer.state=pe.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=y.TEXT}function Eb(e,t){e.openElements.hasInButtonScope(d.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,pe.RAWTEXT)}function Cb(e,t){e.framesetOk=!1,e._switchToTextParsing(t,pe.RAWTEXT)}function rs(e,t){e._switchToTextParsing(t,pe.RAWTEXT)}function yb(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===y.IN_TABLE||e.insertionMode===y.IN_CAPTION||e.insertionMode===y.IN_TABLE_BODY||e.insertionMode===y.IN_ROW||e.insertionMode===y.IN_CELL?y.IN_SELECT_IN_TABLE:y.IN_SELECT}function _b(e,t){e.openElements.currentTagId===d.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML)}function Ab(e,t){e.openElements.hasInScope(d.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,v.HTML)}function Sb(e,t){e.openElements.hasInScope(d.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(d.RTC),e._insertElement(t,v.HTML)}function Ib(e,t){e._reconstructActiveFormattingElements(),fl(t),Ir(t),t.selfClosing?e._appendElement(t,v.MATHML):e._insertElement(t,v.MATHML),t.ackSelfClosing=!0}function bb(e,t){e._reconstructActiveFormattingElements(),dl(t),Ir(t),t.selfClosing?e._appendElement(t,v.SVG):e._insertElement(t,v.SVG),t.ackSelfClosing=!0}function os(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML)}function be(e,t){switch(t.tagID){case d.I:case d.S:case d.B:case d.U:case d.EM:case d.TT:case d.BIG:case d.CODE:case d.FONT:case d.SMALL:case d.STRIKE:case d.STRONG:{lb(e,t);break}case d.A:{ab(e,t);break}case d.H1:case d.H2:case d.H3:case d.H4:case d.H5:case d.H6:{nb(e,t);break}case d.P:case d.DL:case d.OL:case d.UL:case d.DIV:case d.DIR:case d.NAV:case d.MAIN:case d.MENU:case d.ASIDE:case d.CENTER:case d.FIGURE:case d.FOOTER:case d.HEADER:case d.HGROUP:case d.DIALOG:case d.DETAILS:case d.ADDRESS:case d.ARTICLE:case d.SEARCH:case d.SECTION:case d.SUMMARY:case d.FIELDSET:case d.BLOCKQUOTE:case d.FIGCAPTION:{tb(e,t);break}case d.LI:case d.DD:case d.DT:{ob(e,t);break}case d.BR:case d.IMG:case d.WBR:case d.AREA:case d.EMBED:case d.KEYGEN:{gl(e,t);break}case d.HR:{mb(e,t);break}case d.RB:case d.RTC:{Ab(e,t);break}case d.RT:case d.RP:{Sb(e,t);break}case d.PRE:case d.LISTING:{ib(e,t);break}case d.XMP:{Eb(e,t);break}case d.SVG:{bb(e,t);break}case d.HTML:{ZI(e,t);break}case d.BASE:case d.LINK:case d.META:case d.STYLE:case d.TITLE:case d.SCRIPT:case d.BGSOUND:case d.BASEFONT:case d.TEMPLATE:{qe(e,t);break}case d.BODY:{jI(e,t);break}case d.FORM:{rb(e,t);break}case d.NOBR:{cb(e,t);break}case d.MATH:{Ib(e,t);break}case d.TABLE:{db(e,t);break}case d.INPUT:{hb(e,t);break}case d.PARAM:case d.TRACK:case d.SOURCE:{pb(e,t);break}case d.IMAGE:{gb(e,t);break}case d.BUTTON:{sb(e,t);break}case d.APPLET:case d.OBJECT:case d.MARQUEE:{fb(e,t);break}case d.IFRAME:{Cb(e,t);break}case d.SELECT:{yb(e,t);break}case d.OPTION:case d.OPTGROUP:{_b(e,t);break}case d.NOEMBED:case d.NOFRAMES:{rs(e,t);break}case d.FRAMESET:{eb(e,t);break}case d.TEXTAREA:{Tb(e,t);break}case d.NOSCRIPT:{e.options.scriptingEnabled?rs(e,t):os(e,t);break}case d.PLAINTEXT:{ub(e,t);break}case d.COL:case d.TH:case d.TD:case d.TR:case d.HEAD:case d.FRAME:case d.TBODY:case d.TFOOT:case d.THEAD:case d.CAPTION:case d.COLGROUP:break;default:os(e,t)}}function xb(e,t){if(e.openElements.hasInScope(d.BODY)&&(e.insertionMode=y.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Nb(e,t){e.openElements.hasInScope(d.BODY)&&(e.insertionMode=y.AFTER_BODY,Nl(e,t))}function Rb(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function kb(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(d.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(d.FORM):n&&e.openElements.remove(n))}function Mb(e){e.openElements.hasInButtonScope(d.P)||e._insertFakeElement(b.P,d.P),e._closePElement()}function Db(e){e.openElements.hasInListItemScope(d.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(d.LI),e.openElements.popUntilTagNamePopped(d.LI))}function Pb(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function vb(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Lb(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function wb(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(b.BR,d.BR),e.openElements.pop(),e.framesetOk=!1}function El(e,t){const n=t.tagName,i=t.tagID;for(let r=e.openElements.stackTop;r>0;r--){const u=e.openElements.items[r],a=e.openElements.tagIDs[r];if(i===a&&(i!==d.UNKNOWN||e.treeAdapter.getTagName(u)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=r&&e.openElements.shortenToLength(r);break}if(e._isSpecialElement(u,a))break}}function jn(e,t){switch(t.tagID){case d.A:case d.B:case d.I:case d.S:case d.U:case d.EM:case d.TT:case d.BIG:case d.CODE:case d.FONT:case d.NOBR:case d.SMALL:case d.STRIKE:case d.STRONG:{br(e,t);break}case d.P:{Mb(e);break}case d.DL:case d.UL:case d.OL:case d.DIR:case d.DIV:case d.NAV:case d.PRE:case d.MAIN:case d.MENU:case d.ASIDE:case d.BUTTON:case d.CENTER:case d.FIGURE:case d.FOOTER:case d.HEADER:case d.HGROUP:case d.DIALOG:case d.ADDRESS:case d.ARTICLE:case d.DETAILS:case d.SEARCH:case d.SECTION:case d.SUMMARY:case d.LISTING:case d.FIELDSET:case d.BLOCKQUOTE:case d.FIGCAPTION:{Rb(e,t);break}case d.LI:{Db(e);break}case d.DD:case d.DT:{Pb(e,t);break}case d.H1:case d.H2:case d.H3:case d.H4:case d.H5:case d.H6:{vb(e);break}case d.BR:{wb(e);break}case d.BODY:{xb(e,t);break}case d.HTML:{Nb(e,t);break}case d.FORM:{kb(e);break}case d.APPLET:case d.OBJECT:case d.MARQUEE:{Lb(e,t);break}case d.TEMPLATE:{mt(e,t);break}default:El(e,t)}}function Cl(e,t){e.tmplInsertionModeStack.length>0?xl(e,t):xr(e,t)}function Ob(e,t){var n;t.tagID===d.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Fb(e,t){e._err(t,D.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Si(e,t){if(e.openElements.currentTagId!==void 0&&hl.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=y.IN_TABLE_TEXT,t.type){case ne.CHARACTER:{_l(e,t);break}case ne.WHITESPACE_CHARACTER:{yl(e,t);break}}else En(e,t)}function Ub(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,v.HTML),e.insertionMode=y.IN_CAPTION}function Bb(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,v.HTML),e.insertionMode=y.IN_COLUMN_GROUP}function Hb(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(b.COLGROUP,d.COLGROUP),e.insertionMode=y.IN_COLUMN_GROUP,Nr(e,t)}function Vb(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,v.HTML),e.insertionMode=y.IN_TABLE_BODY}function qb(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(b.TBODY,d.TBODY),e.insertionMode=y.IN_TABLE_BODY,ei(e,t)}function Gb(e,t){e.openElements.hasInTableScope(d.TABLE)&&(e.openElements.popUntilTagNamePopped(d.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Yb(e,t){Tl(t)?e._appendElement(t,v.HTML):En(e,t),t.ackSelfClosing=!0}function zb(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,v.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Mt(e,t){switch(t.tagID){case d.TD:case d.TH:case d.TR:{qb(e,t);break}case d.STYLE:case d.SCRIPT:case d.TEMPLATE:{qe(e,t);break}case d.COL:{Hb(e,t);break}case d.FORM:{zb(e,t);break}case d.TABLE:{Gb(e,t);break}case d.TBODY:case d.TFOOT:case d.THEAD:{Vb(e,t);break}case d.INPUT:{Yb(e,t);break}case d.CAPTION:{Ub(e,t);break}case d.COLGROUP:{Bb(e,t);break}default:En(e,t)}}function dn(e,t){switch(t.tagID){case d.TABLE:{e.openElements.hasInTableScope(d.TABLE)&&(e.openElements.popUntilTagNamePopped(d.TABLE),e._resetInsertionMode());break}case d.TEMPLATE:{mt(e,t);break}case d.BODY:case d.CAPTION:case d.COL:case d.COLGROUP:case d.HTML:case d.TBODY:case d.TD:case d.TFOOT:case d.TH:case d.THEAD:case d.TR:break;default:En(e,t)}}function En(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Zn(e,t),e.fosterParentingEnabled=n}function yl(e,t){e.pendingCharacterTokens.push(t)}function _l(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Xt(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)En(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Al=new Set([d.CAPTION,d.COL,d.COLGROUP,d.TBODY,d.TD,d.TFOOT,d.TH,d.THEAD,d.TR]);function $b(e,t){const n=t.tagID;Al.has(n)?e.openElements.hasInTableScope(d.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(d.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=y.IN_TABLE,Mt(e,t)):be(e,t)}function Wb(e,t){const n=t.tagID;switch(n){case d.CAPTION:case d.TABLE:{e.openElements.hasInTableScope(d.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(d.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=y.IN_TABLE,n===d.TABLE&&dn(e,t));break}case d.BODY:case d.COL:case d.COLGROUP:case d.HTML:case d.TBODY:case d.TD:case d.TFOOT:case d.TH:case d.THEAD:case d.TR:break;default:jn(e,t)}}function Nr(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.COL:{e._appendElement(t,v.HTML),t.ackSelfClosing=!0;break}case d.TEMPLATE:{qe(e,t);break}default:Hn(e,t)}}function Jb(e,t){switch(t.tagID){case d.COLGROUP:{e.openElements.currentTagId===d.COLGROUP&&(e.openElements.pop(),e.insertionMode=y.IN_TABLE);break}case d.TEMPLATE:{mt(e,t);break}case d.COL:break;default:Hn(e,t)}}function Hn(e,t){e.openElements.currentTagId===d.COLGROUP&&(e.openElements.pop(),e.insertionMode=y.IN_TABLE,e._processToken(t))}function ei(e,t){switch(t.tagID){case d.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,v.HTML),e.insertionMode=y.IN_ROW;break}case d.TH:case d.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(b.TR,d.TR),e.insertionMode=y.IN_ROW,ti(e,t);break}case d.CAPTION:case d.COL:case d.COLGROUP:case d.TBODY:case d.TFOOT:case d.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE,Mt(e,t));break}default:Mt(e,t)}}function Xi(e,t){const n=t.tagID;switch(t.tagID){case d.TBODY:case d.TFOOT:case d.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE);break}case d.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE,dn(e,t));break}case d.BODY:case d.CAPTION:case d.COL:case d.COLGROUP:case d.HTML:case d.TD:case d.TH:case d.TR:break;default:dn(e,t)}}function ti(e,t){switch(t.tagID){case d.TH:case d.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,v.HTML),e.insertionMode=y.IN_CELL,e.activeFormattingElements.insertMarker();break}case d.CAPTION:case d.COL:case d.COLGROUP:case d.TBODY:case d.TFOOT:case d.THEAD:case d.TR:{e.openElements.hasInTableScope(d.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE_BODY,ei(e,t));break}default:Mt(e,t)}}function Sl(e,t){switch(t.tagID){case d.TR:{e.openElements.hasInTableScope(d.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE_BODY);break}case d.TABLE:{e.openElements.hasInTableScope(d.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE_BODY,Xi(e,t));break}case d.TBODY:case d.TFOOT:case d.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(d.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=y.IN_TABLE_BODY,Xi(e,t));break}case d.BODY:case d.CAPTION:case d.COL:case d.COLGROUP:case d.HTML:case d.TD:case d.TH:break;default:dn(e,t)}}function Kb(e,t){const n=t.tagID;Al.has(n)?(e.openElements.hasInTableScope(d.TD)||e.openElements.hasInTableScope(d.TH))&&(e._closeTableCell(),ti(e,t)):be(e,t)}function Qb(e,t){const n=t.tagID;switch(n){case d.TD:case d.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=y.IN_ROW);break}case d.TABLE:case d.TBODY:case d.TFOOT:case d.THEAD:case d.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Sl(e,t));break}case d.BODY:case d.CAPTION:case d.COL:case d.COLGROUP:case d.HTML:break;default:jn(e,t)}}function Il(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.OPTION:{e.openElements.currentTagId===d.OPTION&&e.openElements.pop(),e._insertElement(t,v.HTML);break}case d.OPTGROUP:{e.openElements.currentTagId===d.OPTION&&e.openElements.pop(),e.openElements.currentTagId===d.OPTGROUP&&e.openElements.pop(),e._insertElement(t,v.HTML);break}case d.HR:{e.openElements.currentTagId===d.OPTION&&e.openElements.pop(),e.openElements.currentTagId===d.OPTGROUP&&e.openElements.pop(),e._appendElement(t,v.HTML),t.ackSelfClosing=!0;break}case d.INPUT:case d.KEYGEN:case d.TEXTAREA:case d.SELECT:{e.openElements.hasInSelectScope(d.SELECT)&&(e.openElements.popUntilTagNamePopped(d.SELECT),e._resetInsertionMode(),t.tagID!==d.SELECT&&e._processStartTag(t));break}case d.SCRIPT:case d.TEMPLATE:{qe(e,t);break}}}function bl(e,t){switch(t.tagID){case d.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===d.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===d.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===d.OPTGROUP&&e.openElements.pop();break}case d.OPTION:{e.openElements.currentTagId===d.OPTION&&e.openElements.pop();break}case d.SELECT:{e.openElements.hasInSelectScope(d.SELECT)&&(e.openElements.popUntilTagNamePopped(d.SELECT),e._resetInsertionMode());break}case d.TEMPLATE:{mt(e,t);break}}}function Xb(e,t){const n=t.tagID;n===d.CAPTION||n===d.TABLE||n===d.TBODY||n===d.TFOOT||n===d.THEAD||n===d.TR||n===d.TD||n===d.TH?(e.openElements.popUntilTagNamePopped(d.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Il(e,t)}function Zb(e,t){const n=t.tagID;n===d.CAPTION||n===d.TABLE||n===d.TBODY||n===d.TFOOT||n===d.THEAD||n===d.TR||n===d.TD||n===d.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(d.SELECT),e._resetInsertionMode(),e.onEndTag(t)):bl(e,t)}function jb(e,t){switch(t.tagID){case d.BASE:case d.BASEFONT:case d.BGSOUND:case d.LINK:case d.META:case d.NOFRAMES:case d.SCRIPT:case d.STYLE:case d.TEMPLATE:case d.TITLE:{qe(e,t);break}case d.CAPTION:case d.COLGROUP:case d.TBODY:case d.TFOOT:case d.THEAD:{e.tmplInsertionModeStack[0]=y.IN_TABLE,e.insertionMode=y.IN_TABLE,Mt(e,t);break}case d.COL:{e.tmplInsertionModeStack[0]=y.IN_COLUMN_GROUP,e.insertionMode=y.IN_COLUMN_GROUP,Nr(e,t);break}case d.TR:{e.tmplInsertionModeStack[0]=y.IN_TABLE_BODY,e.insertionMode=y.IN_TABLE_BODY,ei(e,t);break}case d.TD:case d.TH:{e.tmplInsertionModeStack[0]=y.IN_ROW,e.insertionMode=y.IN_ROW,ti(e,t);break}default:e.tmplInsertionModeStack[0]=y.IN_BODY,e.insertionMode=y.IN_BODY,be(e,t)}}function e2(e,t){t.tagID===d.TEMPLATE&&mt(e,t)}function xl(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(d.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):xr(e,t)}function t2(e,t){t.tagID===d.HTML?be(e,t):Vn(e,t)}function Nl(e,t){var n;if(t.tagID===d.HTML){if(e.fragmentContext||(e.insertionMode=y.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===d.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&e._setEndLocation(i,t)}}else Vn(e,t)}function Vn(e,t){e.insertionMode=y.IN_BODY,Zn(e,t)}function n2(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.FRAMESET:{e._insertElement(t,v.HTML);break}case d.FRAME:{e._appendElement(t,v.HTML),t.ackSelfClosing=!0;break}case d.NOFRAMES:{qe(e,t);break}}}function i2(e,t){t.tagID===d.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==d.FRAMESET&&(e.insertionMode=y.AFTER_FRAMESET))}function r2(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.NOFRAMES:{qe(e,t);break}}}function o2(e,t){t.tagID===d.HTML&&(e.insertionMode=y.AFTER_AFTER_FRAMESET)}function u2(e,t){t.tagID===d.HTML?be(e,t):vn(e,t)}function vn(e,t){e.insertionMode=y.IN_BODY,Zn(e,t)}function s2(e,t){switch(t.tagID){case d.HTML:{be(e,t);break}case d.NOFRAMES:{qe(e,t);break}}}function a2(e,t){t.chars=he,e._insertCharacters(t)}function l2(e,t){e._insertCharacters(t),e.framesetOk=!1}function Rl(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==v.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function c2(e,t){if(bI(t))Rl(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===v.MATHML?fl(t):i===v.SVG&&(xI(t),dl(t)),Ir(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function f2(e,t){if(t.tagID===d.P||t.tagID===d.BR){Rl(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===v.HTML){e._endTagOutsideForeignContent(t);break}const r=e.treeAdapter.getTagName(i);if(r.toLowerCase()===t.tagName){t.tagName=r,e.openElements.shortenToLength(n);break}}}b.AREA,b.BASE,b.BASEFONT,b.BGSOUND,b.BR,b.COL,b.EMBED,b.FRAME,b.HR,b.IMG,b.INPUT,b.KEYGEN,b.LINK,b.META,b.PARAM,b.SOURCE,b.TRACK,b.WBR;const d2=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,h2=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),us={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function kl(e,t){const n=S2(e),i=Sa("type",{handlers:{root:p2,element:m2,text:g2,comment:Dl,doctype:T2,raw:C2},unknown:y2}),r={parser:n?new is(us):is.getFragmentParser(void 0,us),handle(l){i(l,r)},stitches:!1,options:t||{}};i(e,r),Vt(r,ze());const u=n?r.parser.document:r.parser.getFragment(),a=pS(u,{file:r.options.file});return r.stitches&&gr(a,"comment",function(l,f,c){const h=l;if(h.value.stitch&&c&&f!==void 0){const p=c.children;return p[f]=h.value.stitch,f}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function Ml(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function p2(e,t){Ml(e.children,t)}function m2(e,t){_2(e,t),Ml(e.children,t),A2(e,t)}function g2(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:ne.CHARACTER,chars:e.value,location:Cn(e)};Vt(t,ze(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function T2(e,t){const n={type:ne.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Cn(e)};Vt(t,ze(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function E2(e,t){t.stitches=!0;const n=I2(e);if("children"in e&&"children"in n){const i=kl({type:"root",children:e.children},t.options);n.children=i.children}Dl({type:"comment",value:{stitch:n}},t)}function Dl(e,t){const n=e.value,i={type:ne.COMMENT,data:n,location:Cn(e)};Vt(t,ze(e)),t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken)}function C2(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Pl(t,ze(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(d2,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function y2(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))E2(n,t);else{let i="";throw h2.has(n.type)&&(i=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+i)}}function Vt(e,t){Pl(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=pe.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Pl(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function _2(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===pe.PLAINTEXT)return;Vt(t,ze(e));const i=t.parser.openElements.current;let r="namespaceURI"in i?i.namespaceURI:at.html;r===at.html&&n==="svg"&&(r=at.svg);const u=kS({...e,children:[]},{space:r===at.svg?"svg":"html"}),a={type:ne.START_TAG,tagName:n,tagID:Ht(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in u?u.attrs:[],location:Cn(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function A2(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&FS.includes(n)||t.parser.tokenizer.state===pe.PLAINTEXT)return;Vt(t,$n(e));const i={type:ne.END_TAG,tagName:n,tagID:Ht(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Cn(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===pe.RCDATA||t.parser.tokenizer.state===pe.RAWTEXT||t.parser.tokenizer.state===pe.SCRIPT_DATA)&&(t.parser.tokenizer.state=pe.DATA)}function S2(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Cn(e){const t=ze(e)||{line:void 0,column:void 0,offset:void 0},n=$n(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function I2(e){return"children"in e?kt({...e,children:[]}):kt(e)}function U2(e){return function(t,n){return kl(t,{...e,file:n})}}export{N2 as G,it as T,Gy as V,L2 as a,w2 as b,R2 as c,v2 as d,U2 as e,F2 as f,x2 as r,P2 as t,O2 as u,gr as v};
